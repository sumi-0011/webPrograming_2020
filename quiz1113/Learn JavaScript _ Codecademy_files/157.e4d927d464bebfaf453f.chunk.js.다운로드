(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[157],{"/POA":function(h,u,f){window,h.exports=function(h){var u={};function r(f){if(u[f])return u[f].exports;var d=u[f]={i:f,l:!1,exports:{}};return h[f].call(d.exports,d,d.exports,r),d.l=!0,d.exports}return r.m=h,r.c=u,r.d=function(h,u,f){r.o(h,u)||Object.defineProperty(h,u,{enumerable:!0,get:f})},r.r=function(h){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})},r.t=function(h,u){if(1&u&&(h=r(h)),8&u)return h;if(4&u&&"object"==typeof h&&h&&h.__esModule)return h;var f=Object.create(null);if(r.r(f),Object.defineProperty(f,"default",{enumerable:!0,value:h}),2&u&&"string"!=typeof h)for(var d in h)r.d(f,d,function(u){return h[u]}.bind(null,d));return f},r.n=function(h){var u=h&&h.__esModule?function(){return h.default}:function(){return h};return r.d(u,"a",u),u},r.o=function(h,u){return Object.prototype.hasOwnProperty.call(h,u)},r.p="",r(r.s=33)}([function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.forwardEvent=u.EventEmitter=void 0;var d=function(){function e(){this._listeners=[],this._disposed=!1}return Object.defineProperty(e.prototype,"event",{get:function(){var h=this;return this._event||(this._event=function(u){return h._listeners.push(u),{dispose:function(){if(!h._disposed)for(var f=0;f<h._listeners.length;f++)if(h._listeners[f]===u)return void h._listeners.splice(f,1)}}}),this._event},enumerable:!1,configurable:!0}),e.prototype.fire=function(h,u){for(var f=[],d=0;d<this._listeners.length;d++)f.push(this._listeners[d]);for(d=0;d<f.length;d++)f[d].call(void 0,h,u)},e.prototype.dispose=function(){this._listeners&&(this._listeners.length=0),this._disposed=!0},e}();u.EventEmitter=d,u.forwardEvent=function(h,u){return h((function(h){return u.fire(h)}))}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.IUnicodeService=u.IOptionsService=u.ILogService=u.IInstantiationService=u.IDirtyRowService=u.ICharsetService=u.ICoreService=u.ICoreMouseService=u.IBufferService=void 0;var d=f(14);u.IBufferService=d.createDecorator("BufferService"),u.ICoreMouseService=d.createDecorator("CoreMouseService"),u.ICoreService=d.createDecorator("CoreService"),u.ICharsetService=d.createDecorator("CharsetService"),u.IDirtyRowService=d.createDecorator("DirtyRowService"),u.IInstantiationService=d.createDecorator("InstantiationService"),u.ILogService=d.createDecorator("LogService"),u.IOptionsService=d.createDecorator("OptionsService"),u.IUnicodeService=d.createDecorator("UnicodeService")},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.getDisposeArrayDisposable=u.disposeArray=u.Disposable=void 0;var d=function(){function e(){this._disposables=[],this._isDisposed=!1}return e.prototype.dispose=function(){this._isDisposed=!0,this._disposables.forEach((function(h){return h.dispose()})),this._disposables.length=0},e.prototype.register=function(h){return this._disposables.push(h),h},e.prototype.unregister=function(h){var u=this._disposables.indexOf(h);-1!==u&&this._disposables.splice(u,1)},e}();function n(h){h.forEach((function(h){return h.dispose()})),h.length=0}u.Disposable=d,u.disposeArray=n,u.getDisposeArrayDisposable=function(h){return{dispose:function(){return n(h)}}}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.WHITESPACE_CELL_CODE=u.WHITESPACE_CELL_WIDTH=u.WHITESPACE_CELL_CHAR=u.NULL_CELL_CODE=u.NULL_CELL_WIDTH=u.NULL_CELL_CHAR=u.CHAR_DATA_CODE_INDEX=u.CHAR_DATA_WIDTH_INDEX=u.CHAR_DATA_CHAR_INDEX=u.CHAR_DATA_ATTR_INDEX=u.DEFAULT_ATTR=u.DEFAULT_COLOR=void 0,u.DEFAULT_COLOR=256,u.DEFAULT_ATTR=256|u.DEFAULT_COLOR<<9,u.CHAR_DATA_ATTR_INDEX=0,u.CHAR_DATA_CHAR_INDEX=1,u.CHAR_DATA_WIDTH_INDEX=2,u.CHAR_DATA_CODE_INDEX=3,u.NULL_CELL_CHAR="",u.NULL_CELL_WIDTH=1,u.NULL_CELL_CODE=0,u.WHITESPACE_CELL_CHAR=" ",u.WHITESPACE_CELL_WIDTH=1,u.WHITESPACE_CELL_CODE=32},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.CellData=void 0;var v=f(8),g=f(3),y=f(6),m=function(h){function t(){var u=null!==h&&h.apply(this,arguments)||this;return u.content=0,u.fg=0,u.bg=0,u.extended=new y.ExtendedAttrs,u.combinedData="",u}return p(t,h),t.fromCharData=function(h){var u=new t;return u.setFromCharData(h),u},t.prototype.isCombined=function(){return 2097152&this.content},t.prototype.getWidth=function(){return this.content>>22},t.prototype.getChars=function(){return 2097152&this.content?this.combinedData:2097151&this.content?v.stringFromCodePoint(2097151&this.content):""},t.prototype.getCode=function(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content},t.prototype.setFromCharData=function(h){this.fg=h[g.CHAR_DATA_ATTR_INDEX],this.bg=0;var u=!1;if(h[g.CHAR_DATA_CHAR_INDEX].length>2)u=!0;else if(2===h[g.CHAR_DATA_CHAR_INDEX].length){var f=h[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=f&&f<=56319){var d=h[g.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=d&&d<=57343?this.content=1024*(f-55296)+d-56320+65536|h[g.CHAR_DATA_WIDTH_INDEX]<<22:u=!0}else u=!0}else this.content=h[g.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|h[g.CHAR_DATA_WIDTH_INDEX]<<22;u&&(this.combinedData=h[g.CHAR_DATA_CHAR_INDEX],this.content=2097152|h[g.CHAR_DATA_WIDTH_INDEX]<<22)},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(y.AttributeData);u.CellData=m},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ISoundService=u.ISelectionService=u.IRenderService=u.IMouseService=u.ICoreBrowserService=u.ICharSizeService=void 0;var d=f(14);u.ICharSizeService=d.createDecorator("CharSizeService"),u.ICoreBrowserService=d.createDecorator("CoreBrowserService"),u.IMouseService=d.createDecorator("MouseService"),u.IRenderService=d.createDecorator("RenderService"),u.ISelectionService=d.createDecorator("SelectionService"),u.ISoundService=d.createDecorator("SoundService")},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ExtendedAttrs=u.AttributeData=void 0;var d=function(){function e(){this.fg=0,this.bg=0,this.extended=new p}return e.toColorRGB=function(h){return[h>>>16&255,h>>>8&255,255&h]},e.fromColorRGB=function(h){return(255&h[0])<<16|(255&h[1])<<8|255&h[2]},e.prototype.clone=function(){var h=new e;return h.fg=this.fg,h.bg=this.bg,h.extended=this.extended.clone(),h},e.prototype.isInverse=function(){return 67108864&this.fg},e.prototype.isBold=function(){return 134217728&this.fg},e.prototype.isUnderline=function(){return 268435456&this.fg},e.prototype.isBlink=function(){return 536870912&this.fg},e.prototype.isInvisible=function(){return 1073741824&this.fg},e.prototype.isItalic=function(){return 67108864&this.bg},e.prototype.isDim=function(){return 134217728&this.bg},e.prototype.getFgColorMode=function(){return 50331648&this.fg},e.prototype.getBgColorMode=function(){return 50331648&this.bg},e.prototype.isFgRGB=function(){return 50331648==(50331648&this.fg)},e.prototype.isBgRGB=function(){return 50331648==(50331648&this.bg)},e.prototype.isFgPalette=function(){return 16777216==(50331648&this.fg)||33554432==(50331648&this.fg)},e.prototype.isBgPalette=function(){return 16777216==(50331648&this.bg)||33554432==(50331648&this.bg)},e.prototype.isFgDefault=function(){return 0==(50331648&this.fg)},e.prototype.isBgDefault=function(){return 0==(50331648&this.bg)},e.prototype.isAttributeDefault=function(){return 0===this.fg&&0===this.bg},e.prototype.getFgColor=function(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}},e.prototype.getBgColor=function(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}},e.prototype.hasExtendedAttrs=function(){return 268435456&this.bg},e.prototype.updateExtended=function(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456},e.prototype.getUnderlineColor=function(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()},e.prototype.getUnderlineColorMode=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()},e.prototype.isUnderlineColorRGB=function(){return 268435456&this.bg&&~this.extended.underlineColor?50331648==(50331648&this.extended.underlineColor):this.isFgRGB()},e.prototype.isUnderlineColorPalette=function(){return 268435456&this.bg&&~this.extended.underlineColor?16777216==(50331648&this.extended.underlineColor)||33554432==(50331648&this.extended.underlineColor):this.isFgPalette()},e.prototype.isUnderlineColorDefault=function(){return 268435456&this.bg&&~this.extended.underlineColor?0==(50331648&this.extended.underlineColor):this.isFgDefault()},e.prototype.getUnderlineStyle=function(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0},e}();u.AttributeData=d;var p=function(){function e(h,u){void 0===h&&(h=0),void 0===u&&(u=-1),this.underlineStyle=h,this.underlineColor=u}return e.prototype.clone=function(){return new e(this.underlineStyle,this.underlineColor)},e.prototype.isEmpty=function(){return 0===this.underlineStyle},e}();u.ExtendedAttrs=p},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.addDisposableDomListener=void 0,u.addDisposableDomListener=function(h,u,f,d){h.addEventListener(u,f,d);var p=!1;return{dispose:function(){p||(p=!0,h.removeEventListener(u,f,d))}}}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.Utf8ToUtf32=u.StringToUtf32=u.utf32ToString=u.stringFromCodePoint=void 0,u.stringFromCodePoint=function(h){return h>65535?(h-=65536,String.fromCharCode(55296+(h>>10))+String.fromCharCode(h%1024+56320)):String.fromCharCode(h)},u.utf32ToString=function(h,u,f){void 0===u&&(u=0),void 0===f&&(f=h.length);for(var d="",p=u;p<f;++p){var v=h[p];v>65535?(v-=65536,d+=String.fromCharCode(55296+(v>>10))+String.fromCharCode(v%1024+56320)):d+=String.fromCharCode(v)}return d};var d=function(){function e(){this._interim=0}return e.prototype.clear=function(){this._interim=0},e.prototype.decode=function(h,u){var f=h.length;if(!f)return 0;var d=0,p=0;this._interim&&(56320<=(y=h.charCodeAt(p++))&&y<=57343?u[d++]=1024*(this._interim-55296)+y-56320+65536:(u[d++]=this._interim,u[d++]=y),this._interim=0);for(var v=p;v<f;++v){var g=h.charCodeAt(v);if(55296<=g&&g<=56319){if(++v>=f)return this._interim=g,d;var y;56320<=(y=h.charCodeAt(v))&&y<=57343?u[d++]=1024*(g-55296)+y-56320+65536:(u[d++]=g,u[d++]=y)}else u[d++]=g}return d},e}();u.StringToUtf32=d;var p=function(){function e(){this.interim=new Uint8Array(3)}return e.prototype.clear=function(){this.interim.fill(0)},e.prototype.decode=function(h,u){var f=h.length;if(!f)return 0;var d,p,v,g,y=0,m=0,C=0;if(this.interim[0]){var w=!1,E=this.interim[0];E&=192==(224&E)?31:224==(240&E)?15:7;for(var L=0,A=void 0;(A=63&this.interim[++L])&&L<4;)E<<=6,E|=A;for(var R=192==(224&this.interim[0])?2:224==(240&this.interim[0])?3:4,k=R-L;C<k;){if(C>=f)return 0;if(128!=(192&(A=h[C++]))){C--,w=!0;break}this.interim[L++]=A,E<<=6,E|=63&A}w||(2===R?E<128?C--:u[y++]=E:3===R?E<2048||E>=55296&&E<=57343||(u[y++]=E):E<65536||E>1114111||(u[y++]=E)),this.interim.fill(0)}for(var x=f-4,D=C;D<f;){for(;!(!(D<x)||128&(d=h[D])||128&(p=h[D+1])||128&(v=h[D+2])||128&(g=h[D+3]));)u[y++]=d,u[y++]=p,u[y++]=v,u[y++]=g,D+=4;if((d=h[D++])<128)u[y++]=d;else if(192==(224&d)){if(D>=f)return this.interim[0]=d,y;if(128!=(192&(p=h[D++]))){D--;continue}if((m=(31&d)<<6|63&p)<128){D--;continue}u[y++]=m}else if(224==(240&d)){if(D>=f)return this.interim[0]=d,y;if(128!=(192&(p=h[D++]))){D--;continue}if(D>=f)return this.interim[0]=d,this.interim[1]=p,y;if(128!=(192&(v=h[D++]))){D--;continue}if((m=(15&d)<<12|(63&p)<<6|63&v)<2048||m>=55296&&m<=57343)continue;u[y++]=m}else if(240==(248&d)){if(D>=f)return this.interim[0]=d,y;if(128!=(192&(p=h[D++]))){D--;continue}if(D>=f)return this.interim[0]=d,this.interim[1]=p,y;if(128!=(192&(v=h[D++]))){D--;continue}if(D>=f)return this.interim[0]=d,this.interim[1]=p,this.interim[2]=v,y;if(128!=(192&(g=h[D++]))){D--;continue}if((m=(7&d)<<18|(63&p)<<12|(63&v)<<6|63&g)<65536||m>1114111)continue;u[y++]=m}}return y},e}();u.Utf8ToUtf32=p},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CHAR_ATLAS_CELL_SPACING=u.DIM_OPACITY=u.INVERTED_DEFAULT_COLOR=void 0,u.INVERTED_DEFAULT_COLOR=257,u.DIM_OPACITY=.5,u.CHAR_ATLAS_CELL_SPACING=1},function(h,u,f){"use strict";var d,p,v,g;function a(h){var u=h.toString(16);return u.length<2?"0"+u:u}function c(h,u){return h<u?(u+.05)/(h+.05):(h+.05)/(u+.05)}Object.defineProperty(u,"__esModule",{value:!0}),u.contrastRatio=u.toPaddedHex=u.rgba=u.rgb=u.css=u.color=u.channels=void 0,function(h){h.toCss=function(h,u,f,d){return void 0!==d?"#"+a(h)+a(u)+a(f)+a(d):"#"+a(h)+a(u)+a(f)},h.toRgba=function(h,u,f,d){return void 0===d&&(d=255),(h<<24|u<<16|f<<8|d)>>>0}}(d=u.channels||(u.channels={})),(p=u.color||(u.color={})).blend=function(h,u){var f=(255&u.rgba)/255;if(1===f)return{css:u.css,rgba:u.rgba};var p=u.rgba>>24&255,v=u.rgba>>16&255,g=u.rgba>>8&255,y=h.rgba>>24&255,m=h.rgba>>16&255,C=h.rgba>>8&255,w=y+Math.round((p-y)*f),E=m+Math.round((v-m)*f),L=C+Math.round((g-C)*f);return{css:d.toCss(w,E,L),rgba:d.toRgba(w,E,L)}},p.ensureContrastRatio=function(h,u,f){var d=g.ensureContrastRatio(h.rgba,u.rgba,f);if(d)return g.toColor(d>>24&255,d>>16&255,d>>8&255)},p.opaque=function(h){var u=(255|h.rgba)>>>0,f=g.toChannels(u),p=f[0],v=f[1],y=f[2];return{css:d.toCss(p,v,y),rgba:u}},(u.css||(u.css={})).toColor=function(h){return{css:h,rgba:(parseInt(h.slice(1),16)<<8|255)>>>0}},function(h){function t(h,u,f){var d=h/255,p=u/255,v=f/255;return.2126*(d<=.03928?d/12.92:Math.pow((d+.055)/1.055,2.4))+.7152*(p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4))+.0722*(v<=.03928?v/12.92:Math.pow((v+.055)/1.055,2.4))}h.relativeLuminance=function(h){return t(h>>16&255,h>>8&255,255&h)},h.relativeLuminance2=t}(v=u.rgb||(u.rgb={})),function(h){function t(h,u,f){for(var d=h>>24&255,p=h>>16&255,g=h>>8&255,y=u>>24&255,m=u>>16&255,C=u>>8&255,w=c(v.relativeLuminance2(y,C,m),v.relativeLuminance2(d,p,g));w<f&&(y>0||m>0||C>0);)y-=Math.max(0,Math.ceil(.1*y)),m-=Math.max(0,Math.ceil(.1*m)),C-=Math.max(0,Math.ceil(.1*C)),w=c(v.relativeLuminance2(y,C,m),v.relativeLuminance2(d,p,g));return(y<<24|m<<16|C<<8|255)>>>0}function r(h,u,f){for(var d=h>>24&255,p=h>>16&255,g=h>>8&255,y=u>>24&255,m=u>>16&255,C=u>>8&255,w=c(v.relativeLuminance2(y,C,m),v.relativeLuminance2(d,p,g));w<f&&(y<255||m<255||C<255);)y=Math.min(255,y+Math.ceil(.1*(255-y))),m=Math.min(255,m+Math.ceil(.1*(255-m))),C=Math.min(255,C+Math.ceil(.1*(255-C))),w=c(v.relativeLuminance2(y,C,m),v.relativeLuminance2(d,p,g));return(y<<24|m<<16|C<<8|255)>>>0}h.ensureContrastRatio=function(h,u,f){var d=v.relativeLuminance(h>>8),p=v.relativeLuminance(u>>8);if(c(d,p)<f)return p<d?t(h,u,f):r(h,u,f)},h.reduceLuminance=t,h.increaseLuminance=r,h.toChannels=function(h){return[h>>24&255,h>>16&255,h>>8&255,255&h]},h.toColor=function(h,u,f){return{css:d.toCss(h,u,f),rgba:d.toRgba(h,u,f)}}}(g=u.rgba||(u.rgba={})),u.toPaddedHex=a,u.contrastRatio=c},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.isLinux=u.isWindows=u.isIphone=u.isIpad=u.isMac=u.isSafari=u.isFirefox=void 0;var d="undefined"==typeof navigator,p=d?"node":navigator.userAgent,v=d?"node":navigator.platform;function s(h,u){return h.indexOf(u)>=0}u.isFirefox=!!~p.indexOf("Firefox"),u.isSafari=/^((?!chrome|android).)*safari/i.test(p),u.isMac=s(["Macintosh","MacIntel","MacPPC","Mac68K"],v),u.isIpad="iPad"===v,u.isIphone="iPhone"===v,u.isWindows=s(["Windows","Win16","Win32","WinCE"],v),u.isLinux=v.indexOf("Linux")>=0},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.C1=u.C0=void 0,function(h){h.NUL="\0",h.SOH="",h.STX="",h.ETX="",h.EOT="",h.ENQ="",h.ACK="",h.BEL="",h.BS="\b",h.HT="\t",h.LF="\n",h.VT="\v",h.FF="\f",h.CR="\r",h.SO="",h.SI="",h.DLE="",h.DC1="",h.DC2="",h.DC3="",h.DC4="",h.NAK="",h.SYN="",h.ETB="",h.CAN="",h.EM="",h.SUB="",h.ESC="",h.FS="",h.GS="",h.RS="",h.US="",h.SP=" ",h.DEL=""}(u.C0||(u.C0={})),function(h){h.PAD="¬Ä",h.HOP="¬Å",h.BPH="¬Ç",h.NBH="¬É",h.IND="¬Ñ",h.NEL="¬Ö",h.SSA="¬Ü",h.ESA="¬á",h.HTS="¬à",h.HTJ="¬â",h.VTS="¬ä",h.PLD="¬ã",h.PLU="¬å",h.RI="¬ç",h.SS2="¬é",h.SS3="¬è",h.DCS="¬ê",h.PU1="¬ë",h.PU2="¬í",h.STS="¬ì",h.CCH="¬î",h.MW="¬ï",h.SPA="¬ñ",h.EPA="¬ó",h.SOS="¬ò",h.SGCI="¬ô",h.SCI="¬ö",h.CSI="¬õ",h.ST="¬ú",h.OSC="¬ù",h.PM="¬û",h.APC="¬ü"}(u.C1||(u.C1={}))},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.BaseRenderLayer=void 0;var d=f(3),p=f(9),v=f(24),g=f(6),y=f(27),m=f(10),C=function(){function e(h,u,f,d,p,v,g,y){this._container=h,this._alpha=d,this._colors=p,this._rendererId=v,this._bufferService=g,this._optionsService=y,this._scaledCharWidth=0,this._scaledCharHeight=0,this._scaledCellWidth=0,this._scaledCellHeight=0,this._scaledCharLeft=0,this._scaledCharTop=0,this._currentGlyphIdentifier={chars:"",code:0,bg:0,fg:0,bold:!1,dim:!1,italic:!1},this._canvas=document.createElement("canvas"),this._canvas.classList.add("xterm-"+u+"-layer"),this._canvas.style.zIndex=f.toString(),this._initCanvas(),this._container.appendChild(this._canvas)}return e.prototype.dispose=function(){var h,u;null===(h=this._canvas.parentElement)||void 0===h||h.removeChild(this._canvas),null===(u=this._charAtlas)||void 0===u||u.dispose()},e.prototype._initCanvas=function(){this._ctx=y.throwIfFalsy(this._canvas.getContext("2d",{alpha:this._alpha})),this._alpha||this._clearAll()},e.prototype.onOptionsChanged=function(){},e.prototype.onBlur=function(){},e.prototype.onFocus=function(){},e.prototype.onCursorMove=function(){},e.prototype.onGridChanged=function(h,u){},e.prototype.onSelectionChanged=function(h,u,f){void 0===f&&(f=!1)},e.prototype.setColors=function(h){this._refreshCharAtlas(h)},e.prototype._setTransparency=function(h){if(h!==this._alpha){var u=this._canvas;this._alpha=h,this._canvas=this._canvas.cloneNode(),this._initCanvas(),this._container.replaceChild(this._canvas,u),this._refreshCharAtlas(this._colors),this.onGridChanged(0,this._bufferService.rows-1)}},e.prototype._refreshCharAtlas=function(h){this._scaledCharWidth<=0&&this._scaledCharHeight<=0||(this._charAtlas=v.acquireCharAtlas(this._optionsService.options,this._rendererId,h,this._scaledCharWidth,this._scaledCharHeight),this._charAtlas.warmUp())},e.prototype.resize=function(h){this._scaledCellWidth=h.scaledCellWidth,this._scaledCellHeight=h.scaledCellHeight,this._scaledCharWidth=h.scaledCharWidth,this._scaledCharHeight=h.scaledCharHeight,this._scaledCharLeft=h.scaledCharLeft,this._scaledCharTop=h.scaledCharTop,this._canvas.width=h.scaledCanvasWidth,this._canvas.height=h.scaledCanvasHeight,this._canvas.style.width=h.canvasWidth+"px",this._canvas.style.height=h.canvasHeight+"px",this._alpha||this._clearAll(),this._refreshCharAtlas(this._colors)},e.prototype._fillCells=function(h,u,f,d){this._ctx.fillRect(h*this._scaledCellWidth,u*this._scaledCellHeight,f*this._scaledCellWidth,d*this._scaledCellHeight)},e.prototype._fillBottomLineAtCells=function(h,u,f){void 0===f&&(f=1),this._ctx.fillRect(h*this._scaledCellWidth,(u+1)*this._scaledCellHeight-window.devicePixelRatio-1,f*this._scaledCellWidth,window.devicePixelRatio)},e.prototype._fillLeftLineAtCell=function(h,u,f){this._ctx.fillRect(h*this._scaledCellWidth,u*this._scaledCellHeight,window.devicePixelRatio*f,this._scaledCellHeight)},e.prototype._strokeRectAtCell=function(h,u,f,d){this._ctx.lineWidth=window.devicePixelRatio,this._ctx.strokeRect(h*this._scaledCellWidth+window.devicePixelRatio/2,u*this._scaledCellHeight+window.devicePixelRatio/2,f*this._scaledCellWidth-window.devicePixelRatio,d*this._scaledCellHeight-window.devicePixelRatio)},e.prototype._clearAll=function(){this._alpha?this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(0,0,this._canvas.width,this._canvas.height))},e.prototype._clearCells=function(h,u,f,d){this._alpha?this._ctx.clearRect(h*this._scaledCellWidth,u*this._scaledCellHeight,f*this._scaledCellWidth,d*this._scaledCellHeight):(this._ctx.fillStyle=this._colors.background.css,this._ctx.fillRect(h*this._scaledCellWidth,u*this._scaledCellHeight,f*this._scaledCellWidth,d*this._scaledCellHeight))},e.prototype._fillCharTrueColor=function(h,u,f){this._ctx.font=this._getFont(!1,!1),this._ctx.textBaseline="middle",this._clipRow(f),this._ctx.fillText(h.getChars(),u*this._scaledCellWidth+this._scaledCharLeft,f*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2)},e.prototype._drawChars=function(h,u,f){var v,g,y=this._getContrastColor(h);y||h.isFgRGB()||h.isBgRGB()?this._drawUncachedChars(h,u,f,y):(h.isInverse()?(v=h.isBgDefault()?p.INVERTED_DEFAULT_COLOR:h.getBgColor(),g=h.isFgDefault()?p.INVERTED_DEFAULT_COLOR:h.getFgColor()):(g=h.isBgDefault()?d.DEFAULT_COLOR:h.getBgColor(),v=h.isFgDefault()?d.DEFAULT_COLOR:h.getFgColor()),v+=this._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&v<8?8:0,this._currentGlyphIdentifier.chars=h.getChars()||d.WHITESPACE_CELL_CHAR,this._currentGlyphIdentifier.code=h.getCode()||d.WHITESPACE_CELL_CODE,this._currentGlyphIdentifier.bg=g,this._currentGlyphIdentifier.fg=v,this._currentGlyphIdentifier.bold=!!h.isBold(),this._currentGlyphIdentifier.dim=!!h.isDim(),this._currentGlyphIdentifier.italic=!!h.isItalic(),this._charAtlas&&this._charAtlas.draw(this._ctx,this._currentGlyphIdentifier,u*this._scaledCellWidth+this._scaledCharLeft,f*this._scaledCellHeight+this._scaledCharTop)||this._drawUncachedChars(h,u,f))},e.prototype._drawUncachedChars=function(h,u,f,d){if(this._ctx.save(),this._ctx.font=this._getFont(!!h.isBold(),!!h.isItalic()),this._ctx.textBaseline="middle",h.isInverse())if(d)this._ctx.fillStyle=d.css;else if(h.isBgDefault())this._ctx.fillStyle=m.color.opaque(this._colors.background).css;else if(h.isBgRGB())this._ctx.fillStyle="rgb("+g.AttributeData.toColorRGB(h.getBgColor()).join(",")+")";else{var v=h.getBgColor();this._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&v<8&&(v+=8),this._ctx.fillStyle=this._colors.ansi[v].css}else if(d)this._ctx.fillStyle=d.css;else if(h.isFgDefault())this._ctx.fillStyle=this._colors.foreground.css;else if(h.isFgRGB())this._ctx.fillStyle="rgb("+g.AttributeData.toColorRGB(h.getFgColor()).join(",")+")";else{var y=h.getFgColor();this._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&y<8&&(y+=8),this._ctx.fillStyle=this._colors.ansi[y].css}this._clipRow(f),h.isDim()&&(this._ctx.globalAlpha=p.DIM_OPACITY),this._ctx.fillText(h.getChars(),u*this._scaledCellWidth+this._scaledCharLeft,f*this._scaledCellHeight+this._scaledCharTop+this._scaledCharHeight/2),this._ctx.restore()},e.prototype._clipRow=function(h){this._ctx.beginPath(),this._ctx.rect(0,h*this._scaledCellHeight,this._bufferService.cols*this._scaledCellWidth,this._scaledCellHeight),this._ctx.clip()},e.prototype._getFont=function(h,u){return(u?"italic":"")+" "+(h?this._optionsService.options.fontWeightBold:this._optionsService.options.fontWeight)+" "+this._optionsService.options.fontSize*window.devicePixelRatio+"px "+this._optionsService.options.fontFamily},e.prototype._getContrastColor=function(h){if(1!==this._optionsService.options.minimumContrastRatio){var u=this._colors.contrastCache.getColor(h.bg,h.fg);if(void 0!==u)return u||void 0;var f=h.getFgColor(),d=h.getFgColorMode(),p=h.getBgColor(),v=h.getBgColorMode(),g=!!h.isInverse(),y=!!h.isInverse();if(g){var C=f;f=p,p=C;var w=d;d=v,v=w}var E=this._resolveBackgroundRgba(v,p,g),L=this._resolveForegroundRgba(d,f,g,y),A=m.rgba.ensureContrastRatio(E,L,this._optionsService.options.minimumContrastRatio);if(A){var R={css:m.channels.toCss(A>>24&255,A>>16&255,A>>8&255),rgba:A};return this._colors.contrastCache.setColor(h.bg,h.fg,R),R}this._colors.contrastCache.setColor(h.bg,h.fg,null)}},e.prototype._resolveBackgroundRgba=function(h,u,f){switch(h){case 16777216:case 33554432:return this._colors.ansi[u].rgba;case 50331648:return u<<8;case 0:default:return f?this._colors.foreground.rgba:this._colors.background.rgba}},e.prototype._resolveForegroundRgba=function(h,u,f,d){switch(h){case 16777216:case 33554432:return this._optionsService.options.drawBoldTextInBrightColors&&d&&u<8&&(u+=8),this._colors.ansi[u].rgba;case 50331648:return u<<8;case 0:default:return f?this._colors.background.rgba:this._colors.foreground.rgba}},e}();u.BaseRenderLayer=C},function(h,u,f){"use strict";function i(h,u,f){u.di$target===u?u.di$dependencies.push({id:h,index:f}):(u.di$dependencies=[{id:h,index:f}],u.di$target=u)}Object.defineProperty(u,"__esModule",{value:!0}),u.createDecorator=u.getServiceDependencies=u.serviceRegistry=void 0,u.serviceRegistry=new Map,u.getServiceDependencies=function(h){return h.di$dependencies||[]},u.createDecorator=function(h){if(u.serviceRegistry.has(h))return u.serviceRegistry.get(h);var r=function(h,u,f){if(3!==arguments.length)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");i(r,h,f)};return r.toString=function(){return h},u.serviceRegistry.set(h,r),r}},function(h,u,f){"use strict";function i(h,u,f,d){if(void 0===f&&(f=0),void 0===d&&(d=h.length),f>=h.length)return h;f=(h.length+f)%h.length,d=d>=h.length?h.length:(h.length+d)%h.length;for(var p=f;p<d;++p)h[p]=u;return h}Object.defineProperty(u,"__esModule",{value:!0}),u.concat=u.fillFallback=u.fill=void 0,u.fill=function(h,u,f,d){return h.fill?h.fill(u,f,d):i(h,u,f,d)},u.fillFallback=i,u.concat=function(h,u){var f=new h.constructor(h.length+u.length);return f.set(h),f.set(u,h.length),f}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.BufferLine=u.DEFAULT_ATTR_DATA=void 0;var d=f(8),p=f(3),v=f(4),g=f(6);u.DEFAULT_ATTR_DATA=Object.freeze(new g.AttributeData);var y=function(){function e(h,u,f){void 0===f&&(f=!1),this.isWrapped=f,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*h);for(var d=u||v.CellData.fromCharData([0,p.NULL_CELL_CHAR,p.NULL_CELL_WIDTH,p.NULL_CELL_CODE]),g=0;g<h;++g)this.setCell(g,d);this.length=h}return e.prototype.get=function(h){var u=this._data[3*h+0],f=2097151&u;return[this._data[3*h+1],2097152&u?this._combined[h]:f?d.stringFromCodePoint(f):"",u>>22,2097152&u?this._combined[h].charCodeAt(this._combined[h].length-1):f]},e.prototype.set=function(h,u){this._data[3*h+1]=u[p.CHAR_DATA_ATTR_INDEX],u[p.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[h]=u[1],this._data[3*h+0]=2097152|h|u[p.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*h+0]=u[p.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|u[p.CHAR_DATA_WIDTH_INDEX]<<22},e.prototype.getWidth=function(h){return this._data[3*h+0]>>22},e.prototype.hasWidth=function(h){return 12582912&this._data[3*h+0]},e.prototype.getFg=function(h){return this._data[3*h+1]},e.prototype.getBg=function(h){return this._data[3*h+2]},e.prototype.hasContent=function(h){return 4194303&this._data[3*h+0]},e.prototype.getCodePoint=function(h){var u=this._data[3*h+0];return 2097152&u?this._combined[h].charCodeAt(this._combined[h].length-1):2097151&u},e.prototype.isCombined=function(h){return 2097152&this._data[3*h+0]},e.prototype.getString=function(h){var u=this._data[3*h+0];return 2097152&u?this._combined[h]:2097151&u?d.stringFromCodePoint(2097151&u):""},e.prototype.loadCell=function(h,u){var f=3*h;return u.content=this._data[f+0],u.fg=this._data[f+1],u.bg=this._data[f+2],2097152&u.content&&(u.combinedData=this._combined[h]),268435456&u.bg&&(u.extended=this._extendedAttrs[h]),u},e.prototype.setCell=function(h,u){2097152&u.content&&(this._combined[h]=u.combinedData),268435456&u.bg&&(this._extendedAttrs[h]=u.extended),this._data[3*h+0]=u.content,this._data[3*h+1]=u.fg,this._data[3*h+2]=u.bg},e.prototype.setCellFromCodePoint=function(h,u,f,d,p,v){268435456&p&&(this._extendedAttrs[h]=v),this._data[3*h+0]=u|f<<22,this._data[3*h+1]=d,this._data[3*h+2]=p},e.prototype.addCodepointToCell=function(h,u){var f=this._data[3*h+0];2097152&f?this._combined[h]+=d.stringFromCodePoint(u):(2097151&f?(this._combined[h]=d.stringFromCodePoint(2097151&f)+d.stringFromCodePoint(u),f&=-2097152,f|=2097152):f=u|1<<22,this._data[3*h+0]=f)},e.prototype.insertCells=function(h,u,f,d){if((h%=this.length)&&2===this.getWidth(h-1)&&this.setCellFromCodePoint(h-1,0,1,(null==d?void 0:d.fg)||0,(null==d?void 0:d.bg)||0,(null==d?void 0:d.extended)||new g.ExtendedAttrs),u<this.length-h){for(var p=new v.CellData,y=this.length-h-u-1;y>=0;--y)this.setCell(h+u+y,this.loadCell(h+y,p));for(y=0;y<u;++y)this.setCell(h+y,f)}else for(y=h;y<this.length;++y)this.setCell(y,f);2===this.getWidth(this.length-1)&&this.setCellFromCodePoint(this.length-1,0,1,(null==d?void 0:d.fg)||0,(null==d?void 0:d.bg)||0,(null==d?void 0:d.extended)||new g.ExtendedAttrs)},e.prototype.deleteCells=function(h,u,f,d){if(h%=this.length,u<this.length-h){for(var p=new v.CellData,y=0;y<this.length-h-u;++y)this.setCell(h+y,this.loadCell(h+u+y,p));for(y=this.length-u;y<this.length;++y)this.setCell(y,f)}else for(y=h;y<this.length;++y)this.setCell(y,f);h&&2===this.getWidth(h-1)&&this.setCellFromCodePoint(h-1,0,1,(null==d?void 0:d.fg)||0,(null==d?void 0:d.bg)||0,(null==d?void 0:d.extended)||new g.ExtendedAttrs),0!==this.getWidth(h)||this.hasContent(h)||this.setCellFromCodePoint(h,0,1,(null==d?void 0:d.fg)||0,(null==d?void 0:d.bg)||0,(null==d?void 0:d.extended)||new g.ExtendedAttrs)},e.prototype.replaceCells=function(h,u,f,d){for(h&&2===this.getWidth(h-1)&&this.setCellFromCodePoint(h-1,0,1,(null==d?void 0:d.fg)||0,(null==d?void 0:d.bg)||0,(null==d?void 0:d.extended)||new g.ExtendedAttrs),u<this.length&&2===this.getWidth(u-1)&&this.setCellFromCodePoint(u,0,1,(null==d?void 0:d.fg)||0,(null==d?void 0:d.bg)||0,(null==d?void 0:d.extended)||new g.ExtendedAttrs);h<u&&h<this.length;)this.setCell(h++,f)},e.prototype.resize=function(h,u){if(h!==this.length){if(h>this.length){var f=new Uint32Array(3*h);this.length&&(3*h<this._data.length?f.set(this._data.subarray(0,3*h)):f.set(this._data)),this._data=f;for(var d=this.length;d<h;++d)this.setCell(d,u)}else if(h){(f=new Uint32Array(3*h)).set(this._data.subarray(0,3*h)),this._data=f;var p=Object.keys(this._combined);for(d=0;d<p.length;d++){var v=parseInt(p[d],10);v>=h&&delete this._combined[v]}}else this._data=new Uint32Array(0),this._combined={};this.length=h}},e.prototype.fill=function(h){this._combined={},this._extendedAttrs={};for(var u=0;u<this.length;++u)this.setCell(u,h)},e.prototype.copyFrom=function(h){for(var u in this.length!==h.length?this._data=new Uint32Array(h._data):this._data.set(h._data),this.length=h.length,this._combined={},h._combined)this._combined[u]=h._combined[u];for(var u in this._extendedAttrs={},h._extendedAttrs)this._extendedAttrs[u]=h._extendedAttrs[u];this.isWrapped=h.isWrapped},e.prototype.clone=function(){var h=new e(0);for(var u in h._data=new Uint32Array(this._data),h.length=this.length,this._combined)h._combined[u]=this._combined[u];for(var u in this._extendedAttrs)h._extendedAttrs[u]=this._extendedAttrs[u];return h.isWrapped=this.isWrapped,h},e.prototype.getTrimmedLength=function(){for(var h=this.length-1;h>=0;--h)if(4194303&this._data[3*h+0])return h+(this._data[3*h+0]>>22);return 0},e.prototype.copyCellsFrom=function(h,u,f,d,p){var v=h._data;if(p)for(var g=d-1;g>=0;g--)for(var y=0;y<3;y++)this._data[3*(f+g)+y]=v[3*(u+g)+y];else for(g=0;g<d;g++)for(y=0;y<3;y++)this._data[3*(f+g)+y]=v[3*(u+g)+y];var m=Object.keys(h._combined);for(y=0;y<m.length;y++){var C=parseInt(m[y],10);C>=u&&(this._combined[C-u+f]=h._combined[C])}},e.prototype.translateToString=function(h,u,f){void 0===h&&(h=!1),void 0===u&&(u=0),void 0===f&&(f=this.length),h&&(f=Math.min(f,this.getTrimmedLength()));for(var v="";u<f;){var g=this._data[3*u+0],y=2097151&g;v+=2097152&g?this._combined[u]:y?d.stringFromCodePoint(y):p.WHITESPACE_CELL_CHAR,u+=g>>22||1}return v},e}();u.BufferLine=y},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.tooMuchOutput=u.promptLabel=void 0,u.promptLabel="Terminal input",u.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.InputHandler=u.WindowsOptionsReportType=void 0;var v,g=f(12),y=f(19),m=f(38),C=f(2),w=f(15),E=f(8),L=f(16),A=f(0),R=f(3),k=f(4),x=f(6),D=f(21),O=f(23),T={"(":0,")":1,"*":2,"+":3,"-":1,".":2};function S(h,u){if(h>24)return u.setWinLines||!1;switch(h){case 1:return!!u.restoreWin;case 2:return!!u.minimizeWin;case 3:return!!u.setWinPosition;case 4:return!!u.setWinSizePixels;case 5:return!!u.raiseWin;case 6:return!!u.lowerWin;case 7:return!!u.refreshWin;case 8:return!!u.setWinSizeChars;case 9:return!!u.maximizeWin;case 10:return!!u.fullscreenWin;case 11:return!!u.getWinState;case 13:return!!u.getWinPosition;case 14:return!!u.getWinSizePixels;case 15:return!!u.getScreenSizePixels;case 16:return!!u.getCellSizePixels;case 18:return!!u.getWinSizeChars;case 19:return!!u.getScreenSizeChars;case 20:return!!u.getIconTitle;case 21:return!!u.getWinTitle;case 22:return!!u.pushTitle;case 23:return!!u.popTitle;case 24:return!!u.setWinLines}return!1}!function(h){h[h.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",h[h.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"}(v=u.WindowsOptionsReportType||(u.WindowsOptionsReportType={}));var M=function(){function e(h,u,f,d){this._bufferService=h,this._coreService=u,this._logService=f,this._optionsService=d,this._data=new Uint32Array(0)}return e.prototype.hook=function(h){this._data=new Uint32Array(0)},e.prototype.put=function(h,u,f){this._data=w.concat(this._data,h.subarray(u,f))},e.prototype.unhook=function(h){if(h){var u=E.utf32ToString(this._data);switch(this._data=new Uint32Array(0),u){case'"q':return this._coreService.triggerDataEvent(g.C0.ESC+'P1$r0"q'+g.C0.ESC+"\\");case'"p':return this._coreService.triggerDataEvent(g.C0.ESC+'P1$r61;1"p'+g.C0.ESC+"\\");case"r":var f=this._bufferService.buffer.scrollTop+1+";"+(this._bufferService.buffer.scrollBottom+1)+"r";return this._coreService.triggerDataEvent(g.C0.ESC+"P1$r"+f+g.C0.ESC+"\\");case"m":return this._coreService.triggerDataEvent(g.C0.ESC+"P1$r0m"+g.C0.ESC+"\\");case" q":var d={block:2,underline:4,bar:6}[this._optionsService.options.cursorStyle];return d-=this._optionsService.options.cursorBlink?1:0,this._coreService.triggerDataEvent(g.C0.ESC+"P1$r"+d+" q"+g.C0.ESC+"\\");default:this._logService.debug("Unknown DCS $q %s",u),this._coreService.triggerDataEvent(g.C0.ESC+"P0$r"+g.C0.ESC+"\\")}}else this._data=new Uint32Array(0)},e}(),P=function(h){function t(u,f,d,p,v,C,w,R,x){void 0===x&&(x=new m.EscapeSequenceParser);var O=h.call(this)||this;O._bufferService=u,O._charsetService=f,O._coreService=d,O._dirtyRowService=p,O._logService=v,O._optionsService=C,O._coreMouseService=w,O._unicodeService=R,O._parser=x,O._parseBuffer=new Uint32Array(4096),O._stringDecoder=new E.StringToUtf32,O._utf8Decoder=new E.Utf8ToUtf32,O._workCell=new k.CellData,O._windowTitle="",O._iconName="",O._windowTitleStack=[],O._iconNameStack=[],O._curAttrData=L.DEFAULT_ATTR_DATA.clone(),O._eraseAttrDataInternal=L.DEFAULT_ATTR_DATA.clone(),O._onRequestBell=new A.EventEmitter,O._onRequestRefreshRows=new A.EventEmitter,O._onRequestReset=new A.EventEmitter,O._onRequestScroll=new A.EventEmitter,O._onRequestSyncScrollBar=new A.EventEmitter,O._onRequestWindowsOptionsReport=new A.EventEmitter,O._onA11yChar=new A.EventEmitter,O._onA11yTab=new A.EventEmitter,O._onCursorMove=new A.EventEmitter,O._onLineFeed=new A.EventEmitter,O._onScroll=new A.EventEmitter,O._onTitleChange=new A.EventEmitter,O.register(O._parser),O._parser.setCsiHandlerFallback((function(h,u){O._logService.debug("Unknown CSI code: ",{identifier:O._parser.identToString(h),params:u.toArray()})})),O._parser.setEscHandlerFallback((function(h){O._logService.debug("Unknown ESC code: ",{identifier:O._parser.identToString(h)})})),O._parser.setExecuteHandlerFallback((function(h){O._logService.debug("Unknown EXECUTE code: ",{code:h})})),O._parser.setOscHandlerFallback((function(h,u,f){O._logService.debug("Unknown OSC code: ",{identifier:h,action:u,data:f})})),O._parser.setDcsHandlerFallback((function(h,u,f){"HOOK"===u&&(f=f.toArray()),O._logService.debug("Unknown DCS code: ",{identifier:O._parser.identToString(h),action:u,payload:f})})),O._parser.setPrintHandler((function(h,u,f){return O.print(h,u,f)})),O._parser.setCsiHandler({final:"@"},(function(h){return O.insertChars(h)})),O._parser.setCsiHandler({intermediates:" ",final:"@"},(function(h){return O.scrollLeft(h)})),O._parser.setCsiHandler({final:"A"},(function(h){return O.cursorUp(h)})),O._parser.setCsiHandler({intermediates:" ",final:"A"},(function(h){return O.scrollRight(h)})),O._parser.setCsiHandler({final:"B"},(function(h){return O.cursorDown(h)})),O._parser.setCsiHandler({final:"C"},(function(h){return O.cursorForward(h)})),O._parser.setCsiHandler({final:"D"},(function(h){return O.cursorBackward(h)})),O._parser.setCsiHandler({final:"E"},(function(h){return O.cursorNextLine(h)})),O._parser.setCsiHandler({final:"F"},(function(h){return O.cursorPrecedingLine(h)})),O._parser.setCsiHandler({final:"G"},(function(h){return O.cursorCharAbsolute(h)})),O._parser.setCsiHandler({final:"H"},(function(h){return O.cursorPosition(h)})),O._parser.setCsiHandler({final:"I"},(function(h){return O.cursorForwardTab(h)})),O._parser.setCsiHandler({final:"J"},(function(h){return O.eraseInDisplay(h)})),O._parser.setCsiHandler({prefix:"?",final:"J"},(function(h){return O.eraseInDisplay(h)})),O._parser.setCsiHandler({final:"K"},(function(h){return O.eraseInLine(h)})),O._parser.setCsiHandler({prefix:"?",final:"K"},(function(h){return O.eraseInLine(h)})),O._parser.setCsiHandler({final:"L"},(function(h){return O.insertLines(h)})),O._parser.setCsiHandler({final:"M"},(function(h){return O.deleteLines(h)})),O._parser.setCsiHandler({final:"P"},(function(h){return O.deleteChars(h)})),O._parser.setCsiHandler({final:"S"},(function(h){return O.scrollUp(h)})),O._parser.setCsiHandler({final:"T"},(function(h){return O.scrollDown(h)})),O._parser.setCsiHandler({final:"X"},(function(h){return O.eraseChars(h)})),O._parser.setCsiHandler({final:"Z"},(function(h){return O.cursorBackwardTab(h)})),O._parser.setCsiHandler({final:"`"},(function(h){return O.charPosAbsolute(h)})),O._parser.setCsiHandler({final:"a"},(function(h){return O.hPositionRelative(h)})),O._parser.setCsiHandler({final:"b"},(function(h){return O.repeatPrecedingCharacter(h)})),O._parser.setCsiHandler({final:"c"},(function(h){return O.sendDeviceAttributesPrimary(h)})),O._parser.setCsiHandler({prefix:">",final:"c"},(function(h){return O.sendDeviceAttributesSecondary(h)})),O._parser.setCsiHandler({final:"d"},(function(h){return O.linePosAbsolute(h)})),O._parser.setCsiHandler({final:"e"},(function(h){return O.vPositionRelative(h)})),O._parser.setCsiHandler({final:"f"},(function(h){return O.hVPosition(h)})),O._parser.setCsiHandler({final:"g"},(function(h){return O.tabClear(h)})),O._parser.setCsiHandler({final:"h"},(function(h){return O.setMode(h)})),O._parser.setCsiHandler({prefix:"?",final:"h"},(function(h){return O.setModePrivate(h)})),O._parser.setCsiHandler({final:"l"},(function(h){return O.resetMode(h)})),O._parser.setCsiHandler({prefix:"?",final:"l"},(function(h){return O.resetModePrivate(h)})),O._parser.setCsiHandler({final:"m"},(function(h){return O.charAttributes(h)})),O._parser.setCsiHandler({final:"n"},(function(h){return O.deviceStatus(h)})),O._parser.setCsiHandler({prefix:"?",final:"n"},(function(h){return O.deviceStatusPrivate(h)})),O._parser.setCsiHandler({intermediates:"!",final:"p"},(function(h){return O.softReset(h)})),O._parser.setCsiHandler({intermediates:" ",final:"q"},(function(h){return O.setCursorStyle(h)})),O._parser.setCsiHandler({final:"r"},(function(h){return O.setScrollRegion(h)})),O._parser.setCsiHandler({final:"s"},(function(h){return O.saveCursor(h)})),O._parser.setCsiHandler({final:"t"},(function(h){return O.windowOptions(h)})),O._parser.setCsiHandler({final:"u"},(function(h){return O.restoreCursor(h)})),O._parser.setCsiHandler({intermediates:"'",final:"}"},(function(h){return O.insertColumns(h)})),O._parser.setCsiHandler({intermediates:"'",final:"~"},(function(h){return O.deleteColumns(h)})),O._parser.setExecuteHandler(g.C0.BEL,(function(){return O.bell()})),O._parser.setExecuteHandler(g.C0.LF,(function(){return O.lineFeed()})),O._parser.setExecuteHandler(g.C0.VT,(function(){return O.lineFeed()})),O._parser.setExecuteHandler(g.C0.FF,(function(){return O.lineFeed()})),O._parser.setExecuteHandler(g.C0.CR,(function(){return O.carriageReturn()})),O._parser.setExecuteHandler(g.C0.BS,(function(){return O.backspace()})),O._parser.setExecuteHandler(g.C0.HT,(function(){return O.tab()})),O._parser.setExecuteHandler(g.C0.SO,(function(){return O.shiftOut()})),O._parser.setExecuteHandler(g.C0.SI,(function(){return O.shiftIn()})),O._parser.setExecuteHandler(g.C1.IND,(function(){return O.index()})),O._parser.setExecuteHandler(g.C1.NEL,(function(){return O.nextLine()})),O._parser.setExecuteHandler(g.C1.HTS,(function(){return O.tabSet()})),O._parser.setOscHandler(0,new D.OscHandler((function(h){O.setTitle(h),O.setIconName(h)}))),O._parser.setOscHandler(1,new D.OscHandler((function(h){return O.setIconName(h)}))),O._parser.setOscHandler(2,new D.OscHandler((function(h){return O.setTitle(h)}))),O._parser.setEscHandler({final:"7"},(function(){return O.saveCursor()})),O._parser.setEscHandler({final:"8"},(function(){return O.restoreCursor()})),O._parser.setEscHandler({final:"D"},(function(){return O.index()})),O._parser.setEscHandler({final:"E"},(function(){return O.nextLine()})),O._parser.setEscHandler({final:"H"},(function(){return O.tabSet()})),O._parser.setEscHandler({final:"M"},(function(){return O.reverseIndex()})),O._parser.setEscHandler({final:"="},(function(){return O.keypadApplicationMode()})),O._parser.setEscHandler({final:">"},(function(){return O.keypadNumericMode()})),O._parser.setEscHandler({final:"c"},(function(){return O.fullReset()})),O._parser.setEscHandler({final:"n"},(function(){return O.setgLevel(2)})),O._parser.setEscHandler({final:"o"},(function(){return O.setgLevel(3)})),O._parser.setEscHandler({final:"|"},(function(){return O.setgLevel(3)})),O._parser.setEscHandler({final:"}"},(function(){return O.setgLevel(2)})),O._parser.setEscHandler({final:"~"},(function(){return O.setgLevel(1)})),O._parser.setEscHandler({intermediates:"%",final:"@"},(function(){return O.selectDefaultCharset()})),O._parser.setEscHandler({intermediates:"%",final:"G"},(function(){return O.selectDefaultCharset()}));var b=function(h){T._parser.setEscHandler({intermediates:"(",final:h},(function(){return O.selectCharset("("+h)})),T._parser.setEscHandler({intermediates:")",final:h},(function(){return O.selectCharset(")"+h)})),T._parser.setEscHandler({intermediates:"*",final:h},(function(){return O.selectCharset("*"+h)})),T._parser.setEscHandler({intermediates:"+",final:h},(function(){return O.selectCharset("+"+h)})),T._parser.setEscHandler({intermediates:"-",final:h},(function(){return O.selectCharset("-"+h)})),T._parser.setEscHandler({intermediates:".",final:h},(function(){return O.selectCharset("."+h)})),T._parser.setEscHandler({intermediates:"/",final:h},(function(){return O.selectCharset("/"+h)}))},T=this;for(var P in y.CHARSETS)b(P);return O._parser.setEscHandler({intermediates:"#",final:"8"},(function(){return O.screenAlignmentPattern()})),O._parser.setErrorHandler((function(h){return O._logService.error("Parsing error: ",h),h})),O._parser.setDcsHandler({intermediates:"$",final:"q"},new M(O._bufferService,O._coreService,O._logService,O._optionsService)),O}return p(t,h),Object.defineProperty(t.prototype,"onRequestBell",{get:function(){return this._onRequestBell.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRefreshRows",{get:function(){return this._onRequestRefreshRows.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestReset",{get:function(){return this._onRequestReset.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScroll",{get:function(){return this._onRequestScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestSyncScrollBar",{get:function(){return this._onRequestSyncScrollBar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestWindowsOptionsReport",{get:function(){return this._onRequestWindowsOptionsReport.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yChar.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTab.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){h.prototype.dispose.call(this)},t.prototype.parse=function(h){var u=this._bufferService.buffer,f=u.x,d=u.y;if(this._logService.debug("parsing data",h),this._parseBuffer.length<h.length&&this._parseBuffer.length<131072&&(this._parseBuffer=new Uint32Array(Math.min(h.length,131072))),this._dirtyRowService.clearRange(),h.length>131072)for(var p=0;p<h.length;p+=131072){var v=p+131072<h.length?p+131072:h.length,g="string"==typeof h?this._stringDecoder.decode(h.substring(p,v),this._parseBuffer):this._utf8Decoder.decode(h.subarray(p,v),this._parseBuffer);this._parser.parse(this._parseBuffer,g)}else g="string"==typeof h?this._stringDecoder.decode(h,this._parseBuffer):this._utf8Decoder.decode(h,this._parseBuffer),this._parser.parse(this._parseBuffer,g);(u=this._bufferService.buffer).x===f&&u.y===d||this._onCursorMove.fire(),this._onRequestRefreshRows.fire(this._dirtyRowService.start,this._dirtyRowService.end)},t.prototype.print=function(h,u,f){var d,p,v=this._bufferService.buffer,g=this._charsetService.charset,y=this._optionsService.options.screenReaderMode,m=this._bufferService.cols,C=this._coreService.decPrivateModes.wraparound,w=this._coreService.modes.insertMode,L=this._curAttrData,A=v.lines.get(v.ybase+v.y);this._dirtyRowService.markDirty(v.y),v.x&&f-u>0&&2===A.getWidth(v.x-1)&&A.setCellFromCodePoint(v.x-1,0,1,L.fg,L.bg,L.extended);for(var k=u;k<f;++k){if(d=h[k],p=this._unicodeService.wcwidth(d),d<127&&g){var x=g[String.fromCharCode(d)];x&&(d=x.charCodeAt(0))}if(y&&this._onA11yChar.fire(E.stringFromCodePoint(d)),p||!v.x){if(v.x+p-1>=m)if(C){for(;v.x<m;)A.setCellFromCodePoint(v.x++,0,1,L.fg,L.bg,L.extended);v.x=0,v.y++,v.y===v.scrollBottom+1?(v.y--,this._onRequestScroll.fire(this._eraseAttrData(),!0)):(v.y>=this._bufferService.rows&&(v.y=this._bufferService.rows-1),v.lines.get(v.ybase+v.y).isWrapped=!0),A=v.lines.get(v.ybase+v.y)}else if(v.x=m-1,2===p)continue;if(w&&(A.insertCells(v.x,p,v.getNullCell(L),L),2===A.getWidth(m-1)&&A.setCellFromCodePoint(m-1,R.NULL_CELL_CODE,R.NULL_CELL_WIDTH,L.fg,L.bg,L.extended)),A.setCellFromCodePoint(v.x++,d,p,L.fg,L.bg,L.extended),p>0)for(;--p;)A.setCellFromCodePoint(v.x++,0,0,L.fg,L.bg,L.extended)}else A.getWidth(v.x-1)?A.addCodepointToCell(v.x-1,d):A.addCodepointToCell(v.x-2,d)}f-u>0&&(A.loadCell(v.x-1,this._workCell),2===this._workCell.getWidth()||this._workCell.getCode()>65535?this._parser.precedingCodepoint=0:this._workCell.isCombined()?this._parser.precedingCodepoint=this._workCell.getChars().charCodeAt(0):this._parser.precedingCodepoint=this._workCell.content),v.x<m&&f-u>0&&0===A.getWidth(v.x)&&!A.hasContent(v.x)&&A.setCellFromCodePoint(v.x,0,1,L.fg,L.bg,L.extended),this._dirtyRowService.markDirty(v.y)},t.prototype.addCsiHandler=function(h,u){var f=this;return"t"!==h.final||h.prefix||h.intermediates?this._parser.addCsiHandler(h,u):this._parser.addCsiHandler(h,(function(h){return!S(h.params[0],f._optionsService.options.windowOptions)||u(h)}))},t.prototype.addDcsHandler=function(h,u){return this._parser.addDcsHandler(h,new O.DcsHandler(u))},t.prototype.addEscHandler=function(h,u){return this._parser.addEscHandler(h,u)},t.prototype.addOscHandler=function(h,u){return this._parser.addOscHandler(h,new D.OscHandler(u))},t.prototype.bell=function(){this._onRequestBell.fire()},t.prototype.lineFeed=function(){var h=this._bufferService.buffer;this._dirtyRowService.markDirty(h.y),this._optionsService.options.convertEol&&(h.x=0),h.y++,h.y===h.scrollBottom+1?(h.y--,this._onRequestScroll.fire(this._eraseAttrData())):h.y>=this._bufferService.rows&&(h.y=this._bufferService.rows-1),h.x>=this._bufferService.cols&&h.x--,this._dirtyRowService.markDirty(h.y),this._onLineFeed.fire()},t.prototype.carriageReturn=function(){this._bufferService.buffer.x=0},t.prototype.backspace=function(){var h,u=this._bufferService.buffer;if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),void(u.x>0&&u.x--);if(this._restrictCursor(this._bufferService.cols),u.x>0)u.x--;else if(0===u.x&&u.y>u.scrollTop&&u.y<=u.scrollBottom&&(null===(h=u.lines.get(u.ybase+u.y))||void 0===h?void 0:h.isWrapped)){u.lines.get(u.ybase+u.y).isWrapped=!1,u.y--,u.x=this._bufferService.cols-1;var f=u.lines.get(u.ybase+u.y);f.hasWidth(u.x)&&!f.hasContent(u.x)&&u.x--}this._restrictCursor()},t.prototype.tab=function(){if(!(this._bufferService.buffer.x>=this._bufferService.cols)){var h=this._bufferService.buffer.x;this._bufferService.buffer.x=this._bufferService.buffer.nextStop(),this._optionsService.options.screenReaderMode&&this._onA11yTab.fire(this._bufferService.buffer.x-h)}},t.prototype.shiftOut=function(){this._charsetService.setgLevel(1)},t.prototype.shiftIn=function(){this._charsetService.setgLevel(0)},t.prototype._restrictCursor=function(h){void 0===h&&(h=this._bufferService.cols-1),this._bufferService.buffer.x=Math.min(h,Math.max(0,this._bufferService.buffer.x)),this._bufferService.buffer.y=this._coreService.decPrivateModes.origin?Math.min(this._bufferService.buffer.scrollBottom,Math.max(this._bufferService.buffer.scrollTop,this._bufferService.buffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._bufferService.buffer.y)),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype._setCursor=function(h,u){this._dirtyRowService.markDirty(this._bufferService.buffer.y),this._coreService.decPrivateModes.origin?(this._bufferService.buffer.x=h,this._bufferService.buffer.y=this._bufferService.buffer.scrollTop+u):(this._bufferService.buffer.x=h,this._bufferService.buffer.y=u),this._restrictCursor(),this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype._moveCursor=function(h,u){this._restrictCursor(),this._setCursor(this._bufferService.buffer.x+h,this._bufferService.buffer.y+u)},t.prototype.cursorUp=function(h){var u=this._bufferService.buffer.y-this._bufferService.buffer.scrollTop;u>=0?this._moveCursor(0,-Math.min(u,h.params[0]||1)):this._moveCursor(0,-(h.params[0]||1))},t.prototype.cursorDown=function(h){var u=this._bufferService.buffer.scrollBottom-this._bufferService.buffer.y;u>=0?this._moveCursor(0,Math.min(u,h.params[0]||1)):this._moveCursor(0,h.params[0]||1)},t.prototype.cursorForward=function(h){this._moveCursor(h.params[0]||1,0)},t.prototype.cursorBackward=function(h){this._moveCursor(-(h.params[0]||1),0)},t.prototype.cursorNextLine=function(h){this.cursorDown(h),this._bufferService.buffer.x=0},t.prototype.cursorPrecedingLine=function(h){this.cursorUp(h),this._bufferService.buffer.x=0},t.prototype.cursorCharAbsolute=function(h){this._setCursor((h.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.cursorPosition=function(h){this._setCursor(h.length>=2?(h.params[1]||1)-1:0,(h.params[0]||1)-1)},t.prototype.charPosAbsolute=function(h){this._setCursor((h.params[0]||1)-1,this._bufferService.buffer.y)},t.prototype.hPositionRelative=function(h){this._moveCursor(h.params[0]||1,0)},t.prototype.linePosAbsolute=function(h){this._setCursor(this._bufferService.buffer.x,(h.params[0]||1)-1)},t.prototype.vPositionRelative=function(h){this._moveCursor(0,h.params[0]||1)},t.prototype.hVPosition=function(h){this.cursorPosition(h)},t.prototype.tabClear=function(h){var u=h.params[0];0===u?delete this._bufferService.buffer.tabs[this._bufferService.buffer.x]:3===u&&(this._bufferService.buffer.tabs={})},t.prototype.cursorForwardTab=function(h){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var u=h.params[0]||1;u--;)this._bufferService.buffer.x=this._bufferService.buffer.nextStop()},t.prototype.cursorBackwardTab=function(h){if(!(this._bufferService.buffer.x>=this._bufferService.cols))for(var u=h.params[0]||1,f=this._bufferService.buffer;u--;)f.x=f.prevStop()},t.prototype._eraseInBufferLine=function(h,u,f,d){void 0===d&&(d=!1);var p=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+h);p.replaceCells(u,f,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),d&&(p.isWrapped=!1)},t.prototype._resetBufferLine=function(h){var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+h);u.fill(this._bufferService.buffer.getNullCell(this._eraseAttrData())),u.isWrapped=!1},t.prototype.eraseInDisplay=function(h){var u;switch(this._restrictCursor(),h.params[0]){case 0:for(u=this._bufferService.buffer.y,this._dirtyRowService.markDirty(u),this._eraseInBufferLine(u++,this._bufferService.buffer.x,this._bufferService.cols,0===this._bufferService.buffer.x);u<this._bufferService.rows;u++)this._resetBufferLine(u);this._dirtyRowService.markDirty(u);break;case 1:for(u=this._bufferService.buffer.y,this._dirtyRowService.markDirty(u),this._eraseInBufferLine(u,0,this._bufferService.buffer.x+1,!0),this._bufferService.buffer.x+1>=this._bufferService.cols&&(this._bufferService.buffer.lines.get(u+1).isWrapped=!1);u--;)this._resetBufferLine(u);this._dirtyRowService.markDirty(0);break;case 2:for(u=this._bufferService.rows,this._dirtyRowService.markDirty(u-1);u--;)this._resetBufferLine(u);this._dirtyRowService.markDirty(0);break;case 3:var f=this._bufferService.buffer.lines.length-this._bufferService.rows;f>0&&(this._bufferService.buffer.lines.trimStart(f),this._bufferService.buffer.ybase=Math.max(this._bufferService.buffer.ybase-f,0),this._bufferService.buffer.ydisp=Math.max(this._bufferService.buffer.ydisp-f,0),this._onScroll.fire(0))}},t.prototype.eraseInLine=function(h){switch(this._restrictCursor(),h.params[0]){case 0:this._eraseInBufferLine(this._bufferService.buffer.y,this._bufferService.buffer.x,this._bufferService.cols);break;case 1:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.buffer.x+1);break;case 2:this._eraseInBufferLine(this._bufferService.buffer.y,0,this._bufferService.cols)}this._dirtyRowService.markDirty(this._bufferService.buffer.y)},t.prototype.insertLines=function(h){this._restrictCursor();var u=h.params[0]||1,f=this._bufferService.buffer;if(!(f.y>f.scrollBottom||f.y<f.scrollTop)){for(var d=f.ybase+f.y,p=this._bufferService.rows-1-f.scrollBottom,v=this._bufferService.rows-1+f.ybase-p+1;u--;)f.lines.splice(v-1,1),f.lines.splice(d,0,f.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(f.y,f.scrollBottom),f.x=0}},t.prototype.deleteLines=function(h){this._restrictCursor();var u=h.params[0]||1,f=this._bufferService.buffer;if(!(f.y>f.scrollBottom||f.y<f.scrollTop)){var d,p=f.ybase+f.y;for(d=this._bufferService.rows-1-f.scrollBottom,d=this._bufferService.rows-1+f.ybase-d;u--;)f.lines.splice(p,1),f.lines.splice(d,0,f.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(f.y,f.scrollBottom),f.x=0}},t.prototype.insertChars=function(h){this._restrictCursor();var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);u&&(u.insertCells(this._bufferService.buffer.x,h.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.deleteChars=function(h){this._restrictCursor();var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);u&&(u.deleteCells(this._bufferService.buffer.x,h.params[0]||1,this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.scrollUp=function(h){for(var u=h.params[0]||1,f=this._bufferService.buffer;u--;)f.lines.splice(f.ybase+f.scrollTop,1),f.lines.splice(f.ybase+f.scrollBottom,0,f.getBlankLine(this._eraseAttrData()));this._dirtyRowService.markRangeDirty(f.scrollTop,f.scrollBottom)},t.prototype.scrollDown=function(h){for(var u=h.params[0]||1,f=this._bufferService.buffer;u--;)f.lines.splice(f.ybase+f.scrollBottom,1),f.lines.splice(f.ybase+f.scrollTop,0,f.getBlankLine(L.DEFAULT_ATTR_DATA));this._dirtyRowService.markRangeDirty(f.scrollTop,f.scrollBottom)},t.prototype.scrollLeft=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var f=h.params[0]||1,d=u.scrollTop;d<=u.scrollBottom;++d){var p=u.lines.get(u.ybase+d);p.deleteCells(0,f,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),p.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.scrollRight=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var f=h.params[0]||1,d=u.scrollTop;d<=u.scrollBottom;++d){var p=u.lines.get(u.ybase+d);p.insertCells(0,f,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),p.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.insertColumns=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var f=h.params[0]||1,d=u.scrollTop;d<=u.scrollBottom;++d){var p=this._bufferService.buffer.lines.get(u.ybase+d);p.insertCells(u.x,f,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),p.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.deleteColumns=function(h){var u=this._bufferService.buffer;if(!(u.y>u.scrollBottom||u.y<u.scrollTop)){for(var f=h.params[0]||1,d=u.scrollTop;d<=u.scrollBottom;++d){var p=u.lines.get(u.ybase+d);p.deleteCells(u.x,f,u.getNullCell(this._eraseAttrData()),this._eraseAttrData()),p.isWrapped=!1}this._dirtyRowService.markRangeDirty(u.scrollTop,u.scrollBottom)}},t.prototype.eraseChars=function(h){this._restrictCursor();var u=this._bufferService.buffer.lines.get(this._bufferService.buffer.ybase+this._bufferService.buffer.y);u&&(u.replaceCells(this._bufferService.buffer.x,this._bufferService.buffer.x+(h.params[0]||1),this._bufferService.buffer.getNullCell(this._eraseAttrData()),this._eraseAttrData()),this._dirtyRowService.markDirty(this._bufferService.buffer.y))},t.prototype.repeatPrecedingCharacter=function(h){if(this._parser.precedingCodepoint){for(var u=h.params[0]||1,f=new Uint32Array(u),d=0;d<u;++d)f[d]=this._parser.precedingCodepoint;this.print(f,0,f.length)}},t.prototype.sendDeviceAttributesPrimary=function(h){h.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(g.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(g.C0.ESC+"[?6c"))},t.prototype.sendDeviceAttributesSecondary=function(h){h.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(g.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(g.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(h.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(g.C0.ESC+"[>83;40003;0c"))},t.prototype._is=function(h){return 0===(this._optionsService.options.termName+"").indexOf(h)},t.prototype.setMode=function(h){for(var u=0;u<h.length;u++)switch(h.params[u]){case 4:this._coreService.modes.insertMode=!0}},t.prototype.setModePrivate=function(h){for(var u=0;u<h.length;u++)switch(h.params[u]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,y.DEFAULT_CHARSET),this._charsetService.setgCharset(1,y.DEFAULT_CHARSET),this._charsetService.setgCharset(2,y.DEFAULT_CHARSET),this._charsetService.setgCharset(3,y.DEFAULT_CHARSET);break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0;break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}},t.prototype.resetMode=function(h){for(var u=0;u<h.length;u++)switch(h.params[u]){case 4:this._coreService.modes.insertMode=!1}},t.prototype.resetModePrivate=function(h){for(var u=0;u<h.length;u++)switch(h.params[u]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.options.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),1049===h.params[u]&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}},t.prototype._updateAttrColor=function(h,u,f,d,p){return 2===u?(h|=50331648,h&=-16777216,h|=x.AttributeData.fromColorRGB([f,d,p])):5===u&&(h&=-50331904,h|=33554432|255&f),h},t.prototype._extractColor=function(h,u,f){var d=[0,0,-1,0,0,0],p=0,v=0;do{if(d[v+p]=h.params[u+v],h.hasSubParams(u+v)){var g=h.getSubParams(u+v),y=0;do{5===d[1]&&(p=1),d[v+y+1+p]=g[y]}while(++y<g.length&&y+v+1+p<d.length);break}if(5===d[1]&&v+p>=2||2===d[1]&&v+p>=5)break;d[1]&&(p=1)}while(++v+u<h.length&&v+p<d.length);for(y=2;y<d.length;++y)-1===d[y]&&(d[y]=0);switch(d[0]){case 38:f.fg=this._updateAttrColor(f.fg,d[1],d[3],d[4],d[5]);break;case 48:f.bg=this._updateAttrColor(f.bg,d[1],d[3],d[4],d[5]);break;case 58:f.extended=f.extended.clone(),f.extended.underlineColor=this._updateAttrColor(f.extended.underlineColor,d[1],d[3],d[4],d[5])}return v},t.prototype._processUnderline=function(h,u){u.extended=u.extended.clone(),(!~h||h>5)&&(h=1),u.extended.underlineStyle=h,u.fg|=268435456,0===h&&(u.fg&=-268435457),u.updateExtended()},t.prototype.charAttributes=function(h){if(1===h.length&&0===h.params[0])return this._curAttrData.fg=L.DEFAULT_ATTR_DATA.fg,void(this._curAttrData.bg=L.DEFAULT_ATTR_DATA.bg);for(var u,f=h.length,d=this._curAttrData,p=0;p<f;p++)(u=h.params[p])>=30&&u<=37?(d.fg&=-50331904,d.fg|=16777216|u-30):u>=40&&u<=47?(d.bg&=-50331904,d.bg|=16777216|u-40):u>=90&&u<=97?(d.fg&=-50331904,d.fg|=16777224|u-90):u>=100&&u<=107?(d.bg&=-50331904,d.bg|=16777224|u-100):0===u?(d.fg=L.DEFAULT_ATTR_DATA.fg,d.bg=L.DEFAULT_ATTR_DATA.bg):1===u?d.fg|=134217728:3===u?d.bg|=67108864:4===u?(d.fg|=268435456,this._processUnderline(h.hasSubParams(p)?h.getSubParams(p)[0]:1,d)):5===u?d.fg|=536870912:7===u?d.fg|=67108864:8===u?d.fg|=1073741824:2===u?d.bg|=134217728:21===u?this._processUnderline(2,d):22===u?(d.fg&=-134217729,d.bg&=-134217729):23===u?d.bg&=-67108865:24===u?d.fg&=-268435457:25===u?d.fg&=-536870913:27===u?d.fg&=-67108865:28===u?d.fg&=-1073741825:39===u?(d.fg&=-67108864,d.fg|=16777215&L.DEFAULT_ATTR_DATA.fg):49===u?(d.bg&=-67108864,d.bg|=16777215&L.DEFAULT_ATTR_DATA.bg):38===u||48===u||58===u?p+=this._extractColor(h,p,d):59===u?(d.extended=d.extended.clone(),d.extended.underlineColor=-1,d.updateExtended()):100===u?(d.fg&=-67108864,d.fg|=16777215&L.DEFAULT_ATTR_DATA.fg,d.bg&=-67108864,d.bg|=16777215&L.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",u)},t.prototype.deviceStatus=function(h){switch(h.params[0]){case 5:this._coreService.triggerDataEvent(g.C0.ESC+"[0n");break;case 6:var u=this._bufferService.buffer.y+1,f=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(g.C0.ESC+"["+u+";"+f+"R")}},t.prototype.deviceStatusPrivate=function(h){switch(h.params[0]){case 6:var u=this._bufferService.buffer.y+1,f=this._bufferService.buffer.x+1;this._coreService.triggerDataEvent(g.C0.ESC+"[?"+u+";"+f+"R")}},t.prototype.softReset=function(h){this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._bufferService.buffer.scrollTop=0,this._bufferService.buffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=L.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._bufferService.buffer.savedX=0,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1},t.prototype.setCursorStyle=function(h){var u=h.params[0]||1;switch(u){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}var f=u%2==1;this._optionsService.options.cursorBlink=f},t.prototype.setScrollRegion=function(h){var u,f=h.params[0]||1;(h.length<2||(u=h.params[1])>this._bufferService.rows||0===u)&&(u=this._bufferService.rows),u>f&&(this._bufferService.buffer.scrollTop=f-1,this._bufferService.buffer.scrollBottom=u-1,this._setCursor(0,0))},t.prototype.windowOptions=function(h){if(S(h.params[0],this._optionsService.options.windowOptions)){var u=h.length>1?h.params[1]:0;switch(h.params[0]){case 14:2!==u&&this._onRequestWindowsOptionsReport.fire(v.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(v.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(g.C0.ESC+"[8;"+this._bufferService.rows+";"+this._bufferService.cols+"t");break;case 22:0!==u&&2!==u||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),0!==u&&1!==u||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:0!==u&&2!==u||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),0!==u&&1!==u||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}}},t.prototype.saveCursor=function(h){this._bufferService.buffer.savedX=this._bufferService.buffer.x,this._bufferService.buffer.savedY=this._bufferService.buffer.ybase+this._bufferService.buffer.y,this._bufferService.buffer.savedCurAttrData.fg=this._curAttrData.fg,this._bufferService.buffer.savedCurAttrData.bg=this._curAttrData.bg,this._bufferService.buffer.savedCharset=this._charsetService.charset},t.prototype.restoreCursor=function(h){this._bufferService.buffer.x=this._bufferService.buffer.savedX||0,this._bufferService.buffer.y=Math.max(this._bufferService.buffer.savedY-this._bufferService.buffer.ybase,0),this._curAttrData.fg=this._bufferService.buffer.savedCurAttrData.fg,this._curAttrData.bg=this._bufferService.buffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._bufferService.buffer.savedCharset&&(this._charsetService.charset=this._bufferService.buffer.savedCharset),this._restrictCursor()},t.prototype.setTitle=function(h){this._windowTitle=h,this._onTitleChange.fire(h)},t.prototype.setIconName=function(h){this._iconName=h},t.prototype.nextLine=function(){this._bufferService.buffer.x=0,this.index()},t.prototype.keypadApplicationMode=function(){this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire()},t.prototype.keypadNumericMode=function(){this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire()},t.prototype.selectDefaultCharset=function(){this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,y.DEFAULT_CHARSET)},t.prototype.selectCharset=function(h){2===h.length?"/"!==h[0]&&this._charsetService.setgCharset(T[h[0]],y.CHARSETS[h[1]]||y.DEFAULT_CHARSET):this.selectDefaultCharset()},t.prototype.index=function(){this._restrictCursor();var h=this._bufferService.buffer;this._bufferService.buffer.y++,h.y===h.scrollBottom+1?(h.y--,this._onRequestScroll.fire(this._eraseAttrData())):h.y>=this._bufferService.rows&&(h.y=this._bufferService.rows-1),this._restrictCursor()},t.prototype.tabSet=function(){this._bufferService.buffer.tabs[this._bufferService.buffer.x]=!0},t.prototype.reverseIndex=function(){this._restrictCursor();var h=this._bufferService.buffer;if(h.y===h.scrollTop){var u=h.scrollBottom-h.scrollTop;h.lines.shiftElements(h.ybase+h.y,u,1),h.lines.set(h.ybase+h.y,h.getBlankLine(this._eraseAttrData())),this._dirtyRowService.markRangeDirty(h.scrollTop,h.scrollBottom)}else h.y--,this._restrictCursor()},t.prototype.fullReset=function(){this._parser.reset(),this._onRequestReset.fire()},t.prototype.reset=function(){this._curAttrData=L.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=L.DEFAULT_ATTR_DATA.clone()},t.prototype._eraseAttrData=function(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal},t.prototype.setgLevel=function(h){this._charsetService.setgLevel(h)},t.prototype.screenAlignmentPattern=function(){var h=new k.CellData;h.content=1<<22|"E".charCodeAt(0),h.fg=this._curAttrData.fg,h.bg=this._curAttrData.bg;var u=this._bufferService.buffer;this._setCursor(0,0);for(var f=0;f<this._bufferService.rows;++f){var d=u.ybase+u.y+f,p=u.lines.get(d);p&&(p.fill(h),p.isWrapped=!1)}this._dirtyRowService.markAllDirty(),this._setCursor(0,0)},t}(C.Disposable);u.InputHandler=P},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.DEFAULT_CHARSET=u.CHARSETS=void 0,u.CHARSETS={},u.DEFAULT_CHARSET=u.CHARSETS.B,u.CHARSETS[0]={"`":"‚óÜ",a:"‚ñí",b:"‚êâ",c:"‚êå",d:"‚êç",e:"‚êä",f:"¬∞",g:"¬±",h:"‚ê§",i:"‚êã",j:"‚îò",k:"‚îê",l:"‚îå",m:"‚îî",n:"‚îº",o:"‚é∫",p:"‚éª",q:"‚îÄ",r:"‚éº",s:"‚éΩ",t:"‚îú",u:"‚î§",v:"‚î¥",w:"‚î¨",x:"‚îÇ",y:"‚â§",z:"‚â•","{":"œÄ","|":"‚â†","}":"¬£","~":"¬∑"},u.CHARSETS.A={"#":"¬£"},u.CHARSETS.B=void 0,u.CHARSETS[4]={"#":"¬£","@":"¬æ","[":"ij","\\":"¬Ω","]":"|","{":"¬®","|":"f","}":"¬º","~":"¬¥"},u.CHARSETS.C=u.CHARSETS[5]={"[":"√Ñ","\\":"√ñ","]":"√Ö","^":"√ú","`":"√©","{":"√§","|":"√∂","}":"√•","~":"√º"},u.CHARSETS.R={"#":"¬£","@":"√†","[":"¬∞","\\":"√ß","]":"¬ß","{":"√©","|":"√π","}":"√®","~":"¬®"},u.CHARSETS.Q={"@":"√†","[":"√¢","\\":"√ß","]":"√™","^":"√Æ","`":"√¥","{":"√©","|":"√π","}":"√®","~":"√ª"},u.CHARSETS.K={"@":"¬ß","[":"√Ñ","\\":"√ñ","]":"√ú","{":"√§","|":"√∂","}":"√º","~":"√ü"},u.CHARSETS.Y={"#":"¬£","@":"¬ß","[":"¬∞","\\":"√ß","]":"√©","`":"√π","{":"√†","|":"√≤","}":"√®","~":"√¨"},u.CHARSETS.E=u.CHARSETS[6]={"@":"√Ñ","[":"√Ü","\\":"√ò","]":"√Ö","^":"√ú","`":"√§","{":"√¶","|":"√∏","}":"√•","~":"√º"},u.CHARSETS.Z={"#":"¬£","@":"¬ß","[":"¬°","\\":"√ë","]":"¬ø","{":"¬∞","|":"√±","}":"√ß"},u.CHARSETS.H=u.CHARSETS[7]={"@":"√â","[":"√Ñ","\\":"√ñ","]":"√Ö","^":"√ú","`":"√©","{":"√§","|":"√∂","}":"√•","~":"√º"},u.CHARSETS["="]={"#":"√π","@":"√†","[":"√©","\\":"√ß","]":"√™","^":"√Æ",_:"√®","`":"√¥","{":"√§","|":"√∂","}":"√º","~":"√ª"}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.Params=void 0;var d=function(){function e(h,u){if(void 0===h&&(h=32),void 0===u&&(u=32),this.maxLength=h,this.maxSubParamsLength=u,u>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(h),this.length=0,this._subParams=new Int32Array(u),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(h),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}return e.fromArray=function(h){var u=new e;if(!h.length)return u;for(var f=h[0]instanceof Array?1:0;f<h.length;++f){var d=h[f];if(d instanceof Array)for(var p=0;p<d.length;++p)u.addSubParam(d[p]);else u.addParam(d)}return u},e.prototype.clone=function(){var h=new e(this.maxLength,this.maxSubParamsLength);return h.params.set(this.params),h.length=this.length,h._subParams.set(this._subParams),h._subParamsLength=this._subParamsLength,h._subParamsIdx.set(this._subParamsIdx),h._rejectDigits=this._rejectDigits,h._rejectSubDigits=this._rejectSubDigits,h._digitIsSub=this._digitIsSub,h},e.prototype.toArray=function(){for(var h=[],u=0;u<this.length;++u){h.push(this.params[u]);var f=this._subParamsIdx[u]>>8,d=255&this._subParamsIdx[u];d-f>0&&h.push(Array.prototype.slice.call(this._subParams,f,d))}return h},e.prototype.reset=function(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1},e.prototype.addParam=function(h){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=h>2147483647?2147483647:h}},e.prototype.addSubParam=function(h){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(h<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=h>2147483647?2147483647:h,this._subParamsIdx[this.length-1]++}},e.prototype.hasSubParams=function(h){return(255&this._subParamsIdx[h])-(this._subParamsIdx[h]>>8)>0},e.prototype.getSubParams=function(h){var u=this._subParamsIdx[h]>>8,f=255&this._subParamsIdx[h];return f-u>0?this._subParams.subarray(u,f):null},e.prototype.getSubParamsAll=function(){for(var h={},u=0;u<this.length;++u){var f=this._subParamsIdx[u]>>8,d=255&this._subParamsIdx[u];d-f>0&&(h[u]=this._subParams.slice(f,d))}return h},e.prototype.addDigit=function(h){var u;if(!(this._rejectDigits||!(u=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)){var f=this._digitIsSub?this._subParams:this.params,d=f[u-1];f[u-1]=~d?Math.min(10*d+h,2147483647):h}},e}();u.Params=d},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.OscHandler=u.OscParser=void 0;var d=f(22),p=f(8),v=function(){function e(){this._state=0,this._id=-1,this._handlers=Object.create(null),this._handlerFb=function(){}}return e.prototype.addHandler=function(h,u){void 0===this._handlers[h]&&(this._handlers[h]=[]);var f=this._handlers[h];return f.push(u),{dispose:function(){var h=f.indexOf(u);-1!==h&&f.splice(h,1)}}},e.prototype.setHandler=function(h,u){this._handlers[h]=[u]},e.prototype.clearHandler=function(h){this._handlers[h]&&delete this._handlers[h]},e.prototype.setHandlerFallback=function(h){this._handlerFb=h},e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.reset=function(){2===this._state&&this.end(!1),this._id=-1,this._state=0},e.prototype._start=function(){var h=this._handlers[this._id];if(h)for(var u=h.length-1;u>=0;u--)h[u].start();else this._handlerFb(this._id,"START")},e.prototype._put=function(h,u,f){var d=this._handlers[this._id];if(d)for(var v=d.length-1;v>=0;v--)d[v].put(h,u,f);else this._handlerFb(this._id,"PUT",p.utf32ToString(h,u,f))},e.prototype._end=function(h){var u=this._handlers[this._id];if(u){for(var f=u.length-1;f>=0&&!1===u[f].end(h);f--);for(f--;f>=0;f--)u[f].end(!1)}else this._handlerFb(this._id,"END",h)},e.prototype.start=function(){this.reset(),this._id=-1,this._state=1},e.prototype.put=function(h,u,f){if(3!==this._state){if(1===this._state)for(;u<f;){var d=h[u++];if(59===d){this._state=2,this._start();break}if(d<48||57<d)return void(this._state=3);-1===this._id&&(this._id=0),this._id=10*this._id+d-48}2===this._state&&f-u>0&&this._put(h,u,f)}},e.prototype.end=function(h){0!==this._state&&(3!==this._state&&(1===this._state&&this._start(),this._end(h)),this._id=-1,this._state=0)},e}();u.OscParser=v;var g=function(){function e(h){this._handler=h,this._data="",this._hitLimit=!1}return e.prototype.start=function(){this._data="",this._hitLimit=!1},e.prototype.put=function(h,u,f){this._hitLimit||(this._data+=p.utf32ToString(h,u,f),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.end=function(h){var u;return this._hitLimit?u=!1:h&&(u=this._handler(this._data)),this._data="",this._hitLimit=!1,u},e}();u.OscHandler=g},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.PAYLOAD_LIMIT=void 0,u.PAYLOAD_LIMIT=1e7},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.DcsHandler=u.DcsParser=void 0;var d=f(8),p=f(20),v=f(22),g=[],y=function(){function e(){this._handlers=Object.create(null),this._active=g,this._ident=0,this._handlerFb=function(){}}return e.prototype.dispose=function(){this._handlers=Object.create(null),this._handlerFb=function(){}},e.prototype.addHandler=function(h,u){void 0===this._handlers[h]&&(this._handlers[h]=[]);var f=this._handlers[h];return f.push(u),{dispose:function(){var h=f.indexOf(u);-1!==h&&f.splice(h,1)}}},e.prototype.setHandler=function(h,u){this._handlers[h]=[u]},e.prototype.clearHandler=function(h){this._handlers[h]&&delete this._handlers[h]},e.prototype.setHandlerFallback=function(h){this._handlerFb=h},e.prototype.reset=function(){this._active.length&&this.unhook(!1),this._active=g,this._ident=0},e.prototype.hook=function(h,u){if(this.reset(),this._ident=h,this._active=this._handlers[h]||g,this._active.length)for(var f=this._active.length-1;f>=0;f--)this._active[f].hook(u);else this._handlerFb(this._ident,"HOOK",u)},e.prototype.put=function(h,u,f){if(this._active.length)for(var p=this._active.length-1;p>=0;p--)this._active[p].put(h,u,f);else this._handlerFb(this._ident,"PUT",d.utf32ToString(h,u,f))},e.prototype.unhook=function(h){if(this._active.length){for(var u=this._active.length-1;u>=0&&!1===this._active[u].unhook(h);u--);for(u--;u>=0;u--)this._active[u].unhook(!1)}else this._handlerFb(this._ident,"UNHOOK",h);this._active=g,this._ident=0},e}();u.DcsParser=y;var m=function(){function e(h){this._handler=h,this._data="",this._hitLimit=!1}return e.prototype.hook=function(h){this._params=h.clone(),this._data="",this._hitLimit=!1},e.prototype.put=function(h,u,f){this._hitLimit||(this._data+=d.utf32ToString(h,u,f),this._data.length>v.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))},e.prototype.unhook=function(h){var u;return this._hitLimit?u=!1:h&&(u=this._handler(this._data,this._params?this._params:new p.Params)),this._params=void 0,this._data="",this._hitLimit=!1,u},e}();u.DcsHandler=m},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.removeTerminalFromCache=u.acquireCharAtlas=void 0;var d=f(25),p=f(42),v=[];u.acquireCharAtlas=function(h,u,f,g,y){for(var m=d.generateConfig(g,y,h,f),C=0;C<v.length;C++){var w=(E=v[C]).ownedBy.indexOf(u);if(w>=0){if(d.configEquals(E.config,m))return E.atlas;1===E.ownedBy.length?(E.atlas.dispose(),v.splice(C,1)):E.ownedBy.splice(w,1);break}}for(C=0;C<v.length;C++){var E=v[C];if(d.configEquals(E.config,m))return E.ownedBy.push(u),E.atlas}var L={atlas:new p.DynamicCharAtlas(document,m),config:m,ownedBy:[u]};return v.push(L),L.atlas},u.removeTerminalFromCache=function(h){for(var u=0;u<v.length;u++){var f=v[u].ownedBy.indexOf(h);if(-1!==f){1===v[u].ownedBy.length?(v[u].atlas.dispose(),v.splice(u,1)):v[u].ownedBy.splice(f,1);break}}}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.is256Color=u.configEquals=u.generateConfig=void 0;var d=f(3);u.generateConfig=function(h,u,f,d){var p={foreground:d.foreground,background:d.background,cursor:void 0,cursorAccent:void 0,selection:void 0,ansi:d.ansi.slice(0,16)};return{devicePixelRatio:window.devicePixelRatio,scaledCharWidth:h,scaledCharHeight:u,fontFamily:f.fontFamily,fontSize:f.fontSize,fontWeight:f.fontWeight,fontWeightBold:f.fontWeightBold,allowTransparency:f.allowTransparency,colors:p}},u.configEquals=function(h,u){for(var f=0;f<h.colors.ansi.length;f++)if(h.colors.ansi[f].rgba!==u.colors.ansi[f].rgba)return!1;return h.devicePixelRatio===u.devicePixelRatio&&h.fontFamily===u.fontFamily&&h.fontSize===u.fontSize&&h.fontWeight===u.fontWeight&&h.fontWeightBold===u.fontWeightBold&&h.allowTransparency===u.allowTransparency&&h.scaledCharWidth===u.scaledCharWidth&&h.scaledCharHeight===u.scaledCharHeight&&h.colors.foreground===u.colors.foreground&&h.colors.background===u.colors.background},u.is256Color=function(h){return h<d.DEFAULT_COLOR}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ColorManager=u.DEFAULT_ANSI_COLORS=void 0;var d=f(10),p=f(44),v=d.css.toColor("#ffffff"),g=d.css.toColor("#000000"),y=d.css.toColor("#ffffff"),m=d.css.toColor("#000000"),C={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};u.DEFAULT_ANSI_COLORS=function(){for(var h=[d.css.toColor("#2e3436"),d.css.toColor("#cc0000"),d.css.toColor("#4e9a06"),d.css.toColor("#c4a000"),d.css.toColor("#3465a4"),d.css.toColor("#75507b"),d.css.toColor("#06989a"),d.css.toColor("#d3d7cf"),d.css.toColor("#555753"),d.css.toColor("#ef2929"),d.css.toColor("#8ae234"),d.css.toColor("#fce94f"),d.css.toColor("#729fcf"),d.css.toColor("#ad7fa8"),d.css.toColor("#34e2e2"),d.css.toColor("#eeeeec")],u=[0,95,135,175,215,255],f=0;f<216;f++){var p=u[f/36%6|0],v=u[f/6%6|0],g=u[f%6];h.push({css:d.channels.toCss(p,v,g),rgba:d.channels.toRgba(p,v,g)})}for(f=0;f<24;f++){var y=8+10*f;h.push({css:d.channels.toCss(y,y,y),rgba:d.channels.toRgba(y,y,y)})}return h}();var w=function(){function e(h,f){this.allowTransparency=f;var w=h.createElement("canvas");w.width=1,w.height=1;var E=w.getContext("2d");if(!E)throw new Error("Could not get rendering context");this._ctx=E,this._ctx.globalCompositeOperation="copy",this._litmusColor=this._ctx.createLinearGradient(0,0,1,1),this._contrastCache=new p.ColorContrastCache,this.colors={foreground:v,background:g,cursor:y,cursorAccent:m,selection:C,selectionOpaque:d.color.blend(g,C),ansi:u.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache}}return e.prototype.onOptionsChange=function(h){"minimumContrastRatio"===h&&this._contrastCache.clear()},e.prototype.setTheme=function(h){void 0===h&&(h={}),this.colors.foreground=this._parseColor(h.foreground,v),this.colors.background=this._parseColor(h.background,g),this.colors.cursor=this._parseColor(h.cursor,y,!0),this.colors.cursorAccent=this._parseColor(h.cursorAccent,m,!0),this.colors.selection=this._parseColor(h.selection,C,!0),this.colors.selectionOpaque=d.color.blend(this.colors.background,this.colors.selection),this.colors.ansi[0]=this._parseColor(h.black,u.DEFAULT_ANSI_COLORS[0]),this.colors.ansi[1]=this._parseColor(h.red,u.DEFAULT_ANSI_COLORS[1]),this.colors.ansi[2]=this._parseColor(h.green,u.DEFAULT_ANSI_COLORS[2]),this.colors.ansi[3]=this._parseColor(h.yellow,u.DEFAULT_ANSI_COLORS[3]),this.colors.ansi[4]=this._parseColor(h.blue,u.DEFAULT_ANSI_COLORS[4]),this.colors.ansi[5]=this._parseColor(h.magenta,u.DEFAULT_ANSI_COLORS[5]),this.colors.ansi[6]=this._parseColor(h.cyan,u.DEFAULT_ANSI_COLORS[6]),this.colors.ansi[7]=this._parseColor(h.white,u.DEFAULT_ANSI_COLORS[7]),this.colors.ansi[8]=this._parseColor(h.brightBlack,u.DEFAULT_ANSI_COLORS[8]),this.colors.ansi[9]=this._parseColor(h.brightRed,u.DEFAULT_ANSI_COLORS[9]),this.colors.ansi[10]=this._parseColor(h.brightGreen,u.DEFAULT_ANSI_COLORS[10]),this.colors.ansi[11]=this._parseColor(h.brightYellow,u.DEFAULT_ANSI_COLORS[11]),this.colors.ansi[12]=this._parseColor(h.brightBlue,u.DEFAULT_ANSI_COLORS[12]),this.colors.ansi[13]=this._parseColor(h.brightMagenta,u.DEFAULT_ANSI_COLORS[13]),this.colors.ansi[14]=this._parseColor(h.brightCyan,u.DEFAULT_ANSI_COLORS[14]),this.colors.ansi[15]=this._parseColor(h.brightWhite,u.DEFAULT_ANSI_COLORS[15]),this._contrastCache.clear()},e.prototype._parseColor=function(h,u,f){if(void 0===f&&(f=this.allowTransparency),void 0===h)return u;if(this._ctx.fillStyle=this._litmusColor,this._ctx.fillStyle=h,"string"!=typeof this._ctx.fillStyle)return console.warn("Color: "+h+" is invalid using fallback "+u.css),u;this._ctx.fillRect(0,0,1,1);var p=this._ctx.getImageData(0,0,1,1).data;if(255!==p[3]){if(!f)return console.warn("Color: "+h+" is using transparency, but allowTransparency is false. Using fallback "+u.css+"."),u;var v=this._ctx.fillStyle.substring(5,this._ctx.fillStyle.length-1).split(",").map((function(h){return Number(h)})),g=v[0],y=v[1],m=v[2],C=v[3],w=Math.round(255*C);return{rgba:d.channels.toRgba(g,y,m,w),css:h}}return{css:this._ctx.fillStyle,rgba:d.channels.toRgba(p[0],p[1],p[2],p[3])}},e}();u.ColorManager=w},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.throwIfFalsy=void 0,u.throwIfFalsy=function(h){if(!h)throw new Error("value must not be falsy");return h}},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.CharacterJoinerRegistry=u.JoinedCellData=void 0;var v=f(6),g=f(3),y=f(4),m=function(h){function t(u,f,d){var p=h.call(this)||this;return p.content=0,p.combinedData="",p.fg=u.fg,p.bg=u.bg,p.combinedData=f,p._width=d,p}return p(t,h),t.prototype.isCombined=function(){return 2097152},t.prototype.getWidth=function(){return this._width},t.prototype.getChars=function(){return this.combinedData},t.prototype.getCode=function(){return 2097151},t.prototype.setFromCharData=function(h){throw new Error("not implemented")},t.prototype.getAsCharData=function(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]},t}(v.AttributeData);u.JoinedCellData=m;var C=function(){function e(h){this._bufferService=h,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new y.CellData}return e.prototype.registerCharacterJoiner=function(h){var u={id:this._nextCharacterJoinerId++,handler:h};return this._characterJoiners.push(u),u.id},e.prototype.deregisterCharacterJoiner=function(h){for(var u=0;u<this._characterJoiners.length;u++)if(this._characterJoiners[u].id===h)return this._characterJoiners.splice(u,1),!0;return!1},e.prototype.getJoinedCharacters=function(h){if(0===this._characterJoiners.length)return[];var u=this._bufferService.buffer.lines.get(h);if(!u||0===u.length)return[];for(var f=[],d=u.translateToString(!0),p=0,v=0,y=0,m=u.getFg(0),C=u.getBg(0),w=0;w<u.getTrimmedLength();w++)if(u.loadCell(w,this._workCell),0!==this._workCell.getWidth()){if(this._workCell.fg!==m||this._workCell.bg!==C){if(w-p>1)for(var E=this._getJoinedRanges(d,y,v,u,p),L=0;L<E.length;L++)f.push(E[L]);p=w,y=v,m=this._workCell.fg,C=this._workCell.bg}v+=this._workCell.getChars().length||g.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-p>1)for(E=this._getJoinedRanges(d,y,v,u,p),L=0;L<E.length;L++)f.push(E[L]);return f},e.prototype._getJoinedRanges=function(h,u,f,d,p){for(var v=h.substring(u,f),g=this._characterJoiners[0].handler(v),y=1;y<this._characterJoiners.length;y++)for(var m=this._characterJoiners[y].handler(v),C=0;C<m.length;C++)e._mergeRanges(g,m[C]);return this._stringRangesToCellRanges(g,d,p),g},e.prototype._stringRangesToCellRanges=function(h,u,f){var d=0,p=!1,v=0,y=h[d];if(y){for(var m=f;m<this._bufferService.cols;m++){var C=u.getWidth(m),w=u.getString(m).length||g.WHITESPACE_CELL_CHAR.length;if(0!==C){if(!p&&y[0]<=v&&(y[0]=m,p=!0),y[1]<=v){if(y[1]=m,!(y=h[++d]))break;y[0]<=v?(y[0]=m,p=!0):p=!1}v+=w}}y&&(y[1]=this._bufferService.cols)}},e._mergeRanges=function(h,u){for(var f=!1,d=0;d<h.length;d++){var p=h[d];if(f){if(u[1]<=p[0])return h[d-1][1]=u[1],h;if(u[1]<=p[1])return h[d-1][1]=Math.max(u[1],p[1]),h.splice(d,1),h;h.splice(d,1),d--}else{if(u[1]<=p[0])return h.splice(d,0,u),h;if(u[1]<=p[1])return p[0]=Math.min(u[0],p[0]),h;u[0]<p[1]&&(p[0]=Math.min(u[0],p[0]),f=!0)}}return f?h[h.length-1][1]=u[1]:h.push(u),h},e}();u.CharacterJoinerRegistry=C},function(h,u,f){"use strict";function i(h,u){var f=u.getBoundingClientRect();return[h.clientX-f.left,h.clientY-f.top]}Object.defineProperty(u,"__esModule",{value:!0}),u.getRawByteCoords=u.getCoords=u.getCoordsRelativeToElement=void 0,u.getCoordsRelativeToElement=i,u.getCoords=function(h,u,f,d,p,v,g,y){if(p){var m=i(h,u);if(m)return m[0]=Math.ceil((m[0]+(y?v/2:0))/v),m[1]=Math.ceil(m[1]/g),m[0]=Math.min(Math.max(m[0],1),f+(y?1:0)),m[1]=Math.min(Math.max(m[1],1),d),m}},u.getRawByteCoords=function(h){if(h)return{x:h[0]+32,y:h[1]+32}}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.RenderDebouncer=void 0;var d=function(){function e(h){this._renderCallback=h}return e.prototype.dispose=function(){this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.refresh=function(h,u,f){var d=this;this._rowCount=f,h=void 0!==h?h:0,u=void 0!==u?u:this._rowCount-1,this._rowStart=void 0!==this._rowStart?Math.min(this._rowStart,h):h,this._rowEnd=void 0!==this._rowEnd?Math.max(this._rowEnd,u):u,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){return d._innerRefresh()})))},e.prototype._innerRefresh=function(){if(void 0!==this._rowStart&&void 0!==this._rowEnd&&void 0!==this._rowCount){var h=Math.max(this._rowStart,0),u=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._animationFrame=void 0,this._renderCallback(h,u)}},e}();u.RenderDebouncer=d},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.ScreenDprMonitor=void 0;var v=function(h){function t(){var u=null!==h&&h.apply(this,arguments)||this;return u._currentDevicePixelRatio=window.devicePixelRatio,u}return p(t,h),t.prototype.setListener=function(h){var u=this;this._listener&&this.clearListener(),this._listener=h,this._outerListener=function(){u._listener&&(u._listener(window.devicePixelRatio,u._currentDevicePixelRatio),u._updateDpr())},this._updateDpr()},t.prototype.dispose=function(){h.prototype.dispose.call(this),this.clearListener()},t.prototype._updateDpr=function(){var h;this._outerListener&&(null===(h=this._resolutionMediaMatchList)||void 0===h||h.removeListener(this._outerListener),this._currentDevicePixelRatio=window.devicePixelRatio,this._resolutionMediaMatchList=window.matchMedia("screen and (resolution: "+window.devicePixelRatio+"dppx)"),this._resolutionMediaMatchList.addListener(this._outerListener))},t.prototype.clearListener=function(){this._resolutionMediaMatchList&&this._listener&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._listener=void 0,this._outerListener=void 0)},t}(f(2).Disposable);u.ScreenDprMonitor=v},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.clone=void 0,u.clone=function e(h,u){if(void 0===u&&(u=5),"object"!=typeof h)return h;var f=Array.isArray(h)?[]:{};for(var d in h)f[d]=u<=1?h[d]:h[d]?e(h[d],u-1):h[d];return f}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.Terminal=void 0;var d=f(4),p=f(34),v=f(17),g=f(0),y=f(82),m=function(){function e(h){this._core=new p.Terminal(h),this._addonManager=new y.AddonManager}return e.prototype._checkProposedApi=function(){if(!this._core.optionsService.options.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")},Object.defineProperty(e.prototype,"onCursorMove",{get:function(){return this._core.onCursorMove},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLineFeed",{get:function(){return this._core.onLineFeed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onSelectionChange",{get:function(){return this._core.onSelectionChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onData",{get:function(){return this._core.onData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onBinary",{get:function(){return this._core.onBinary},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTitleChange",{get:function(){return this._core.onTitleChange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onScroll",{get:function(){return this._core.onScroll},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onKey",{get:function(){return this._core.onKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onRender",{get:function(){return this._core.onRender},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onResize",{get:function(){return this._core.onResize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._core.element},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parser",{get:function(){return this._checkProposedApi(),this._parser||(this._parser=new L(this._core)),this._parser},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unicode",{get:function(){return this._checkProposedApi(),new A(this._core)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textarea",{get:function(){return this._core.textarea},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._core.rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._core.cols},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return this._checkProposedApi(),new w(this._core.buffers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"markers",{get:function(){return this._checkProposedApi(),this._core.markers},enumerable:!1,configurable:!0}),e.prototype.blur=function(){this._core.blur()},e.prototype.focus=function(){this._core.focus()},e.prototype.resize=function(h,u){this._verifyIntegers(h,u),this._core.resize(h,u)},e.prototype.open=function(h){this._core.open(h)},e.prototype.attachCustomKeyEventHandler=function(h){this._core.attachCustomKeyEventHandler(h)},e.prototype.registerLinkMatcher=function(h,u,f){return this._checkProposedApi(),this._core.registerLinkMatcher(h,u,f)},e.prototype.deregisterLinkMatcher=function(h){this._checkProposedApi(),this._core.deregisterLinkMatcher(h)},e.prototype.registerLinkProvider=function(h){return this._checkProposedApi(),this._core.registerLinkProvider(h)},e.prototype.registerCharacterJoiner=function(h){return this._checkProposedApi(),this._core.registerCharacterJoiner(h)},e.prototype.deregisterCharacterJoiner=function(h){this._checkProposedApi(),this._core.deregisterCharacterJoiner(h)},e.prototype.registerMarker=function(h){return this._checkProposedApi(),this._verifyIntegers(h),this._core.addMarker(h)},e.prototype.addMarker=function(h){return this.registerMarker(h)},e.prototype.hasSelection=function(){return this._core.hasSelection()},e.prototype.select=function(h,u,f){this._verifyIntegers(h,u,f),this._core.select(h,u,f)},e.prototype.getSelection=function(){return this._core.getSelection()},e.prototype.getSelectionPosition=function(){return this._core.getSelectionPosition()},e.prototype.clearSelection=function(){this._core.clearSelection()},e.prototype.selectAll=function(){this._core.selectAll()},e.prototype.selectLines=function(h,u){this._verifyIntegers(h,u),this._core.selectLines(h,u)},e.prototype.dispose=function(){this._addonManager.dispose(),this._core.dispose()},e.prototype.scrollLines=function(h){this._verifyIntegers(h),this._core.scrollLines(h)},e.prototype.scrollPages=function(h){this._verifyIntegers(h),this._core.scrollPages(h)},e.prototype.scrollToTop=function(){this._core.scrollToTop()},e.prototype.scrollToBottom=function(){this._core.scrollToBottom()},e.prototype.scrollToLine=function(h){this._verifyIntegers(h),this._core.scrollToLine(h)},e.prototype.clear=function(){this._core.clear()},e.prototype.write=function(h,u){this._core.write(h,u)},e.prototype.writeUtf8=function(h,u){this._core.write(h,u)},e.prototype.writeln=function(h,u){this._core.write(h),this._core.write("\r\n",u)},e.prototype.paste=function(h){this._core.paste(h)},e.prototype.getOption=function(h){return this._core.optionsService.getOption(h)},e.prototype.setOption=function(h,u){this._core.optionsService.setOption(h,u)},e.prototype.refresh=function(h,u){this._verifyIntegers(h,u),this._core.refresh(h,u)},e.prototype.reset=function(){this._core.reset()},e.prototype.loadAddon=function(h){return this._addonManager.loadAddon(this,h)},Object.defineProperty(e,"strings",{get:function(){return v},enumerable:!1,configurable:!0}),e.prototype._verifyIntegers=function(){for(var h=[],u=0;u<arguments.length;u++)h[u]=arguments[u];h.forEach((function(h){if(h===1/0||isNaN(h)||h%1!=0)throw new Error("This API only accepts integers")}))},e}();u.Terminal=m;var C=function(){function e(h,u){this._buffer=h,this.type=u}return e.prototype.init=function(h){return this._buffer=h,this},Object.defineProperty(e.prototype,"cursorY",{get:function(){return this._buffer.y},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cursorX",{get:function(){return this._buffer.x},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewportY",{get:function(){return this._buffer.ydisp},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseY",{get:function(){return this._buffer.ybase},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._buffer.lines.length},enumerable:!1,configurable:!0}),e.prototype.getLine=function(h){var u=this._buffer.lines.get(h);if(u)return new E(u)},e.prototype.getNullCell=function(){return new d.CellData},e}(),w=function(){function e(h){var u=this;this._buffers=h,this._onBufferChange=new g.EventEmitter,this._normal=new C(this._buffers.normal,"normal"),this._alternate=new C(this._buffers.alt,"alternate"),this._buffers.onBufferActivate((function(){return u._onBufferChange.fire(u.active)}))}return Object.defineProperty(e.prototype,"onBufferChange",{get:function(){return this._onBufferChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){if(this._buffers.active===this._buffers.normal)return this.normal;if(this._buffers.active===this._buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"normal",{get:function(){return this._normal.init(this._buffers.normal)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alternate",{get:function(){return this._alternate.init(this._buffers.alt)},enumerable:!1,configurable:!0}),e}(),E=function(){function e(h){this._line=h}return Object.defineProperty(e.prototype,"isWrapped",{get:function(){return this._line.isWrapped},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._line.length},enumerable:!1,configurable:!0}),e.prototype.getCell=function(h,u){if(!(h<0||h>=this._line.length))return u?(this._line.loadCell(h,u),u):this._line.loadCell(h,new d.CellData)},e.prototype.translateToString=function(h,u,f){return this._line.translateToString(h,u,f)},e}(),L=function(){function e(h){this._core=h}return e.prototype.registerCsiHandler=function(h,u){return this._core.addCsiHandler(h,(function(h){return u(h.toArray())}))},e.prototype.addCsiHandler=function(h,u){return this.registerCsiHandler(h,u)},e.prototype.registerDcsHandler=function(h,u){return this._core.addDcsHandler(h,(function(h,f){return u(h,f.toArray())}))},e.prototype.addDcsHandler=function(h,u){return this.registerDcsHandler(h,u)},e.prototype.registerEscHandler=function(h,u){return this._core.addEscHandler(h,u)},e.prototype.addEscHandler=function(h,u){return this.registerEscHandler(h,u)},e.prototype.registerOscHandler=function(h,u){return this._core.addOscHandler(h,u)},e.prototype.addOscHandler=function(h,u){return this.registerOscHandler(h,u)},e}(),A=function(){function e(h){this._core=h}return e.prototype.register=function(h){this._core.unicodeService.register(h)},Object.defineProperty(e.prototype,"versions",{get:function(){return this._core.unicodeService.versions},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._core.unicodeService.activeVersion},set:function(h){this._core.unicodeService.activeVersion=h},enumerable:!1,configurable:!0}),e}()},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.Terminal=void 0;var v=f(35),g=f(36),y=f(37),m=f(12),C=f(18),w=f(39),E=f(49),L=f(50),A=f(11),R=f(7),k=f(17),x=f(53),D=f(54),O=f(55),T=f(56),M=f(58),P=f(0),I=f(16),H=f(26),B=f(59),F=f(5),j=f(60),W=f(61),U=f(62),q=f(63),N=f(64),z="undefined"!=typeof window?window.document:null,K=function(h){function t(u){void 0===u&&(u={});var f=h.call(this,u)||this;return f.browser=A,f._keyDownHandled=!1,f._onCursorMove=new P.EventEmitter,f._onKey=new P.EventEmitter,f._onRender=new P.EventEmitter,f._onSelectionChange=new P.EventEmitter,f._onTitleChange=new P.EventEmitter,f._onFocus=new P.EventEmitter,f._onBlur=new P.EventEmitter,f._onA11yCharEmitter=new P.EventEmitter,f._onA11yTabEmitter=new P.EventEmitter,f._setup(),f.linkifier=f._instantiationService.createInstance(E.Linkifier),f.linkifier2=f.register(f._instantiationService.createInstance(U.Linkifier2)),f.register(f._inputHandler.onRequestBell((function(){return f.bell()}))),f.register(f._inputHandler.onRequestRefreshRows((function(h,u){return f.refresh(h,u)}))),f.register(f._inputHandler.onRequestReset((function(){return f.reset()}))),f.register(f._inputHandler.onRequestScroll((function(h,u){return f.scroll(h,u||void 0)}))),f.register(f._inputHandler.onRequestWindowsOptionsReport((function(h){return f._reportWindowsOptions(h)}))),f.register(P.forwardEvent(f._inputHandler.onCursorMove,f._onCursorMove)),f.register(P.forwardEvent(f._inputHandler.onTitleChange,f._onTitleChange)),f.register(P.forwardEvent(f._inputHandler.onA11yChar,f._onA11yCharEmitter)),f.register(P.forwardEvent(f._inputHandler.onA11yTab,f._onA11yTabEmitter)),f.register(f._bufferService.onResize((function(h){return f._afterResize(h.cols,h.rows)}))),f}return p(t,h),Object.defineProperty(t.prototype,"options",{get:function(){return this.optionsService.options},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onCursorMove",{get:function(){return this._onCursorMove.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onKey",{get:function(){return this._onKey.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRender",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onTitleChange",{get:function(){return this._onTitleChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onFocus",{get:function(){return this._onFocus.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBlur",{get:function(){return this._onBlur.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yChar",{get:function(){return this._onA11yCharEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onA11yTab",{get:function(){return this._onA11yTabEmitter.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var u,f,d;this._isDisposed||(h.prototype.dispose.call(this),null===(u=this._renderService)||void 0===u||u.dispose(),this._customKeyEventHandler=void 0,this.write=function(){},null===(d=null===(f=this.element)||void 0===f?void 0:f.parentNode)||void 0===d||d.removeChild(this.element))},t.prototype._setup=function(){h.prototype._setup.call(this),this._customKeyEventHandler=void 0},Object.defineProperty(t.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),t.prototype.focus=function(){this.textarea&&this.textarea.focus({preventScroll:!0})},t.prototype._updateOptions=function(u){var f,d,p,v;switch(h.prototype._updateOptions.call(this,u),u){case"fontFamily":case"fontSize":null===(f=this._renderService)||void 0===f||f.clear(),null===(d=this._charSizeService)||void 0===d||d.measure();break;case"cursorBlink":case"cursorStyle":this.refresh(this.buffer.y,this.buffer.y);break;case"drawBoldTextInBrightColors":case"letterSpacing":case"lineHeight":case"fontWeight":case"fontWeightBold":case"minimumContrastRatio":this._renderService&&(this._renderService.clear(),this._renderService.onResize(this.cols,this.rows),this.refresh(0,this.rows-1));break;case"rendererType":this._renderService&&(this._renderService.setRenderer(this._createRenderer()),this._renderService.onResize(this.cols,this.rows));break;case"scrollback":null===(p=this.viewport)||void 0===p||p.syncScrollArea();break;case"screenReaderMode":this.optionsService.options.screenReaderMode?!this._accessibilityManager&&this._renderService&&(this._accessibilityManager=new O.AccessibilityManager(this,this._renderService)):(null===(v=this._accessibilityManager)||void 0===v||v.dispose(),this._accessibilityManager=void 0);break;case"tabStopWidth":this.buffers.setupTabStops();break;case"theme":this._setTheme(this.optionsService.options.theme)}},t.prototype._onTextAreaFocus=function(h){this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(m.C0.ESC+"[I"),this.updateCursorStyle(h),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()},t.prototype.blur=function(){var h;return null===(h=this.textarea)||void 0===h?void 0:h.blur()},t.prototype._onTextAreaBlur=function(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this._coreService.decPrivateModes.sendFocus&&this._coreService.triggerDataEvent(m.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()},t.prototype._initGlobal=function(){var h=this;this._bindKeys(),this.register(R.addDisposableDomListener(this.element,"copy",(function(u){h.hasSelection()&&y.copyHandler(u,h._selectionService)})));var t=function(u){return y.handlePasteEvent(u,h.textarea,h._coreService)};this.register(R.addDisposableDomListener(this.textarea,"paste",t)),this.register(R.addDisposableDomListener(this.element,"paste",t)),A.isFirefox?this.register(R.addDisposableDomListener(this.element,"mousedown",(function(u){2===u.button&&y.rightClickHandler(u,h.textarea,h.screenElement,h._selectionService,h.options.rightClickSelectsWord)}))):this.register(R.addDisposableDomListener(this.element,"contextmenu",(function(u){y.rightClickHandler(u,h.textarea,h.screenElement,h._selectionService,h.options.rightClickSelectsWord)}))),A.isLinux&&this.register(R.addDisposableDomListener(this.element,"auxclick",(function(u){1===u.button&&y.moveTextAreaUnderMouseCursor(u,h.textarea,h.screenElement)})))},t.prototype._bindKeys=function(){var h=this;this.register(R.addDisposableDomListener(this.textarea,"keyup",(function(u){return h._keyUp(u)}),!0)),this.register(R.addDisposableDomListener(this.textarea,"keydown",(function(u){return h._keyDown(u)}),!0)),this.register(R.addDisposableDomListener(this.textarea,"keypress",(function(u){return h._keyPress(u)}),!0)),this.register(R.addDisposableDomListener(this.textarea,"compositionstart",(function(){return h._compositionHelper.compositionstart()}))),this.register(R.addDisposableDomListener(this.textarea,"compositionupdate",(function(u){return h._compositionHelper.compositionupdate(u)}))),this.register(R.addDisposableDomListener(this.textarea,"compositionend",(function(){return h._compositionHelper.compositionend()}))),this.register(this.onRender((function(){return h._compositionHelper.updateCompositionElements()}))),this.register(this.onRender((function(u){return h._queueLinkification(u.start,u.end)})))},t.prototype.open=function(h){var u=this;if(!h)throw new Error("Terminal requires a parent element.");z.body.contains(h)||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this._document=h.ownerDocument,this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),this.element.setAttribute("tabindex","0"),h.appendChild(this.element);var f=z.createDocumentFragment();this._viewportElement=z.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),f.appendChild(this._viewportElement),this._viewportScrollArea=z.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=z.createElement("div"),this.screenElement.classList.add("xterm-screen"),this._helperContainer=z.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),f.appendChild(this.screenElement),this.textarea=z.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",k.promptLabel),this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this.register(R.addDisposableDomListener(this.textarea,"focus",(function(h){return u._onTextAreaFocus(h)}))),this.register(R.addDisposableDomListener(this.textarea,"blur",(function(){return u._onTextAreaBlur()}))),this._helperContainer.appendChild(this.textarea);var d=this._instantiationService.createInstance(q.CoreBrowserService,this.textarea);this._instantiationService.setService(F.ICoreBrowserService,d),this._charSizeService=this._instantiationService.createInstance(j.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(F.ICharSizeService,this._charSizeService),this._compositionView=z.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(v.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this.element.appendChild(f),this._theme=this.options.theme||this._theme,this._colorManager=new H.ColorManager(z,this.options.allowTransparency),this.register(this.optionsService.onOptionChange((function(h){return u._colorManager.onOptionsChange(h)}))),this._colorManager.setTheme(this._theme);var p=this._createRenderer();this._renderService=this.register(this._instantiationService.createInstance(B.RenderService,p,this.rows,this.screenElement)),this._instantiationService.setService(F.IRenderService,this._renderService),this.register(this._renderService.onRenderedBufferChange((function(h){return u._onRender.fire(h)}))),this.onResize((function(h){return u._renderService.resize(h.cols,h.rows)})),this._soundService=this._instantiationService.createInstance(x.SoundService),this._instantiationService.setService(F.ISoundService,this._soundService),this._mouseService=this._instantiationService.createInstance(W.MouseService),this._instantiationService.setService(F.IMouseService,this._mouseService),this.viewport=this._instantiationService.createInstance(g.Viewport,(function(h,f){return u.scrollLines(h,f)}),this._viewportElement,this._viewportScrollArea),this.viewport.onThemeChange(this._colorManager.colors),this.register(this._inputHandler.onRequestSyncScrollBar((function(){return u.viewport.syncScrollArea()}))),this.register(this.viewport),this.register(this.onCursorMove((function(){return u._renderService.onCursorMove()}))),this.register(this.onResize((function(){return u._renderService.onResize(u.cols,u.rows)}))),this.register(this.onBlur((function(){return u._renderService.onBlur()}))),this.register(this.onFocus((function(){return u._renderService.onFocus()}))),this.register(this._renderService.onDimensionsChange((function(){return u.viewport.syncScrollArea()}))),this._selectionService=this.register(this._instantiationService.createInstance(L.SelectionService,this.element,this.screenElement)),this._instantiationService.setService(F.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((function(h){return u.scrollLines(h.amount,h.suppressScrollEvent)}))),this.register(this._selectionService.onSelectionChange((function(){return u._onSelectionChange.fire()}))),this.register(this._selectionService.onRequestRedraw((function(h){return u._renderService.onSelectionChanged(h.start,h.end,h.columnSelectMode)}))),this.register(this._selectionService.onLinuxMouseSelection((function(h){u.textarea.value=h,u.textarea.focus(),u.textarea.select()}))),this.register(this.onScroll((function(){u.viewport.syncScrollArea(),u._selectionService.refresh()}))),this.register(R.addDisposableDomListener(this._viewportElement,"scroll",(function(){return u._selectionService.refresh()}))),this._mouseZoneManager=this._instantiationService.createInstance(D.MouseZoneManager,this.element,this.screenElement),this.register(this._mouseZoneManager),this.register(this.onScroll((function(){return u._mouseZoneManager.clearAll()}))),this.linkifier.attachToDom(this.element,this._mouseZoneManager),this.linkifier2.attachToDom(this.element,this._mouseService,this._renderService),this.register(R.addDisposableDomListener(this.element,"mousedown",(function(h){return u._selectionService.onMouseDown(h)}))),this._coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager=new O.AccessibilityManager(this,this._renderService)),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()},t.prototype._createRenderer=function(){switch(this.options.rendererType){case"canvas":return this._instantiationService.createInstance(w.Renderer,this._colorManager.colors,this.screenElement,this.linkifier,this.linkifier2);case"dom":return this._instantiationService.createInstance(T.DomRenderer,this._colorManager.colors,this.element,this.screenElement,this._viewportElement,this.linkifier,this.linkifier2);default:throw new Error('Unrecognized rendererType "'+this.options.rendererType+'"')}},t.prototype._setTheme=function(h){var u,f,d;this._theme=h,null===(u=this._colorManager)||void 0===u||u.setTheme(h),null===(f=this._renderService)||void 0===f||f.setColors(this._colorManager.colors),null===(d=this.viewport)||void 0===d||d.onThemeChange(this._colorManager.colors)},t.prototype.bindMouse=function(){var h=this,u=this,f=this.element;function i(h){var f,d,p=u._mouseService.getRawByteCoords(h,u.screenElement,u.cols,u.rows);if(!p)return!1;switch(h.overrideType||h.type){case"mousemove":d=32,void 0===h.buttons?(f=3,void 0!==h.button&&(f=h.button<3?h.button:3)):f=1&h.buttons?0:4&h.buttons?1:2&h.buttons?2:3;break;case"mouseup":d=0,f=h.button<3?h.button:3;break;case"mousedown":d=1,f=h.button<3?h.button:3;break;case"wheel":0!==h.deltaY&&(d=h.deltaY<0?0:1),f=4;break;default:return!1}return!(void 0===d||void 0===f||f>4)&&u._coreMouseService.triggerMouseEvent({col:p.x-33,row:p.y-33,button:f,action:d,ctrl:h.ctrlKey,alt:h.altKey,shift:h.shiftKey})}var d={mouseup:null,wheel:null,mousedrag:null,mousemove:null},o=function(u){return i(u),u.buttons||(h._document.removeEventListener("mouseup",d.mouseup),d.mousedrag&&h._document.removeEventListener("mousemove",d.mousedrag)),h.cancel(u)},s=function(u){return i(u),u.preventDefault(),h.cancel(u)},a=function(h){h.buttons&&i(h)},l=function(h){h.buttons||i(h)};this.register(this._coreMouseService.onProtocolChange((function(u){u?("debug"===h.optionsService.options.logLevel&&h._logService.debug("Binding to mouse events:",h._coreMouseService.explainEvents(u)),h.element.classList.add("enable-mouse-events"),h._selectionService.disable()):(h._logService.debug("Unbinding from mouse events."),h.element.classList.remove("enable-mouse-events"),h._selectionService.enable()),8&u?d.mousemove||(f.addEventListener("mousemove",l),d.mousemove=l):(f.removeEventListener("mousemove",d.mousemove),d.mousemove=null),16&u?d.wheel||(f.addEventListener("wheel",s),d.wheel=s):(f.removeEventListener("wheel",d.wheel),d.wheel=null),2&u?d.mouseup||(d.mouseup=o):(h._document.removeEventListener("mouseup",d.mouseup),d.mouseup=null),4&u?d.mousedrag||(d.mousedrag=a):(h._document.removeEventListener("mousemove",d.mousedrag),d.mousedrag=null)}))),this._coreMouseService.activeProtocol=this._coreMouseService.activeProtocol,this.register(R.addDisposableDomListener(f,"mousedown",(function(u){if(u.preventDefault(),h.focus(),h._coreMouseService.areMouseEventsActive&&!h._selectionService.shouldForceSelection(u))return i(u),d.mouseup&&h._document.addEventListener("mouseup",d.mouseup),d.mousedrag&&h._document.addEventListener("mousemove",d.mousedrag),h.cancel(u)}))),this.register(R.addDisposableDomListener(f,"wheel",(function(u){if(d.wheel);else if(!h.buffer.hasScrollback){var f=h.viewport.getLinesScrolled(u);if(0===f)return;for(var p=m.C0.ESC+(h._coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(u.deltaY<0?"A":"B"),v="",g=0;g<Math.abs(f);g++)v+=p;h._coreService.triggerDataEvent(v,!0)}}))),this.register(R.addDisposableDomListener(f,"wheel",(function(u){if(!d.wheel)return h.viewport.onWheel(u)?void 0:h.cancel(u)}))),this.register(R.addDisposableDomListener(f,"touchstart",(function(u){if(!h._coreMouseService.areMouseEventsActive)return h.viewport.onTouchStart(u),h.cancel(u)}))),this.register(R.addDisposableDomListener(f,"touchmove",(function(u){if(!h._coreMouseService.areMouseEventsActive)return h.viewport.onTouchMove(u)?void 0:h.cancel(u)})))},t.prototype.refresh=function(h,u){var f;null===(f=this._renderService)||void 0===f||f.refreshRows(h,u)},t.prototype._queueLinkification=function(h,u){var f;null===(f=this.linkifier)||void 0===f||f.linkifyRows(h,u)},t.prototype.updateCursorStyle=function(h){this._selectionService&&this._selectionService.shouldColumnSelect(h)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")},t.prototype._showCursor=function(){this._coreService.isCursorInitialized||(this._coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))},t.prototype.scrollLines=function(u,f){h.prototype.scrollLines.call(this,u,f),this.refresh(0,this.rows-1)},t.prototype.paste=function(h){y.paste(h,this.textarea,this._coreService)},t.prototype.attachCustomKeyEventHandler=function(h){this._customKeyEventHandler=h},t.prototype.registerLinkMatcher=function(h,u,f){var d=this.linkifier.registerLinkMatcher(h,u,f);return this.refresh(0,this.rows-1),d},t.prototype.deregisterLinkMatcher=function(h){this.linkifier.deregisterLinkMatcher(h)&&this.refresh(0,this.rows-1)},t.prototype.registerLinkProvider=function(h){return this.linkifier2.registerLinkProvider(h)},t.prototype.registerCharacterJoiner=function(h){var u=this._renderService.registerCharacterJoiner(h);return this.refresh(0,this.rows-1),u},t.prototype.deregisterCharacterJoiner=function(h){this._renderService.deregisterCharacterJoiner(h)&&this.refresh(0,this.rows-1)},Object.defineProperty(t.prototype,"markers",{get:function(){return this.buffer.markers},enumerable:!1,configurable:!0}),t.prototype.addMarker=function(h){if(this.buffer===this.buffers.normal)return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+h)},t.prototype.hasSelection=function(){return!!this._selectionService&&this._selectionService.hasSelection},t.prototype.select=function(h,u,f){this._selectionService.setSelection(h,u,f)},t.prototype.getSelection=function(){return this._selectionService?this._selectionService.selectionText:""},t.prototype.getSelectionPosition=function(){if(this._selectionService&&this._selectionService.hasSelection)return{startColumn:this._selectionService.selectionStart[0],startRow:this._selectionService.selectionStart[1],endColumn:this._selectionService.selectionEnd[0],endRow:this._selectionService.selectionEnd[1]}},t.prototype.clearSelection=function(){var h;null===(h=this._selectionService)||void 0===h||h.clearSelection()},t.prototype.selectAll=function(){var h;null===(h=this._selectionService)||void 0===h||h.selectAll()},t.prototype.selectLines=function(h,u){var f;null===(f=this._selectionService)||void 0===f||f.selectLines(h,u)},t.prototype._keyDown=function(h){if(this._keyDownHandled=!1,this._customKeyEventHandler&&!1===this._customKeyEventHandler(h))return!1;if(!this._compositionHelper.keydown(h))return this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;var u=M.evaluateKeyboardEvent(h,this._coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(h),3===u.type||2===u.type){var f=this.rows-1;return this.scrollLines(2===u.type?-f:f),this.cancel(h,!0)}return 1===u.type&&this.selectAll(),!!this._isThirdLevelShift(this.browser,h)||(u.cancel&&this.cancel(h,!0),!u.key||(u.key!==m.C0.ETX&&u.key!==m.C0.CR||(this.textarea.value=""),this._onKey.fire({key:u.key,domEvent:h}),this._showCursor(),this._coreService.triggerDataEvent(u.key,!0),this.optionsService.options.screenReaderMode?void(this._keyDownHandled=!0):this.cancel(h,!0)))},t.prototype._isThirdLevelShift=function(h,u){var f=h.isMac&&!this.options.macOptionIsMeta&&u.altKey&&!u.ctrlKey&&!u.metaKey||h.isWindows&&u.altKey&&u.ctrlKey&&!u.metaKey;return"keypress"===u.type?f:f&&(!u.keyCode||u.keyCode>47)},t.prototype._keyUp=function(h){this._customKeyEventHandler&&!1===this._customKeyEventHandler(h)||(function(h){return 16===h.keyCode||17===h.keyCode||18===h.keyCode}(h)||this.focus(),this.updateCursorStyle(h))},t.prototype._keyPress=function(h){var u;if(this._keyDownHandled)return!1;if(this._customKeyEventHandler&&!1===this._customKeyEventHandler(h))return!1;if(this.cancel(h),h.charCode)u=h.charCode;else if(null===h.which||void 0===h.which)u=h.keyCode;else{if(0===h.which||0===h.charCode)return!1;u=h.which}return!(!u||(h.altKey||h.ctrlKey||h.metaKey)&&!this._isThirdLevelShift(this.browser,h)||(u=String.fromCharCode(u),this._onKey.fire({key:u,domEvent:h}),this._showCursor(),this._coreService.triggerDataEvent(u,!0),0))},t.prototype.bell=function(){this._soundBell()&&this._soundService.playBellSound()},t.prototype.resize=function(u,f){u!==this.cols||f!==this.rows?h.prototype.resize.call(this,u,f):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()},t.prototype._afterResize=function(h,u){var f,d;null===(f=this._charSizeService)||void 0===f||f.measure(),null===(d=this.viewport)||void 0===d||d.syncScrollArea(!0)},t.prototype.clear=function(){if(0!==this.buffer.ybase||0!==this.buffer.y){this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(var h=1;h<this.rows;h++)this.buffer.lines.push(this.buffer.getBlankLine(I.DEFAULT_ATTR_DATA));this.refresh(0,this.rows-1),this._onScroll.fire(this.buffer.ydisp)}},t.prototype.reset=function(){var u,f;this.options.rows=this.rows,this.options.cols=this.cols;var d=this._customKeyEventHandler;this._setup(),h.prototype.reset.call(this),null===(u=this._selectionService)||void 0===u||u.reset(),this._customKeyEventHandler=d,this.refresh(0,this.rows-1),null===(f=this.viewport)||void 0===f||f.syncScrollArea()},t.prototype._reportWindowsOptions=function(h){if(this._renderService)switch(h){case C.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:var u=this._renderService.dimensions.scaledCanvasWidth.toFixed(0),f=this._renderService.dimensions.scaledCanvasHeight.toFixed(0);this._coreService.triggerDataEvent(m.C0.ESC+"[4;"+f+";"+u+"t");break;case C.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:var d=this._renderService.dimensions.scaledCellWidth.toFixed(0),p=this._renderService.dimensions.scaledCellHeight.toFixed(0);this._coreService.triggerDataEvent(m.C0.ESC+"[6;"+p+";"+d+"t")}},t.prototype.cancel=function(h,u){if(this.options.cancelEvents||u)return h.preventDefault(),h.stopPropagation(),!1},t.prototype._visualBell=function(){return!1},t.prototype._soundBell=function(){return"sound"===this.options.bellStyle},t}(N.CoreTerminal);u.Terminal=K},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CompositionHelper=void 0;var v=f(5),g=f(1),y=function(){function e(h,u,f,d,p,v){this._textarea=h,this._compositionView=u,this._bufferService=f,this._optionsService=d,this._charSizeService=p,this._coreService=v,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0}}return e.prototype.compositionstart=function(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._compositionView.classList.add("active")},e.prototype.compositionupdate=function(h){var u=this;this._compositionView.textContent=h.data,this.updateCompositionElements(),setTimeout((function(){u._compositionPosition.end=u._textarea.value.length}),0)},e.prototype.compositionend=function(){this._finalizeComposition(!0)},e.prototype.keydown=function(h){if(this._isComposing||this._isSendingComposition){if(229===h.keyCode)return!1;if(16===h.keyCode||17===h.keyCode||18===h.keyCode)return!1;this._finalizeComposition(!1)}return 229!==h.keyCode||(this._handleAnyTextareaChanges(),!1)},e.prototype._finalizeComposition=function(h){var u=this;if(this._compositionView.classList.remove("active"),this._isComposing=!1,this._clearTextareaPosition(),h){var f={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((function(){if(u._isSendingComposition){u._isSendingComposition=!1;var h=void 0;h=u._isComposing?u._textarea.value.substring(f.start,f.end):u._textarea.value.substring(f.start),u._coreService.triggerDataEvent(h,!0)}}),0)}else{this._isSendingComposition=!1;var d=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(d,!0)}},e.prototype._handleAnyTextareaChanges=function(){var h=this,u=this._textarea.value;setTimeout((function(){if(!h._isComposing){var f=h._textarea.value.replace(u,"");f.length>0&&h._coreService.triggerDataEvent(f,!0)}}),0)},e.prototype.updateCompositionElements=function(h){var u=this;if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){var f=Math.ceil(this._charSizeService.height*this._optionsService.options.lineHeight),d=this._bufferService.buffer.y*f,p=this._bufferService.buffer.x*this._charSizeService.width;this._compositionView.style.left=p+"px",this._compositionView.style.top=d+"px",this._compositionView.style.height=f+"px",this._compositionView.style.lineHeight=f+"px",this._compositionView.style.fontFamily=this._optionsService.options.fontFamily,this._compositionView.style.fontSize=this._optionsService.options.fontSize+"px";var v=this._compositionView.getBoundingClientRect();this._textarea.style.left=p+"px",this._textarea.style.top=d+"px",this._textarea.style.width=v.width+"px",this._textarea.style.height=v.height+"px",this._textarea.style.lineHeight=v.height+"px"}h||setTimeout((function(){return u.updateCompositionElements(!0)}),0)}},e.prototype._clearTextareaPosition=function(){this._textarea.style.left="",this._textarea.style.top=""},d([p(2,g.IBufferService),p(3,g.IOptionsService),p(4,v.ICharSizeService),p(5,g.ICoreService)],e)}();u.CompositionHelper=y},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.Viewport=void 0;var y=f(2),m=f(7),C=f(5),w=f(1),E=function(h){function t(u,f,d,p,v,g,y){var C=h.call(this)||this;return C._scrollLines=u,C._viewportElement=f,C._scrollArea=d,C._bufferService=p,C._optionsService=v,C._charSizeService=g,C._renderService=y,C.scrollBarWidth=0,C._currentRowHeight=0,C._lastRecordedBufferLength=0,C._lastRecordedViewportHeight=0,C._lastRecordedBufferHeight=0,C._lastTouchY=0,C._lastScrollTop=0,C._wheelPartialScroll=0,C._refreshAnimationFrame=null,C._ignoreNextScrollEvent=!1,C.scrollBarWidth=C._viewportElement.offsetWidth-C._scrollArea.offsetWidth||15,C.register(m.addDisposableDomListener(C._viewportElement,"scroll",C._onScroll.bind(C))),setTimeout((function(){return C.syncScrollArea()}),0),C}return p(t,h),t.prototype.onThemeChange=function(h){this._viewportElement.style.backgroundColor=h.background.css},t.prototype._refresh=function(h){var u=this;if(h)return this._innerRefresh(),void(null!==this._refreshAnimationFrame&&cancelAnimationFrame(this._refreshAnimationFrame));null===this._refreshAnimationFrame&&(this._refreshAnimationFrame=requestAnimationFrame((function(){return u._innerRefresh()})))},t.prototype._innerRefresh=function(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;var h=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderService.dimensions.canvasHeight);this._lastRecordedBufferHeight!==h&&(this._lastRecordedBufferHeight=h,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}var u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==u&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=u),this._refreshAnimationFrame=null},t.prototype.syncScrollArea=function(h){if(void 0===h&&(h=!1),this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(h);if(this._lastRecordedViewportHeight===this._renderService.dimensions.canvasHeight){var u=this._bufferService.buffer.ydisp*this._currentRowHeight;this._lastScrollTop===u&&this._lastScrollTop===this._viewportElement.scrollTop&&this._renderService.dimensions.scaledCellHeight/window.devicePixelRatio===this._currentRowHeight||this._refresh(h)}else this._refresh(h)},t.prototype._onScroll=function(h){if(this._lastScrollTop=this._viewportElement.scrollTop,this._viewportElement.offsetParent)if(this._ignoreNextScrollEvent)this._ignoreNextScrollEvent=!1;else{var u=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._scrollLines(u,!0)}},t.prototype._bubbleScroll=function(h,u){var f=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(u<0&&0!==this._viewportElement.scrollTop||u>0&&f<this._lastRecordedBufferHeight)||(h.cancelable&&h.preventDefault(),!1)},t.prototype.onWheel=function(h){var u=this._getPixelsScrolled(h);return 0!==u&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(h,u))},t.prototype._getPixelsScrolled=function(h){if(0===h.deltaY)return 0;var u=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_LINE?u*=this._currentRowHeight:h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._currentRowHeight*this._bufferService.rows),u},t.prototype.getLinesScrolled=function(h){if(0===h.deltaY)return 0;var u=this._applyScrollModifier(h.deltaY,h);return h.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(u/=this._currentRowHeight+0,this._wheelPartialScroll+=u,u=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):h.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(u*=this._bufferService.rows),u},t.prototype._applyScrollModifier=function(h,u){var f=this._optionsService.options.fastScrollModifier;return"alt"===f&&u.altKey||"ctrl"===f&&u.ctrlKey||"shift"===f&&u.shiftKey?h*this._optionsService.options.fastScrollSensitivity*this._optionsService.options.scrollSensitivity:h*this._optionsService.options.scrollSensitivity},t.prototype.onTouchStart=function(h){this._lastTouchY=h.touches[0].pageY},t.prototype.onTouchMove=function(h){var u=this._lastTouchY-h.touches[0].pageY;return this._lastTouchY=h.touches[0].pageY,0!==u&&(this._viewportElement.scrollTop+=u,this._bubbleScroll(h,u))},v([g(3,w.IBufferService),g(4,w.IOptionsService),g(5,C.ICharSizeService),g(6,C.IRenderService)],t)}(y.Disposable);u.Viewport=E},function(h,u,f){"use strict";function i(h){return h.replace(/\r?\n/g,"\r")}function n(h,u){return u?"[200~"+h+"[201~":h}function o(h,u,f){h=n(h=i(h),f.decPrivateModes.bracketedPasteMode),f.triggerDataEvent(h,!0),u.value=""}function s(h,u,f){var d=f.getBoundingClientRect(),p=h.clientX-d.left-10,v=h.clientY-d.top-10;u.style.position="absolute",u.style.width="20px",u.style.height="20px",u.style.left=p+"px",u.style.top=v+"px",u.style.zIndex="1000",u.focus(),setTimeout((function(){u.style.position="",u.style.width="",u.style.height="",u.style.left="",u.style.top="",u.style.zIndex=""}),200)}Object.defineProperty(u,"__esModule",{value:!0}),u.rightClickHandler=u.moveTextAreaUnderMouseCursor=u.paste=u.handlePasteEvent=u.copyHandler=u.bracketTextForPaste=u.prepareTextForTerminal=void 0,u.prepareTextForTerminal=i,u.bracketTextForPaste=n,u.copyHandler=function(h,u){h.clipboardData&&h.clipboardData.setData("text/plain",u.selectionText),h.preventDefault()},u.handlePasteEvent=function(h,u,f){h.stopPropagation(),h.clipboardData&&o(h.clipboardData.getData("text/plain"),u,f)},u.paste=o,u.moveTextAreaUnderMouseCursor=s,u.rightClickHandler=function(h,u,f,d,p){s(h,u,f),p&&!d.isClickInSelection(h)&&d.selectWordAtCursor(h),u.value=d.selectionText,u.select()}},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.EscapeSequenceParser=u.VT500_TRANSITION_TABLE=u.TransitionTable=void 0;var v=f(2),g=f(15),y=f(20),m=f(21),C=f(23),w=function(){function e(h){this.table=new Uint8Array(h)}return e.prototype.setDefault=function(h,u){g.fill(this.table,h<<4|u)},e.prototype.add=function(h,u,f,d){this.table[u<<8|h]=f<<4|d},e.prototype.addMany=function(h,u,f,d){for(var p=0;p<h.length;p++)this.table[u<<8|h[p]]=f<<4|d},e}();u.TransitionTable=w,u.VT500_TRANSITION_TABLE=function(){var h=new w(4095),u=Array.apply(null,Array(256)).map((function(h,u){return u})),r=function(h,f){return u.slice(h,f)},f=r(32,127),d=r(0,24);d.push(25),d.push.apply(d,r(28,32));var p,v=r(0,14);for(p in h.setDefault(1,0),h.addMany(f,0,2,0),v)h.addMany([24,26,153,154],p,3,0),h.addMany(r(128,144),p,3,0),h.addMany(r(144,152),p,3,0),h.add(156,p,0,0),h.add(27,p,11,1),h.add(157,p,4,8),h.addMany([152,158,159],p,0,7),h.add(155,p,11,3),h.add(144,p,11,9);return h.addMany(d,0,3,0),h.addMany(d,1,3,1),h.add(127,1,0,1),h.addMany(d,8,0,8),h.addMany(d,3,3,3),h.add(127,3,0,3),h.addMany(d,4,3,4),h.add(127,4,0,4),h.addMany(d,6,3,6),h.addMany(d,5,3,5),h.add(127,5,0,5),h.addMany(d,2,3,2),h.add(127,2,0,2),h.add(93,1,4,8),h.addMany(f,8,5,8),h.add(127,8,5,8),h.addMany([156,27,24,26,7],8,6,0),h.addMany(r(28,32),8,0,8),h.addMany([88,94,95],1,0,7),h.addMany(f,7,0,7),h.addMany(d,7,0,7),h.add(156,7,0,0),h.add(127,7,0,7),h.add(91,1,11,3),h.addMany(r(64,127),3,7,0),h.addMany(r(48,60),3,8,4),h.addMany([60,61,62,63],3,9,4),h.addMany(r(48,60),4,8,4),h.addMany(r(64,127),4,7,0),h.addMany([60,61,62,63],4,0,6),h.addMany(r(32,64),6,0,6),h.add(127,6,0,6),h.addMany(r(64,127),6,0,0),h.addMany(r(32,48),3,9,5),h.addMany(r(32,48),5,9,5),h.addMany(r(48,64),5,0,6),h.addMany(r(64,127),5,7,0),h.addMany(r(32,48),4,9,5),h.addMany(r(32,48),1,9,2),h.addMany(r(32,48),2,9,2),h.addMany(r(48,127),2,10,0),h.addMany(r(48,80),1,10,0),h.addMany(r(81,88),1,10,0),h.addMany([89,90,92],1,10,0),h.addMany(r(96,127),1,10,0),h.add(80,1,11,9),h.addMany(d,9,0,9),h.add(127,9,0,9),h.addMany(r(28,32),9,0,9),h.addMany(r(32,48),9,9,12),h.addMany(r(48,60),9,8,10),h.addMany([60,61,62,63],9,9,10),h.addMany(d,11,0,11),h.addMany(r(32,128),11,0,11),h.addMany(r(28,32),11,0,11),h.addMany(d,10,0,10),h.add(127,10,0,10),h.addMany(r(28,32),10,0,10),h.addMany(r(48,60),10,8,10),h.addMany([60,61,62,63],10,0,11),h.addMany(r(32,48),10,9,12),h.addMany(d,12,0,12),h.add(127,12,0,12),h.addMany(r(28,32),12,0,12),h.addMany(r(32,48),12,9,12),h.addMany(r(48,64),12,0,11),h.addMany(r(64,127),12,12,13),h.addMany(r(64,127),10,12,13),h.addMany(r(64,127),9,12,13),h.addMany(d,13,13,13),h.addMany(f,13,13,13),h.add(127,13,0,13),h.addMany([27,156,24,26],13,14,0),h.add(160,0,2,0),h.add(160,8,5,8),h.add(160,6,0,6),h.add(160,11,0,11),h.add(160,13,13,13),h}();var E=function(h){function r(f){void 0===f&&(f=u.VT500_TRANSITION_TABLE);var d=h.call(this)||this;return d._transitions=f,d.initialState=0,d.currentState=d.initialState,d._params=new y.Params,d._params.addParam(0),d._collect=0,d.precedingCodepoint=0,d._printHandlerFb=function(h,u,f){},d._executeHandlerFb=function(h){},d._csiHandlerFb=function(h,u){},d._escHandlerFb=function(h){},d._errorHandlerFb=function(h){return h},d._printHandler=d._printHandlerFb,d._executeHandlers=Object.create(null),d._csiHandlers=Object.create(null),d._escHandlers=Object.create(null),d._oscParser=new m.OscParser,d._dcsParser=new C.DcsParser,d._errorHandler=d._errorHandlerFb,d.setEscHandler({final:"\\"},(function(){})),d}return p(r,h),r.prototype._identifier=function(h,u){void 0===u&&(u=[64,126]);var f=0;if(h.prefix){if(h.prefix.length>1)throw new Error("only one byte as prefix supported");if((f=h.prefix.charCodeAt(0))&&60>f||f>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(h.intermediates){if(h.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(var d=0;d<h.intermediates.length;++d){var p=h.intermediates.charCodeAt(d);if(32>p||p>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");f<<=8,f|=p}}if(1!==h.final.length)throw new Error("final must be a single byte");var v=h.final.charCodeAt(0);if(u[0]>v||v>u[1])throw new Error("final must be in range "+u[0]+" .. "+u[1]);return(f<<=8)|v},r.prototype.identToString=function(h){for(var u=[];h;)u.push(String.fromCharCode(255&h)),h>>=8;return u.reverse().join("")},r.prototype.dispose=function(){this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null),this._oscParser.dispose(),this._dcsParser.dispose()},r.prototype.setPrintHandler=function(h){this._printHandler=h},r.prototype.clearPrintHandler=function(){this._printHandler=this._printHandlerFb},r.prototype.addEscHandler=function(h,u){var f=this._identifier(h,[48,126]);void 0===this._escHandlers[f]&&(this._escHandlers[f]=[]);var d=this._escHandlers[f];return d.push(u),{dispose:function(){var h=d.indexOf(u);-1!==h&&d.splice(h,1)}}},r.prototype.setEscHandler=function(h,u){this._escHandlers[this._identifier(h,[48,126])]=[u]},r.prototype.clearEscHandler=function(h){this._escHandlers[this._identifier(h,[48,126])]&&delete this._escHandlers[this._identifier(h,[48,126])]},r.prototype.setEscHandlerFallback=function(h){this._escHandlerFb=h},r.prototype.setExecuteHandler=function(h,u){this._executeHandlers[h.charCodeAt(0)]=u},r.prototype.clearExecuteHandler=function(h){this._executeHandlers[h.charCodeAt(0)]&&delete this._executeHandlers[h.charCodeAt(0)]},r.prototype.setExecuteHandlerFallback=function(h){this._executeHandlerFb=h},r.prototype.addCsiHandler=function(h,u){var f=this._identifier(h);void 0===this._csiHandlers[f]&&(this._csiHandlers[f]=[]);var d=this._csiHandlers[f];return d.push(u),{dispose:function(){var h=d.indexOf(u);-1!==h&&d.splice(h,1)}}},r.prototype.setCsiHandler=function(h,u){this._csiHandlers[this._identifier(h)]=[u]},r.prototype.clearCsiHandler=function(h){this._csiHandlers[this._identifier(h)]&&delete this._csiHandlers[this._identifier(h)]},r.prototype.setCsiHandlerFallback=function(h){this._csiHandlerFb=h},r.prototype.addDcsHandler=function(h,u){return this._dcsParser.addHandler(this._identifier(h),u)},r.prototype.setDcsHandler=function(h,u){this._dcsParser.setHandler(this._identifier(h),u)},r.prototype.clearDcsHandler=function(h){this._dcsParser.clearHandler(this._identifier(h))},r.prototype.setDcsHandlerFallback=function(h){this._dcsParser.setHandlerFallback(h)},r.prototype.addOscHandler=function(h,u){return this._oscParser.addHandler(h,u)},r.prototype.setOscHandler=function(h,u){this._oscParser.setHandler(h,u)},r.prototype.clearOscHandler=function(h){this._oscParser.clearHandler(h)},r.prototype.setOscHandlerFallback=function(h){this._oscParser.setHandlerFallback(h)},r.prototype.setErrorHandler=function(h){this._errorHandler=h},r.prototype.clearErrorHandler=function(){this._errorHandler=this._errorHandlerFb},r.prototype.reset=function(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingCodepoint=0},r.prototype.parse=function(h,u){for(var f=0,d=0,p=this.currentState,v=this._oscParser,g=this._dcsParser,y=this._collect,m=this._params,C=this._transitions.table,w=0;w<u;++w){switch((d=C[p<<8|((f=h[w])<160?f:160)])>>4){case 2:for(var E=w+1;;++E){if(E>=u||(f=h[E])<32||f>126&&f<160){this._printHandler(h,w,E),w=E-1;break}if(++E>=u||(f=h[E])<32||f>126&&f<160){this._printHandler(h,w,E),w=E-1;break}if(++E>=u||(f=h[E])<32||f>126&&f<160){this._printHandler(h,w,E),w=E-1;break}if(++E>=u||(f=h[E])<32||f>126&&f<160){this._printHandler(h,w,E),w=E-1;break}}break;case 3:this._executeHandlers[f]?this._executeHandlers[f]():this._executeHandlerFb(f),this.precedingCodepoint=0;break;case 0:break;case 1:if(this._errorHandler({position:w,code:f,currentState:p,collect:y,params:m,abort:!1}).abort)return;break;case 7:for(var L=this._csiHandlers[y<<8|f],A=L?L.length-1:-1;A>=0&&!1===L[A](m);A--);A<0&&this._csiHandlerFb(y<<8|f,m),this.precedingCodepoint=0;break;case 8:do{switch(f){case 59:m.addParam(0);break;case 58:m.addSubParam(-1);break;default:m.addDigit(f-48)}}while(++w<u&&(f=h[w])>47&&f<60);w--;break;case 9:y<<=8,y|=f;break;case 10:for(var R=this._escHandlers[y<<8|f],k=R?R.length-1:-1;k>=0&&!1===R[k]();k--);k<0&&this._escHandlerFb(y<<8|f),this.precedingCodepoint=0;break;case 11:m.reset(),m.addParam(0),y=0;break;case 12:g.hook(y<<8|f,m);break;case 13:for(var x=w+1;;++x)if(x>=u||24===(f=h[x])||26===f||27===f||f>127&&f<160){g.put(h,w,x),w=x-1;break}break;case 14:g.unhook(24!==f&&26!==f),27===f&&(d|=1),m.reset(),m.addParam(0),y=0,this.precedingCodepoint=0;break;case 4:v.start();break;case 5:for(var D=w+1;;D++)if(D>=u||(f=h[D])<32||f>127&&f<=159){v.put(h,w,D),w=D-1;break}break;case 6:v.end(24!==f&&26!==f),27===f&&(d|=1),m.reset(),m.addParam(0),y=0,this.precedingCodepoint=0}p=15&d}this._collect=y,this.currentState=p},r}(v.Disposable);u.EscapeSequenceParser=E},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.Renderer=void 0;var y=f(40),m=f(46),C=f(47),w=f(48),E=f(28),L=f(2),A=f(5),R=f(1),k=f(24),x=f(0),D=1,O=function(h){function t(u,f,d,p,v,g,L,A,R){var k=h.call(this)||this;k._colors=u,k._screenElement=f,k._bufferService=v,k._charSizeService=g,k._optionsService=L,k._id=D++,k._onRequestRedraw=new x.EventEmitter;var O=k._optionsService.options.allowTransparency;return k._characterJoinerRegistry=new E.CharacterJoinerRegistry(k._bufferService),k._renderLayers=[new y.TextRenderLayer(k._screenElement,0,k._colors,k._characterJoinerRegistry,O,k._id,k._bufferService,L),new m.SelectionRenderLayer(k._screenElement,1,k._colors,k._id,k._bufferService,L),new w.LinkRenderLayer(k._screenElement,2,k._colors,k._id,d,p,k._bufferService,L),new C.CursorRenderLayer(k._screenElement,3,k._colors,k._id,k._onRequestRedraw,k._bufferService,L,A,R)],k.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},k._devicePixelRatio=window.devicePixelRatio,k._updateDimensions(),k.onOptionsChanged(),k}return p(t,h),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRequestRedraw.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._renderLayers.forEach((function(h){return h.dispose()})),h.prototype.dispose.call(this),k.removeTerminalFromCache(this._id)},t.prototype.onDevicePixelRatioChange=function(){this._devicePixelRatio!==window.devicePixelRatio&&(this._devicePixelRatio=window.devicePixelRatio,this.onResize(this._bufferService.cols,this._bufferService.rows))},t.prototype.setColors=function(h){var u=this;this._colors=h,this._renderLayers.forEach((function(h){h.setColors(u._colors),h.reset()}))},t.prototype.onResize=function(h,u){var f=this;this._updateDimensions(),this._renderLayers.forEach((function(h){return h.resize(f.dimensions)})),this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.onCharSizeChanged=function(){this.onResize(this._bufferService.cols,this._bufferService.rows)},t.prototype.onBlur=function(){this._runOperation((function(h){return h.onBlur()}))},t.prototype.onFocus=function(){this._runOperation((function(h){return h.onFocus()}))},t.prototype.onSelectionChanged=function(h,u,f){void 0===f&&(f=!1),this._runOperation((function(d){return d.onSelectionChanged(h,u,f)}))},t.prototype.onCursorMove=function(){this._runOperation((function(h){return h.onCursorMove()}))},t.prototype.onOptionsChanged=function(){this._runOperation((function(h){return h.onOptionsChanged()}))},t.prototype.clear=function(){this._runOperation((function(h){return h.reset()}))},t.prototype._runOperation=function(h){this._renderLayers.forEach((function(u){return h(u)}))},t.prototype.renderRows=function(h,u){this._renderLayers.forEach((function(f){return f.onGridChanged(h,u)}))},t.prototype._updateDimensions=function(){this._charSizeService.hasValidSize&&(this.dimensions.scaledCharWidth=Math.floor(this._charSizeService.width*window.devicePixelRatio),this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharTop=1===this._optionsService.options.lineHeight?0:Math.round((this.dimensions.scaledCellHeight-this.dimensions.scaledCharHeight)/2),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCharLeft=Math.floor(this._optionsService.options.letterSpacing/2),this.dimensions.scaledCanvasHeight=this._bufferService.rows*this.dimensions.scaledCellHeight,this.dimensions.scaledCanvasWidth=this._bufferService.cols*this.dimensions.scaledCellWidth,this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols)},t.prototype.registerCharacterJoiner=function(h){return this._characterJoinerRegistry.registerCharacterJoiner(h)},t.prototype.deregisterCharacterJoiner=function(h){return this._characterJoinerRegistry.deregisterCharacterJoiner(h)},v([g(4,R.IBufferService),g(5,A.ICharSizeService),g(6,R.IOptionsService),g(7,R.ICoreService),g(8,A.ICoreBrowserService)],t)}(L.Disposable);u.Renderer=O},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.TextRenderLayer=void 0;var v=f(41),g=f(13),y=f(6),m=f(3),C=f(28),w=f(4),E=function(h){function t(u,f,d,p,g,y,m,C){var E=h.call(this,u,"text",f,g,d,y,m,C)||this;return E._characterWidth=0,E._characterFont="",E._characterOverlapCache={},E._workCell=new w.CellData,E._state=new v.GridCache,E._characterJoinerRegistry=p,E}return p(t,h),t.prototype.resize=function(u){h.prototype.resize.call(this,u);var f=this._getFont(!1,!1);this._characterWidth===u.scaledCharWidth&&this._characterFont===f||(this._characterWidth=u.scaledCharWidth,this._characterFont=f,this._characterOverlapCache={}),this._state.clear(),this._state.resize(this._bufferService.cols,this._bufferService.rows)},t.prototype.reset=function(){this._state.clear(),this._clearAll()},t.prototype._forEachCell=function(h,u,f,d){for(var p=h;p<=u;p++)for(var v=p+this._bufferService.buffer.ydisp,g=this._bufferService.buffer.lines.get(v),y=f?f.getJoinedCharacters(v):[],w=0;w<this._bufferService.cols;w++){g.loadCell(w,this._workCell);var E=this._workCell,L=!1,A=w;if(0!==E.getWidth()){if(y.length>0&&w===y[0][0]){L=!0;var R=y.shift();E=new C.JoinedCellData(this._workCell,g.translateToString(!0,R[0],R[1]),R[1]-R[0]),A=R[1]-1}!L&&this._isOverlapping(E)&&A<g.length-1&&g.getCodePoint(A+1)===m.NULL_CELL_CODE&&(E.content&=-12582913,E.content|=2<<22),d(E,w,p),w=A}}},t.prototype._drawBackground=function(h,u){var f=this,d=this._ctx,p=this._bufferService.cols,v=0,g=0,m=null;d.save(),this._forEachCell(h,u,null,(function(h,u,C){var w=null;h.isInverse()?w=h.isFgDefault()?f._colors.foreground.css:h.isFgRGB()?"rgb("+y.AttributeData.toColorRGB(h.getFgColor()).join(",")+")":f._colors.ansi[h.getFgColor()].css:h.isBgRGB()?w="rgb("+y.AttributeData.toColorRGB(h.getBgColor()).join(",")+")":h.isBgPalette()&&(w=f._colors.ansi[h.getBgColor()].css),null===m&&(v=u,g=C),C!==g?(d.fillStyle=m||"",f._fillCells(v,g,p-v,1),v=u,g=C):m!==w&&(d.fillStyle=m||"",f._fillCells(v,g,u-v,1),v=u,g=C),m=w})),null!==m&&(d.fillStyle=m,this._fillCells(v,g,p-v,1)),d.restore()},t.prototype._drawForeground=function(h,u){var f=this;this._forEachCell(h,u,this._characterJoinerRegistry,(function(h,u,d){if(!h.isInvisible()&&(f._drawChars(h,u,d),h.isUnderline())){if(f._ctx.save(),h.isInverse())if(h.isBgDefault())f._ctx.fillStyle=f._colors.background.css;else if(h.isBgRGB())f._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(h.getBgColor()).join(",")+")";else{var p=h.getBgColor();f._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&p<8&&(p+=8),f._ctx.fillStyle=f._colors.ansi[p].css}else if(h.isFgDefault())f._ctx.fillStyle=f._colors.foreground.css;else if(h.isFgRGB())f._ctx.fillStyle="rgb("+y.AttributeData.toColorRGB(h.getFgColor()).join(",")+")";else{var v=h.getFgColor();f._optionsService.options.drawBoldTextInBrightColors&&h.isBold()&&v<8&&(v+=8),f._ctx.fillStyle=f._colors.ansi[v].css}f._fillBottomLineAtCells(u,d,h.getWidth()),f._ctx.restore()}}))},t.prototype.onGridChanged=function(h,u){0!==this._state.cache.length&&(this._charAtlas&&this._charAtlas.beginFrame(),this._clearCells(0,h,this._bufferService.cols,u-h+1),this._drawBackground(h,u),this._drawForeground(h,u))},t.prototype.onOptionsChanged=function(){this._setTransparency(this._optionsService.options.allowTransparency)},t.prototype._isOverlapping=function(h){if(1!==h.getWidth())return!1;if(h.getCode()<256)return!1;var u=h.getChars();if(this._characterOverlapCache.hasOwnProperty(u))return this._characterOverlapCache[u];this._ctx.save(),this._ctx.font=this._characterFont;var f=Math.floor(this._ctx.measureText(u).width)>this._characterWidth;return this._ctx.restore(),this._characterOverlapCache[u]=f,f},t}(g.BaseRenderLayer);u.TextRenderLayer=E},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.GridCache=void 0;var d=function(){function e(){this.cache=[]}return e.prototype.resize=function(h,u){for(var f=0;f<h;f++){this.cache.length<=f&&this.cache.push([]);for(var d=this.cache[f].length;d<u;d++)this.cache[f].push(void 0);this.cache[f].length=u}this.cache.length=h},e.prototype.clear=function(){for(var h=0;h<this.cache.length;h++)for(var u=0;u<this.cache[h].length;u++)this.cache[h][u]=void 0},e}();u.GridCache=d},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.NoneCharAtlas=u.DynamicCharAtlas=u.getGlyphCacheKey=void 0;var v=f(9),g=f(43),y=f(26),m=f(45),C=f(11),w=f(27),E=f(10),L={css:"rgba(0, 0, 0, 0)",rgba:0};function _(h){return h.code<<21|h.bg<<12|h.fg<<3|(h.bold?0:4)+(h.dim?0:2)+(h.italic?0:1)}u.getGlyphCacheKey=_;var A=function(h){function t(u,f){var d=h.call(this)||this;d._config=f,d._drawToCacheCount=0,d._glyphsWaitingOnBitmap=[],d._bitmapCommitTimeout=null,d._bitmap=null,d._cacheCanvas=u.createElement("canvas"),d._cacheCanvas.width=1024,d._cacheCanvas.height=1024,d._cacheCtx=w.throwIfFalsy(d._cacheCanvas.getContext("2d",{alpha:!0}));var p=u.createElement("canvas");p.width=d._config.scaledCharWidth,p.height=d._config.scaledCharHeight,d._tmpCtx=w.throwIfFalsy(p.getContext("2d",{alpha:d._config.allowTransparency})),d._width=Math.floor(1024/d._config.scaledCharWidth),d._height=Math.floor(1024/d._config.scaledCharHeight);var v=d._width*d._height;return d._cacheMap=new m.LRUMap(v),d._cacheMap.prealloc(v),d}return p(t,h),t.prototype.dispose=function(){null!==this._bitmapCommitTimeout&&(window.clearTimeout(this._bitmapCommitTimeout),this._bitmapCommitTimeout=null)},t.prototype.beginFrame=function(){this._drawToCacheCount=0},t.prototype.draw=function(h,u,f,d){if(32===u.code)return!0;if(!this._canCache(u))return!1;var p=_(u),v=this._cacheMap.get(p);if(null!=v)return this._drawFromCache(h,v,f,d),!0;if(this._drawToCacheCount<100){var g=void 0;g=this._cacheMap.size<this._cacheMap.capacity?this._cacheMap.size:this._cacheMap.peek().index;var y=this._drawToCache(u,g);return this._cacheMap.set(p,y),this._drawFromCache(h,y,f,d),!0}return!1},t.prototype._canCache=function(h){return h.code<256},t.prototype._toCoordinateX=function(h){return h%this._width*this._config.scaledCharWidth},t.prototype._toCoordinateY=function(h){return Math.floor(h/this._width)*this._config.scaledCharHeight},t.prototype._drawFromCache=function(h,u,f,d){if(!u.isEmpty){var p=this._toCoordinateX(u.index),v=this._toCoordinateY(u.index);h.drawImage(u.inBitmap?this._bitmap:this._cacheCanvas,p,v,this._config.scaledCharWidth,this._config.scaledCharHeight,f,d,this._config.scaledCharWidth,this._config.scaledCharHeight)}},t.prototype._getColorFromAnsiIndex=function(h){return h<this._config.colors.ansi.length?this._config.colors.ansi[h]:y.DEFAULT_ANSI_COLORS[h]},t.prototype._getBackgroundColor=function(h){return this._config.allowTransparency?L:h.bg===v.INVERTED_DEFAULT_COLOR?this._config.colors.foreground:h.bg<256?this._getColorFromAnsiIndex(h.bg):this._config.colors.background},t.prototype._getForegroundColor=function(h){return h.fg===v.INVERTED_DEFAULT_COLOR?E.color.opaque(this._config.colors.background):h.fg<256?this._getColorFromAnsiIndex(h.fg):this._config.colors.foreground},t.prototype._drawToCache=function(h,u){this._drawToCacheCount++,this._tmpCtx.save();var f=this._getBackgroundColor(h);this._tmpCtx.globalCompositeOperation="copy",this._tmpCtx.fillStyle=f.css,this._tmpCtx.fillRect(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),this._tmpCtx.globalCompositeOperation="source-over";var d=h.bold?this._config.fontWeightBold:this._config.fontWeight,p=h.italic?"italic":"";this._tmpCtx.font=p+" "+d+" "+this._config.fontSize*this._config.devicePixelRatio+"px "+this._config.fontFamily,this._tmpCtx.textBaseline="middle",this._tmpCtx.fillStyle=this._getForegroundColor(h).css,h.dim&&(this._tmpCtx.globalAlpha=v.DIM_OPACITY),this._tmpCtx.fillText(h.chars,0,this._config.scaledCharHeight/2),this._tmpCtx.restore();var g=this._tmpCtx.getImageData(0,0,this._config.scaledCharWidth,this._config.scaledCharHeight),y=!1;this._config.allowTransparency||(y=function(h,u){for(var f=!0,d=u.rgba>>>24,p=u.rgba>>>16&255,v=u.rgba>>>8&255,g=0;g<h.data.length;g+=4)h.data[g]===d&&h.data[g+1]===p&&h.data[g+2]===v?h.data[g+3]=0:f=!1;return f}(g,f));var m=this._toCoordinateX(u),C=this._toCoordinateY(u);this._cacheCtx.putImageData(g,m,C);var w={index:u,isEmpty:y,inBitmap:!1};return this._addGlyphToBitmap(w),w},t.prototype._addGlyphToBitmap=function(h){var u=this;!("createImageBitmap"in window)||C.isFirefox||C.isSafari||(this._glyphsWaitingOnBitmap.push(h),null===this._bitmapCommitTimeout&&(this._bitmapCommitTimeout=window.setTimeout((function(){return u._generateBitmap()}),100)))},t.prototype._generateBitmap=function(){var h=this,u=this._glyphsWaitingOnBitmap;this._glyphsWaitingOnBitmap=[],window.createImageBitmap(this._cacheCanvas).then((function(f){h._bitmap=f;for(var d=0;d<u.length;d++)u[d].inBitmap=!0})),this._bitmapCommitTimeout=null},t}(g.BaseCharAtlas);u.DynamicCharAtlas=A;var R=function(h){function t(u,f){return h.call(this)||this}return p(t,h),t.prototype.draw=function(h,u,f,d){return!1},t}(g.BaseCharAtlas);u.NoneCharAtlas=R},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.BaseCharAtlas=void 0;var d=function(){function e(){this._didWarmUp=!1}return e.prototype.dispose=function(){},e.prototype.warmUp=function(){this._didWarmUp||(this._doWarmUp(),this._didWarmUp=!0)},e.prototype._doWarmUp=function(){},e.prototype.beginFrame=function(){},e}();u.BaseCharAtlas=d},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.ColorContrastCache=void 0;var d=function(){function e(){this._color={},this._rgba={}}return e.prototype.clear=function(){this._color={},this._rgba={}},e.prototype.setCss=function(h,u,f){this._rgba[h]||(this._rgba[h]={}),this._rgba[h][u]=f},e.prototype.getCss=function(h,u){return this._rgba[h]?this._rgba[h][u]:void 0},e.prototype.setColor=function(h,u,f){this._color[h]||(this._color[h]={}),this._color[h][u]=f},e.prototype.getColor=function(h,u){return this._color[h]?this._color[h][u]:void 0},e}();u.ColorContrastCache=d},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.LRUMap=void 0;var d=function(){function e(h){this.capacity=h,this._map={},this._head=null,this._tail=null,this._nodePool=[],this.size=0}return e.prototype._unlinkNode=function(h){var u=h.prev,f=h.next;h===this._head&&(this._head=f),h===this._tail&&(this._tail=u),null!==u&&(u.next=f),null!==f&&(f.prev=u)},e.prototype._appendNode=function(h){var u=this._tail;null!==u&&(u.next=h),h.prev=u,h.next=null,this._tail=h,null===this._head&&(this._head=h)},e.prototype.prealloc=function(h){for(var u=this._nodePool,f=0;f<h;f++)u.push({prev:null,next:null,key:null,value:null})},e.prototype.get=function(h){var u=this._map[h];return void 0!==u?(this._unlinkNode(u),this._appendNode(u),u.value):null},e.prototype.peekValue=function(h){var u=this._map[h];return void 0!==u?u.value:null},e.prototype.peek=function(){var h=this._head;return null===h?null:h.value},e.prototype.set=function(h,u){var f=this._map[h];if(void 0!==f)f=this._map[h],this._unlinkNode(f),f.value=u;else if(this.size>=this.capacity)f=this._head,this._unlinkNode(f),delete this._map[f.key],f.key=h,f.value=u,this._map[h]=f;else{var d=this._nodePool;d.length>0?((f=d.pop()).key=h,f.value=u):f={prev:null,next:null,key:h,value:u},this._map[h]=f,this.size++}this._appendNode(f)},e}();u.LRUMap=d},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.SelectionRenderLayer=void 0;var v=function(h){function t(u,f,d,p,v,g){var y=h.call(this,u,"selection",f,!0,d,p,v,g)||this;return y._clearState(),y}return p(t,h),t.prototype._clearState=function(){this._state={start:void 0,end:void 0,columnSelectMode:void 0,ydisp:void 0}},t.prototype.resize=function(u){h.prototype.resize.call(this,u),this._clearState()},t.prototype.reset=function(){this._state.start&&this._state.end&&(this._clearState(),this._clearAll())},t.prototype.onSelectionChanged=function(h,u,f){if(this._didStateChange(h,u,f,this._bufferService.buffer.ydisp))if(this._clearAll(),h&&u){var d=h[1]-this._bufferService.buffer.ydisp,p=u[1]-this._bufferService.buffer.ydisp,v=Math.max(d,0),g=Math.min(p,this._bufferService.rows-1);if(!(v>=this._bufferService.rows||g<0)){if(this._ctx.fillStyle=this._colors.selection.css,f){var y=h[0],m=u[0]-y,C=g-v+1;this._fillCells(y,v,m,C)}else{y=d===v?h[0]:0;var w=v===g?u[0]:this._bufferService.cols;this._fillCells(y,v,w-y,1);var E=Math.max(g-v-1,0);if(this._fillCells(0,v+1,this._bufferService.cols,E),v!==g){var L=p===g?u[0]:this._bufferService.cols;this._fillCells(0,g,L,1)}}this._state.start=[h[0],h[1]],this._state.end=[u[0],u[1]],this._state.columnSelectMode=f,this._state.ydisp=this._bufferService.buffer.ydisp}}else this._clearState()},t.prototype._didStateChange=function(h,u,f,d){return!this._areCoordinatesEqual(h,this._state.start)||!this._areCoordinatesEqual(u,this._state.end)||f!==this._state.columnSelectMode||d!==this._state.ydisp},t.prototype._areCoordinatesEqual=function(h,u){return!(!h||!u)&&h[0]===u[0]&&h[1]===u[1]},t}(f(13).BaseRenderLayer);u.SelectionRenderLayer=v},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.CursorRenderLayer=void 0;var v=f(13),g=f(4),y=function(h){function t(u,f,d,p,v,y,m,C,w){var E=h.call(this,u,"cursor",f,!0,d,p,y,m)||this;return E._onRequestRedraw=v,E._coreService=C,E._coreBrowserService=w,E._cell=new g.CellData,E._state={x:0,y:0,isFocused:!1,style:"",width:0},E._cursorRenderers={bar:E._renderBarCursor.bind(E),block:E._renderBlockCursor.bind(E),underline:E._renderUnderlineCursor.bind(E)},E}return p(t,h),t.prototype.resize=function(u){h.prototype.resize.call(this,u),this._state={x:0,y:0,isFocused:!1,style:"",width:0}},t.prototype.reset=function(){this._clearCursor(),this._cursorBlinkStateManager&&(this._cursorBlinkStateManager.dispose(),this._cursorBlinkStateManager=void 0,this.onOptionsChanged())},t.prototype.onBlur=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.pause(),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onFocus=function(){this._cursorBlinkStateManager?this._cursorBlinkStateManager.resume():this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onOptionsChanged=function(){var h,u=this;this._optionsService.options.cursorBlink?this._cursorBlinkStateManager||(this._cursorBlinkStateManager=new m(this._coreBrowserService.isFocused,(function(){u._render(!0)}))):(null===(h=this._cursorBlinkStateManager)||void 0===h||h.dispose(),this._cursorBlinkStateManager=void 0),this._onRequestRedraw.fire({start:this._bufferService.buffer.y,end:this._bufferService.buffer.y})},t.prototype.onCursorMove=function(){this._cursorBlinkStateManager&&this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype.onGridChanged=function(h,u){!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isPaused?this._render(!1):this._cursorBlinkStateManager.restartBlinkAnimation()},t.prototype._render=function(h){if(this._coreService.isCursorInitialized&&!this._coreService.isCursorHidden){var u=this._bufferService.buffer.ybase+this._bufferService.buffer.y,f=u-this._bufferService.buffer.ydisp;if(f<0||f>=this._bufferService.rows)this._clearCursor();else{var d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1);if(this._bufferService.buffer.lines.get(u).loadCell(d,this._cell),void 0!==this._cell.content){if(!this._coreBrowserService.isFocused){this._clearCursor(),this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css;var p=this._optionsService.options.cursorStyle;return p&&"block"!==p?this._cursorRenderers[p](d,f,this._cell):this._renderBlurCursor(d,f,this._cell),this._ctx.restore(),this._state.x=d,this._state.y=f,this._state.isFocused=!1,this._state.style=p,void(this._state.width=this._cell.getWidth())}if(!this._cursorBlinkStateManager||this._cursorBlinkStateManager.isCursorVisible){if(this._state){if(this._state.x===d&&this._state.y===f&&this._state.isFocused===this._coreBrowserService.isFocused&&this._state.style===this._optionsService.options.cursorStyle&&this._state.width===this._cell.getWidth())return;this._clearCursor()}this._ctx.save(),this._cursorRenderers[this._optionsService.options.cursorStyle||"block"](d,f,this._cell),this._ctx.restore(),this._state.x=d,this._state.y=f,this._state.isFocused=!1,this._state.style=this._optionsService.options.cursorStyle,this._state.width=this._cell.getWidth()}else this._clearCursor()}}}else this._clearCursor()},t.prototype._clearCursor=function(){this._state&&(this._clearCells(this._state.x,this._state.y,this._state.width,1),this._state={x:0,y:0,isFocused:!1,style:"",width:0})},t.prototype._renderBarCursor=function(h,u,f){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillLeftLineAtCell(h,u,this._optionsService.options.cursorWidth),this._ctx.restore()},t.prototype._renderBlockCursor=function(h,u,f){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillCells(h,u,f.getWidth(),1),this._ctx.fillStyle=this._colors.cursorAccent.css,this._fillCharTrueColor(f,h,u),this._ctx.restore()},t.prototype._renderUnderlineCursor=function(h,u,f){this._ctx.save(),this._ctx.fillStyle=this._colors.cursor.css,this._fillBottomLineAtCells(h,u),this._ctx.restore()},t.prototype._renderBlurCursor=function(h,u,f){this._ctx.save(),this._ctx.strokeStyle=this._colors.cursor.css,this._strokeRectAtCell(h,u,f.getWidth(),1),this._ctx.restore()},t}(v.BaseRenderLayer);u.CursorRenderLayer=y;var m=function(){function e(h,u){this._renderCallback=u,this.isCursorVisible=!0,h&&this._restartInterval()}return Object.defineProperty(e.prototype,"isPaused",{get:function(){return!(this._blinkStartTimeout||this._blinkInterval)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.restartBlinkAnimation=function(){var h=this;this.isPaused||(this._animationTimeRestarted=Date.now(),this.isCursorVisible=!0,this._animationFrame||(this._animationFrame=window.requestAnimationFrame((function(){h._renderCallback(),h._animationFrame=void 0}))))},e.prototype._restartInterval=function(h){var u=this;void 0===h&&(h=600),this._blinkInterval&&window.clearInterval(this._blinkInterval),this._blinkStartTimeout=window.setTimeout((function(){if(u._animationTimeRestarted){var h=600-(Date.now()-u._animationTimeRestarted);if(u._animationTimeRestarted=void 0,h>0)return void u._restartInterval(h)}u.isCursorVisible=!1,u._animationFrame=window.requestAnimationFrame((function(){u._renderCallback(),u._animationFrame=void 0})),u._blinkInterval=window.setInterval((function(){if(u._animationTimeRestarted){var h=600-(Date.now()-u._animationTimeRestarted);return u._animationTimeRestarted=void 0,void u._restartInterval(h)}u.isCursorVisible=!u.isCursorVisible,u._animationFrame=window.requestAnimationFrame((function(){u._renderCallback(),u._animationFrame=void 0}))}),600)}),h)},e.prototype.pause=function(){this.isCursorVisible=!0,this._blinkInterval&&(window.clearInterval(this._blinkInterval),this._blinkInterval=void 0),this._blinkStartTimeout&&(window.clearTimeout(this._blinkStartTimeout),this._blinkStartTimeout=void 0),this._animationFrame&&(window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)},e.prototype.resume=function(){this.pause(),this._animationTimeRestarted=void 0,this._restartInterval(),this.restartBlinkAnimation()},e}()},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.LinkRenderLayer=void 0;var v=f(13),g=f(9),y=f(25),m=function(h){function t(u,f,d,p,v,g,y,m){var C=h.call(this,u,"link",f,!0,d,p,y,m)||this;return v.onShowLinkUnderline((function(h){return C._onShowLinkUnderline(h)})),v.onHideLinkUnderline((function(h){return C._onHideLinkUnderline(h)})),g.onShowLinkUnderline((function(h){return C._onShowLinkUnderline(h)})),g.onHideLinkUnderline((function(h){return C._onHideLinkUnderline(h)})),C}return p(t,h),t.prototype.resize=function(u){h.prototype.resize.call(this,u),this._state=void 0},t.prototype.reset=function(){this._clearCurrentLink()},t.prototype._clearCurrentLink=function(){if(this._state){this._clearCells(this._state.x1,this._state.y1,this._state.cols-this._state.x1,1);var h=this._state.y2-this._state.y1-1;h>0&&this._clearCells(0,this._state.y1+1,this._state.cols,h),this._clearCells(0,this._state.y2,this._state.x2,1),this._state=void 0}},t.prototype._onShowLinkUnderline=function(h){if(h.fg===g.INVERTED_DEFAULT_COLOR?this._ctx.fillStyle=this._colors.background.css:h.fg&&y.is256Color(h.fg)?this._ctx.fillStyle=this._colors.ansi[h.fg].css:this._ctx.fillStyle=this._colors.foreground.css,h.y1===h.y2)this._fillBottomLineAtCells(h.x1,h.y1,h.x2-h.x1);else{this._fillBottomLineAtCells(h.x1,h.y1,h.cols-h.x1);for(var u=h.y1+1;u<h.y2;u++)this._fillBottomLineAtCells(0,u,h.cols);this._fillBottomLineAtCells(0,h.y2,h.x2)}this._state=h},t.prototype._onHideLinkUnderline=function(h){this._clearCurrentLink()},t}(v.BaseRenderLayer);u.LinkRenderLayer=m},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.MouseZone=u.Linkifier=void 0;var v=f(0),g=f(1),y=function(){function e(h,u,f){this._bufferService=h,this._logService=u,this._unicodeService=f,this._linkMatchers=[],this._nextLinkMatcherId=0,this._onShowLinkUnderline=new v.EventEmitter,this._onHideLinkUnderline=new v.EventEmitter,this._onLinkTooltip=new v.EventEmitter,this._rowsToLinkify={start:void 0,end:void 0}}return Object.defineProperty(e.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onLinkTooltip",{get:function(){return this._onLinkTooltip.event},enumerable:!1,configurable:!0}),e.prototype.attachToDom=function(h,u){this._element=h,this._mouseZoneManager=u},e.prototype.linkifyRows=function(h,u){var f=this;this._mouseZoneManager&&(void 0===this._rowsToLinkify.start||void 0===this._rowsToLinkify.end?(this._rowsToLinkify.start=h,this._rowsToLinkify.end=u):(this._rowsToLinkify.start=Math.min(this._rowsToLinkify.start,h),this._rowsToLinkify.end=Math.max(this._rowsToLinkify.end,u)),this._mouseZoneManager.clearAll(h,u),this._rowsTimeoutId&&clearTimeout(this._rowsTimeoutId),this._rowsTimeoutId=setTimeout((function(){return f._linkifyRows()}),e._timeBeforeLatency))},e.prototype._linkifyRows=function(){this._rowsTimeoutId=void 0;var h=this._bufferService.buffer;if(void 0!==this._rowsToLinkify.start&&void 0!==this._rowsToLinkify.end){var u=h.ydisp+this._rowsToLinkify.start;if(!(u>=h.lines.length)){for(var f=h.ydisp+Math.min(this._rowsToLinkify.end,this._bufferService.rows)+1,d=Math.ceil(2e3/this._bufferService.cols),p=this._bufferService.buffer.iterator(!1,u,f,d,d);p.hasNext();)for(var v=p.next(),g=0;g<this._linkMatchers.length;g++)this._doLinkifyRow(v.range.first,v.content,this._linkMatchers[g]);this._rowsToLinkify.start=void 0,this._rowsToLinkify.end=void 0}}else this._logService.debug("_rowToLinkify was unset before _linkifyRows was called")},e.prototype.registerLinkMatcher=function(h,u,f){if(void 0===f&&(f={}),!u)throw new Error("handler must be defined");var d={id:this._nextLinkMatcherId++,regex:h,handler:u,matchIndex:f.matchIndex,validationCallback:f.validationCallback,hoverTooltipCallback:f.tooltipCallback,hoverLeaveCallback:f.leaveCallback,willLinkActivate:f.willLinkActivate,priority:f.priority||0};return this._addLinkMatcherToList(d),d.id},e.prototype._addLinkMatcherToList=function(h){if(0!==this._linkMatchers.length){for(var u=this._linkMatchers.length-1;u>=0;u--)if(h.priority<=this._linkMatchers[u].priority)return void this._linkMatchers.splice(u+1,0,h);this._linkMatchers.splice(0,0,h)}else this._linkMatchers.push(h)},e.prototype.deregisterLinkMatcher=function(h){for(var u=0;u<this._linkMatchers.length;u++)if(this._linkMatchers[u].id===h)return this._linkMatchers.splice(u,1),!0;return!1},e.prototype._doLinkifyRow=function(h,u,f){for(var d,p=this,v=new RegExp(f.regex.source,(f.regex.flags||"")+"g"),g=-1,a=function(){var m=d["number"!=typeof f.matchIndex?0:f.matchIndex];if(!m)return y._logService.debug("match found without corresponding matchIndex",d,f),"break";if(g=u.indexOf(m,g+1),v.lastIndex=g+m.length,g<0)return"break";var C=y._bufferService.buffer.stringIndexToBufferIndex(h,g);if(C[0]<0)return"break";var w=y._bufferService.buffer.lines.get(C[0]);if(!w)return"break";var E=w.getFg(C[1]),L=E?E>>9&511:void 0;f.validationCallback?f.validationCallback(m,(function(h){p._rowsTimeoutId||h&&p._addLink(C[1],C[0]-p._bufferService.buffer.ydisp,m,f,L)})):y._addLink(C[1],C[0]-y._bufferService.buffer.ydisp,m,f,L)},y=this;null!==(d=v.exec(u))&&"break"!==a(););},e.prototype._addLink=function(h,u,f,d,p){var v=this;if(this._mouseZoneManager&&this._element){var g=this._unicodeService.getStringCellWidth(f),y=h%this._bufferService.cols,m=u+Math.floor(h/this._bufferService.cols),C=(y+g)%this._bufferService.cols,w=m+Math.floor((y+g)/this._bufferService.cols);0===C&&(C=this._bufferService.cols,w--),this._mouseZoneManager.add(new c(y+1,m+1,C+1,w+1,(function(h){if(d.handler)return d.handler(h,f);var u=window.open();u?(u.opener=null,u.location.href=f):console.warn("Opening link blocked as opener could not be cleared")}),(function(){v._onShowLinkUnderline.fire(v._createLinkHoverEvent(y,m,C,w,p)),v._element.classList.add("xterm-cursor-pointer")}),(function(h){v._onLinkTooltip.fire(v._createLinkHoverEvent(y,m,C,w,p)),d.hoverTooltipCallback&&d.hoverTooltipCallback(h,f,{start:{x:y,y:m},end:{x:C,y:w}})}),(function(){v._onHideLinkUnderline.fire(v._createLinkHoverEvent(y,m,C,w,p)),v._element.classList.remove("xterm-cursor-pointer"),d.hoverLeaveCallback&&d.hoverLeaveCallback()}),(function(h){return!d.willLinkActivate||d.willLinkActivate(h,f)})))}},e.prototype._createLinkHoverEvent=function(h,u,f,d,p){return{x1:h,y1:u,x2:f,y2:d,cols:this._bufferService.cols,fg:p}},e._timeBeforeLatency=200,e=d([p(0,g.IBufferService),p(1,g.ILogService),p(2,g.IUnicodeService)],e)}();u.Linkifier=y;var c=function(h,u,f,d,p,v,g,y,m){this.x1=h,this.y1=u,this.x2=f,this.y2=d,this.clickCallback=p,this.hoverCallback=v,this.tooltipCallback=g,this.leaveCallback=y,this.willLinkActivate=m};u.MouseZone=c},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.SelectionService=void 0;var y=f(11),m=f(51),C=f(4),w=f(0),E=f(5),L=f(1),A=f(29),R=f(52),k=f(2),x=String.fromCharCode(160),D=new RegExp(x,"g"),O=function(h){function t(u,f,d,p,v,g,y){var E=h.call(this)||this;return E._element=u,E._screenElement=f,E._bufferService=d,E._coreService=p,E._mouseService=v,E._optionsService=g,E._renderService=y,E._dragScrollAmount=0,E._enabled=!0,E._workCell=new C.CellData,E._mouseDownTimeStamp=0,E._onLinuxMouseSelection=E.register(new w.EventEmitter),E._onRedrawRequest=E.register(new w.EventEmitter),E._onSelectionChange=E.register(new w.EventEmitter),E._onRequestScrollLines=E.register(new w.EventEmitter),E._mouseMoveListener=function(h){return E._onMouseMove(h)},E._mouseUpListener=function(h){return E._onMouseUp(h)},E._coreService.onUserInput((function(){E.hasSelection&&E.clearSelection()})),E._trimListener=E._bufferService.buffer.lines.onTrim((function(h){return E._onTrim(h)})),E.register(E._bufferService.buffers.onBufferActivate((function(h){return E._onBufferActivate(h)}))),E.enable(),E._model=new m.SelectionModel(E._bufferService),E._activeSelectionMode=0,E}return p(t,h),Object.defineProperty(t.prototype,"onLinuxMouseSelection",{get:function(){return this._onLinuxMouseSelection.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return this._onRedrawRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onSelectionChange",{get:function(){return this._onSelectionChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRequestScrollLines",{get:function(){return this._onRequestScrollLines.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._removeMouseDownListeners()},t.prototype.reset=function(){this.clearSelection()},t.prototype.disable=function(){this.clearSelection(),this._enabled=!1},t.prototype.enable=function(){this._enabled=!0},Object.defineProperty(t.prototype,"selectionStart",{get:function(){return this._model.finalSelectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionEnd",{get:function(){return this._model.finalSelectionEnd},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasSelection",{get:function(){var h=this._model.finalSelectionStart,u=this._model.finalSelectionEnd;return!(!h||!u||h[0]===u[0]&&h[1]===u[1])},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectionText",{get:function(){var h=this._model.finalSelectionStart,u=this._model.finalSelectionEnd;if(!h||!u)return"";var f=this._bufferService.buffer,d=[];if(3===this._activeSelectionMode){if(h[0]===u[0])return"";for(var p=h[1];p<=u[1];p++){var v=f.translateBufferLineToString(p,!0,h[0],u[0]);d.push(v)}}else{var g=h[1]===u[1]?u[0]:void 0;for(d.push(f.translateBufferLineToString(h[1],!0,h[0],g)),p=h[1]+1;p<=u[1]-1;p++){var m=f.lines.get(p);v=f.translateBufferLineToString(p,!0),m&&m.isWrapped?d[d.length-1]+=v:d.push(v)}h[1]!==u[1]&&(m=f.lines.get(u[1]),v=f.translateBufferLineToString(u[1],!0,0,u[0]),m&&m.isWrapped?d[d.length-1]+=v:d.push(v))}return d.map((function(h){return h.replace(D," ")})).join(y.isWindows?"\r\n":"\n")},enumerable:!1,configurable:!0}),t.prototype.clearSelection=function(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()},t.prototype.refresh=function(h){var u=this;this._refreshAnimationFrame||(this._refreshAnimationFrame=window.requestAnimationFrame((function(){return u._refresh()}))),y.isLinux&&h&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)},t.prototype._refresh=function(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:3===this._activeSelectionMode})},t.prototype.isClickInSelection=function(h){var u=this._getMouseBufferCoords(h),f=this._model.finalSelectionStart,d=this._model.finalSelectionEnd;return!!(f&&d&&u)&&this._areCoordsInSelection(u,f,d)},t.prototype._areCoordsInSelection=function(h,u,f){return h[1]>u[1]&&h[1]<f[1]||u[1]===f[1]&&h[1]===u[1]&&h[0]>=u[0]&&h[0]<f[0]||u[1]<f[1]&&h[1]===f[1]&&h[0]<f[0]||u[1]<f[1]&&h[1]===u[1]&&h[0]>=u[0]},t.prototype.selectWordAtCursor=function(h){var u=this._getMouseBufferCoords(h);u&&(this._selectWordAt(u,!1),this._model.selectionEnd=void 0,this.refresh(!0))},t.prototype.selectAll=function(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()},t.prototype.selectLines=function(h,u){this._model.clearSelection(),h=Math.max(h,0),u=Math.min(u,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,h],this._model.selectionEnd=[this._bufferService.cols,u],this.refresh(),this._onSelectionChange.fire()},t.prototype._onTrim=function(h){this._model.onTrim(h)&&this.refresh()},t.prototype._getMouseBufferCoords=function(h){var u=this._mouseService.getCoords(h,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(u)return u[0]--,u[1]--,u[1]+=this._bufferService.buffer.ydisp,u},t.prototype._getMouseEventScrollAmount=function(h){var u=A.getCoordsRelativeToElement(h,this._screenElement)[1],f=this._renderService.dimensions.canvasHeight;return u>=0&&u<=f?0:(u>f&&(u-=f),u=Math.min(Math.max(u,-50),50),(u/=50)/Math.abs(u)+Math.round(14*u))},t.prototype.shouldForceSelection=function(h){return y.isMac?h.altKey&&this._optionsService.options.macOptionClickForcesSelection:h.shiftKey},t.prototype.onMouseDown=function(h){if(this._mouseDownTimeStamp=h.timeStamp,(2!==h.button||!this.hasSelection)&&0===h.button){if(!this._enabled){if(!this.shouldForceSelection(h))return;h.stopPropagation()}h.preventDefault(),this._dragScrollAmount=0,this._enabled&&h.shiftKey?this._onIncrementalClick(h):1===h.detail?this._onSingleClick(h):2===h.detail?this._onDoubleClick(h):3===h.detail&&this._onTripleClick(h),this._addMouseDownListeners(),this.refresh(!0)}},t.prototype._addMouseDownListeners=function(){var h=this;this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=window.setInterval((function(){return h._dragScroll()}),50)},t.prototype._removeMouseDownListeners=function(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0},t.prototype._onIncrementalClick=function(h){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(h))},t.prototype._onSingleClick=function(h){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(h)?3:0,this._model.selectionStart=this._getMouseBufferCoords(h),this._model.selectionStart){this._model.selectionEnd=void 0;var u=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);u&&u.length!==this._model.selectionStart[0]&&0===u.hasWidth(this._model.selectionStart[0])&&this._model.selectionStart[0]++}},t.prototype._onDoubleClick=function(h){var u=this._getMouseBufferCoords(h);u&&(this._activeSelectionMode=1,this._selectWordAt(u,!0))},t.prototype._onTripleClick=function(h){var u=this._getMouseBufferCoords(h);u&&(this._activeSelectionMode=2,this._selectLineAt(u[1]))},t.prototype.shouldColumnSelect=function(h){return h.altKey&&!(y.isMac&&this._optionsService.options.macOptionClickForcesSelection)},t.prototype._onMouseMove=function(h){if(h.stopImmediatePropagation(),this._model.selectionStart){var u=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(h),this._model.selectionEnd){2===this._activeSelectionMode?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:1===this._activeSelectionMode&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(h),3!==this._activeSelectionMode&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));var f=this._bufferService.buffer;if(this._model.selectionEnd[1]<f.lines.length){var d=f.lines.get(this._model.selectionEnd[1]);d&&0===d.hasWidth(this._model.selectionEnd[0])&&this._model.selectionEnd[0]++}u&&u[0]===this._model.selectionEnd[0]&&u[1]===this._model.selectionEnd[1]||this.refresh(!0)}else this.refresh(!0)}},t.prototype._dragScroll=function(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});var h=this._bufferService.buffer;this._dragScrollAmount>0?(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(h.ydisp+this._bufferService.rows,h.lines.length-1)):(3!==this._activeSelectionMode&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=h.ydisp),this.refresh()}},t.prototype._onMouseUp=function(h){var u=h.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&u<500){if(h.altKey&&this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){var f=this._mouseService.getCoords(h,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(f&&void 0!==f[0]&&void 0!==f[1]){var d=R.moveToCellSequence(f[0]-1,f[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(d,!0)}}}else this.hasSelection&&this._onSelectionChange.fire()},t.prototype._onBufferActivate=function(h){var u=this;this.clearSelection(),this._trimListener.dispose(),this._trimListener=h.activeBuffer.lines.onTrim((function(h){return u._onTrim(h)}))},t.prototype._convertViewportColToCharacterIndex=function(h,u){for(var f=u[0],d=0;u[0]>=d;d++){var p=h.loadCell(d,this._workCell).getChars().length;0===this._workCell.getWidth()?f--:p>1&&u[0]!==d&&(f+=p-1)}return f},t.prototype.setSelection=function(h,u,f){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[h,u],this._model.selectionStartLength=f,this.refresh()},t.prototype._getWordAt=function(h,u,f,d){if(void 0===f&&(f=!0),void 0===d&&(d=!0),!(h[0]>=this._bufferService.cols)){var p=this._bufferService.buffer,v=p.lines.get(h[1]);if(v){var g=p.translateBufferLineToString(h[1],!1),y=this._convertViewportColToCharacterIndex(v,h),m=y,C=h[0]-y,w=0,E=0,L=0,A=0;if(" "===g.charAt(y)){for(;y>0&&" "===g.charAt(y-1);)y--;for(;m<g.length&&" "===g.charAt(m+1);)m++}else{var R=h[0],k=h[0];0===v.getWidth(R)&&(w++,R--),2===v.getWidth(k)&&(E++,k++);var x=v.getString(k).length;for(x>1&&(A+=x-1,m+=x-1);R>0&&y>0&&!this._isCharWordSeparator(v.loadCell(R-1,this._workCell));){v.loadCell(R-1,this._workCell);var D=this._workCell.getChars().length;0===this._workCell.getWidth()?(w++,R--):D>1&&(L+=D-1,y-=D-1),y--,R--}for(;k<v.length&&m+1<g.length&&!this._isCharWordSeparator(v.loadCell(k+1,this._workCell));){v.loadCell(k+1,this._workCell);var O=this._workCell.getChars().length;2===this._workCell.getWidth()?(E++,k++):O>1&&(A+=O-1,m+=O-1),m++,k++}}m++;var T=y+C-w+L,M=Math.min(this._bufferService.cols,m-y+w+E-L-A);if(u||""!==g.slice(y,m).trim()){if(f&&0===T&&32!==v.getCodePoint(0)){var P=p.lines.get(h[1]-1);if(P&&v.isWrapped&&32!==P.getCodePoint(this._bufferService.cols-1)){var I=this._getWordAt([this._bufferService.cols-1,h[1]-1],!1,!0,!1);if(I){var H=this._bufferService.cols-I.start;T-=H,M+=H}}}if(d&&T+M===this._bufferService.cols&&32!==v.getCodePoint(this._bufferService.cols-1)){var B=p.lines.get(h[1]+1);if(B&&B.isWrapped&&32!==B.getCodePoint(0)){var F=this._getWordAt([0,h[1]+1],!1,!1,!0);F&&(M+=F.length)}}return{start:T,length:M}}}}},t.prototype._selectWordAt=function(h,u){var f=this._getWordAt(h,u);if(f){for(;f.start<0;)f.start+=this._bufferService.cols,h[1]--;this._model.selectionStart=[f.start,h[1]],this._model.selectionStartLength=f.length}},t.prototype._selectToWordAt=function(h){var u=this._getWordAt(h,!0);if(u){for(var f=h[1];u.start<0;)u.start+=this._bufferService.cols,f--;if(!this._model.areSelectionValuesReversed())for(;u.start+u.length>this._bufferService.cols;)u.length-=this._bufferService.cols,f++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?u.start:u.start+u.length,f]}},t.prototype._isCharWordSeparator=function(h){return 0!==h.getWidth()&&this._optionsService.options.wordSeparator.indexOf(h.getChars())>=0},t.prototype._selectLineAt=function(h){var u=this._bufferService.buffer.getWrappedRangeForLine(h);this._model.selectionStart=[0,u.first],this._model.selectionEnd=[this._bufferService.cols,u.last],this._model.selectionStartLength=0},v([g(2,L.IBufferService),g(3,L.ICoreService),g(4,E.IMouseService),g(5,L.IOptionsService),g(6,E.IRenderService)],t)}(k.Disposable);u.SelectionService=O},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.SelectionModel=void 0;var d=function(){function e(h){this._bufferService=h,this.isSelectAllActive=!1,this.selectionStartLength=0}return e.prototype.clearSelection=function(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0},Object.defineProperty(e.prototype,"finalSelectionStart",{get:function(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"finalSelectionEnd",{get:function(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){var h=this.selectionStart[0]+this.selectionStartLength;return h>this._bufferService.cols?[h%this._bufferService.cols,this.selectionStart[1]+Math.floor(h/this._bufferService.cols)]:[h,this.selectionStart[1]]}return this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]?[Math.max(this.selectionStart[0]+this.selectionStartLength,this.selectionEnd[0]),this.selectionEnd[1]]:this.selectionEnd}},enumerable:!1,configurable:!0}),e.prototype.areSelectionValuesReversed=function(){var h=this.selectionStart,u=this.selectionEnd;return!(!h||!u)&&(h[1]>u[1]||h[1]===u[1]&&h[0]>u[0])},e.prototype.onTrim=function(h){return this.selectionStart&&(this.selectionStart[1]-=h),this.selectionEnd&&(this.selectionEnd[1]-=h),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)},e}();u.SelectionModel=d},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.moveToCellSequence=void 0;var d=f(12);function n(h,u,f,d){var p=h-o(f,h),v=u-o(f,u);return l(Math.abs(p-v)-function(h,u,f){for(var d=0,p=h-o(f,h),v=u-o(f,u),g=0;g<Math.abs(p-v);g++){var y="A"===s(h,u)?-1:1,m=f.buffer.lines.get(p+y*g);m&&m.isWrapped&&d++}return d}(h,u,f),c(s(h,u),d))}function o(h,u){for(var f=0,d=h.buffer.lines.get(u),p=d&&d.isWrapped;p&&u>=0&&u<h.rows;)f++,p=(d=h.buffer.lines.get(--u))&&d.isWrapped;return f}function s(h,u){return h>u?"A":"B"}function a(h,u,f,d,p,v){for(var g=h,y=u,m="";g!==f||y!==d;)g+=p?1:-1,p&&g>v.cols-1?(m+=v.buffer.translateBufferLineToString(y,!1,h,g),g=0,h=0,y++):!p&&g<0&&(m+=v.buffer.translateBufferLineToString(y,!1,0,h+1),h=g=v.cols-1,y--);return m+v.buffer.translateBufferLineToString(y,!1,h,g)}function c(h,u){var f=u?"O":"[";return d.C0.ESC+f+h}function l(h,u){h=Math.floor(h);for(var f="",d=0;d<h;d++)f+=u;return f}u.moveToCellSequence=function(h,u,f,d){var p,v=f.buffer.x,g=f.buffer.y;if(!f.buffer.hasScrollback)return function(h,u,f,d,p,v){return 0===n(u,d,p,v).length?"":l(a(h,u,h,u-o(p,u),!1,p).length,c("D",v))}(v,g,0,u,f,d)+n(g,u,f,d)+function(h,u,f,d,p,v){var g;g=n(u,d,p,v).length>0?d-o(p,d):u;var y=d,m=function(h,u,f,d,p,v){var g;return g=n(f,d,p,v).length>0?d-o(p,d):u,h<f&&g<=d||h>=f&&g<d?"C":"D"}(h,u,f,d,p,v);return l(a(h,g,f,y,"C"===m,p).length,c(m,v))}(v,g,h,u,f,d);if(g===u)return p=v>h?"D":"C",l(Math.abs(v-h),c(p,d));p=g>u?"D":"C";var y=Math.abs(g-u);return l(function(h,u){return u.cols-h}(g>u?h:v,f)+(y-1)*f.cols+1+((g>u?v:h)-1),c(p,d))}},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.SoundService=void 0;var v=f(1),g=function(){function e(h){this._optionsService=h}return Object.defineProperty(e,"audioContext",{get:function(){if(!e._audioContext){var h=window.AudioContext||window.webkitAudioContext;if(!h)return console.warn("Web Audio API is not supported by this browser. Consider upgrading to the latest version"),null;e._audioContext=new h}return e._audioContext},enumerable:!1,configurable:!0}),e.prototype.playBellSound=function(){var h=e.audioContext;if(h){var u=h.createBufferSource();h.decodeAudioData(this._base64ToArrayBuffer(this._removeMimeType(this._optionsService.options.bellSound)),(function(f){u.buffer=f,u.connect(h.destination),u.start(0)}))}},e.prototype._base64ToArrayBuffer=function(h){for(var u=window.atob(h),f=u.length,d=new Uint8Array(f),p=0;p<f;p++)d[p]=u.charCodeAt(p);return d.buffer},e.prototype._removeMimeType=function(h){return h.split(",")[1]},e=d([p(0,v.IOptionsService)],e)}();u.SoundService=g},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.MouseZoneManager=void 0;var y=f(2),m=f(7),C=f(5),w=f(1),E=function(h){function t(u,f,d,p,v,g){var y=h.call(this)||this;return y._element=u,y._screenElement=f,y._bufferService=d,y._mouseService=p,y._selectionService=v,y._optionsService=g,y._zones=[],y._areZonesActive=!1,y._lastHoverCoords=[void 0,void 0],y._initialSelectionLength=0,y.register(m.addDisposableDomListener(y._element,"mousedown",(function(h){return y._onMouseDown(h)}))),y._mouseMoveListener=function(h){return y._onMouseMove(h)},y._mouseLeaveListener=function(h){return y._onMouseLeave(h)},y._clickListener=function(h){return y._onClick(h)},y}return p(t,h),t.prototype.dispose=function(){h.prototype.dispose.call(this),this._deactivate()},t.prototype.add=function(h){this._zones.push(h),1===this._zones.length&&this._activate()},t.prototype.clearAll=function(h,u){if(0!==this._zones.length){h&&u||(h=0,u=this._bufferService.rows-1);for(var f=0;f<this._zones.length;f++){var d=this._zones[f];(d.y1>h&&d.y1<=u+1||d.y2>h&&d.y2<=u+1||d.y1<h&&d.y2>u+1)&&(this._currentZone&&this._currentZone===d&&(this._currentZone.leaveCallback(),this._currentZone=void 0),this._zones.splice(f--,1))}0===this._zones.length&&this._deactivate()}},t.prototype._activate=function(){this._areZonesActive||(this._areZonesActive=!0,this._element.addEventListener("mousemove",this._mouseMoveListener),this._element.addEventListener("mouseleave",this._mouseLeaveListener),this._element.addEventListener("click",this._clickListener))},t.prototype._deactivate=function(){this._areZonesActive&&(this._areZonesActive=!1,this._element.removeEventListener("mousemove",this._mouseMoveListener),this._element.removeEventListener("mouseleave",this._mouseLeaveListener),this._element.removeEventListener("click",this._clickListener))},t.prototype._onMouseMove=function(h){this._lastHoverCoords[0]===h.pageX&&this._lastHoverCoords[1]===h.pageY||(this._onHover(h),this._lastHoverCoords=[h.pageX,h.pageY])},t.prototype._onHover=function(h){var u=this,f=this._findZoneEventAt(h);f!==this._currentZone&&(this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout)),f&&(this._currentZone=f,f.hoverCallback&&f.hoverCallback(h),this._tooltipTimeout=window.setTimeout((function(){return u._onTooltip(h)}),this._optionsService.options.linkTooltipHoverDuration)))},t.prototype._onTooltip=function(h){this._tooltipTimeout=void 0;var u=this._findZoneEventAt(h);u&&u.tooltipCallback&&u.tooltipCallback(h)},t.prototype._onMouseDown=function(h){if(this._initialSelectionLength=this._getSelectionLength(),this._areZonesActive){var u=this._findZoneEventAt(h);(null==u?void 0:u.willLinkActivate(h))&&(h.preventDefault(),h.stopImmediatePropagation())}},t.prototype._onMouseLeave=function(h){this._currentZone&&(this._currentZone.leaveCallback(),this._currentZone=void 0,this._tooltipTimeout&&clearTimeout(this._tooltipTimeout))},t.prototype._onClick=function(h){var u=this._findZoneEventAt(h),f=this._getSelectionLength();u&&f===this._initialSelectionLength&&(u.clickCallback(h),h.preventDefault(),h.stopImmediatePropagation())},t.prototype._getSelectionLength=function(){var h=this._selectionService.selectionText;return h?h.length:0},t.prototype._findZoneEventAt=function(h){var u=this._mouseService.getCoords(h,this._screenElement,this._bufferService.cols,this._bufferService.rows);if(u)for(var f=u[0],d=u[1],p=0;p<this._zones.length;p++){var v=this._zones[p];if(v.y1===v.y2){if(d===v.y1&&f>=v.x1&&f<v.x2)return v}else if(d===v.y1&&f>=v.x1||d===v.y2&&f<v.x2||d>v.y1&&d<v.y2)return v}},v([g(2,w.IBufferService),g(3,C.IMouseService),g(4,C.ISelectionService),g(5,w.IOptionsService)],t)}(y.Disposable);u.MouseZoneManager=E},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.AccessibilityManager=void 0;var v=f(17),g=f(11),y=f(30),m=f(7),C=f(2),w=f(31),E=function(h){function t(u,f){var d=h.call(this)||this;d._terminal=u,d._renderService=f,d._liveRegionLineCount=0,d._charsToConsume=[],d._charsToAnnounce="",d._accessibilityTreeRoot=document.createElement("div"),d._accessibilityTreeRoot.classList.add("xterm-accessibility"),d._rowContainer=document.createElement("div"),d._rowContainer.classList.add("xterm-accessibility-tree"),d._rowContainer.setAttribute("role","list"),d._rowElements=[];for(var p=0;p<d._terminal.rows;p++)d._rowElements[p]=d._createAccessibilityTreeNode(),d._rowContainer.appendChild(d._rowElements[p]);if(d._topBoundaryFocusListener=function(h){return d._onBoundaryFocus(h,0)},d._bottomBoundaryFocusListener=function(h){return d._onBoundaryFocus(h,1)},d._rowElements[0].addEventListener("focus",d._topBoundaryFocusListener),d._rowElements[d._rowElements.length-1].addEventListener("focus",d._bottomBoundaryFocusListener),d._refreshRowsDimensions(),d._accessibilityTreeRoot.appendChild(d._rowContainer),d._renderRowsDebouncer=new y.RenderDebouncer(d._renderRows.bind(d)),d._refreshRows(),d._liveRegion=document.createElement("div"),d._liveRegion.classList.add("live-region"),d._liveRegion.setAttribute("aria-live","assertive"),d._accessibilityTreeRoot.appendChild(d._liveRegion),!d._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");return d._terminal.element.insertAdjacentElement("afterbegin",d._accessibilityTreeRoot),d.register(d._renderRowsDebouncer),d.register(d._terminal.onResize((function(h){return d._onResize(h.rows)}))),d.register(d._terminal.onRender((function(h){return d._refreshRows(h.start,h.end)}))),d.register(d._terminal.onScroll((function(){return d._refreshRows()}))),d.register(d._terminal.onA11yChar((function(h){return d._onChar(h)}))),d.register(d._terminal.onLineFeed((function(){return d._onChar("\n")}))),d.register(d._terminal.onA11yTab((function(h){return d._onTab(h)}))),d.register(d._terminal.onKey((function(h){return d._onKey(h.key)}))),d.register(d._terminal.onBlur((function(){return d._clearLiveRegion()}))),d.register(d._renderService.onDimensionsChange((function(){return d._refreshRowsDimensions()}))),d._screenDprMonitor=new w.ScreenDprMonitor,d.register(d._screenDprMonitor),d._screenDprMonitor.setListener((function(){return d._refreshRowsDimensions()})),d.register(m.addDisposableDomListener(window,"resize",(function(){return d._refreshRowsDimensions()}))),d}return p(t,h),t.prototype.dispose=function(){var u;h.prototype.dispose.call(this),null===(u=this._terminal.element)||void 0===u||u.removeChild(this._accessibilityTreeRoot),this._rowElements.length=0},t.prototype._onBoundaryFocus=function(h,u){var f=h.target,d=this._rowElements[0===u?1:this._rowElements.length-2];if(f.getAttribute("aria-posinset")!==(0===u?"1":""+this._terminal.buffer.lines.length)&&h.relatedTarget===d){var p,v;if(0===u?(p=f,v=this._rowElements.pop(),this._rowContainer.removeChild(v)):(p=this._rowElements.shift(),v=f,this._rowContainer.removeChild(p)),p.removeEventListener("focus",this._topBoundaryFocusListener),v.removeEventListener("focus",this._bottomBoundaryFocusListener),0===u){var g=this._createAccessibilityTreeNode();this._rowElements.unshift(g),this._rowContainer.insertAdjacentElement("afterbegin",g)}else g=this._createAccessibilityTreeNode(),this._rowElements.push(g),this._rowContainer.appendChild(g);this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(0===u?-1:1),this._rowElements[0===u?1:this._rowElements.length-2].focus(),h.preventDefault(),h.stopImmediatePropagation()}},t.prototype._onResize=function(h){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(var u=this._rowContainer.children.length;u<this._terminal.rows;u++)this._rowElements[u]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[u]);for(;this._rowElements.length>h;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()},t.prototype._createAccessibilityTreeNode=function(){var h=document.createElement("div");return h.setAttribute("role","listitem"),h.tabIndex=-1,this._refreshRowDimensions(h),h},t.prototype._onTab=function(h){for(var u=0;u<h;u++)this._onChar(" ")},t.prototype._onChar=function(h){var u=this;this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==h&&(this._charsToAnnounce+=h):this._charsToAnnounce+=h,"\n"===h&&(this._liveRegionLineCount++,21===this._liveRegionLineCount&&(this._liveRegion.textContent+=v.tooMuchOutput)),g.isMac&&this._liveRegion.textContent&&this._liveRegion.textContent.length>0&&!this._liveRegion.parentNode&&setTimeout((function(){u._accessibilityTreeRoot.appendChild(u._liveRegion)}),0))},t.prototype._clearLiveRegion=function(){this._liveRegion.textContent="",this._liveRegionLineCount=0,g.isMac&&this._liveRegion.parentNode&&this._accessibilityTreeRoot.removeChild(this._liveRegion)},t.prototype._onKey=function(h){this._clearLiveRegion(),this._charsToConsume.push(h)},t.prototype._refreshRows=function(h,u){this._renderRowsDebouncer.refresh(h,u,this._terminal.rows)},t.prototype._renderRows=function(h,u){for(var f=this._terminal.buffer,d=f.lines.length.toString(),p=h;p<=u;p++){var v=f.translateBufferLineToString(f.ydisp+p,!0),g=(f.ydisp+p+1).toString(),y=this._rowElements[p];y&&(0===v.length?y.innerHTML="&nbsp;":y.textContent=v,y.setAttribute("aria-posinset",g),y.setAttribute("aria-setsize",d))}this._announceCharacters()},t.prototype._refreshRowsDimensions=function(){if(this._renderService.dimensions.actualCellHeight){this._rowElements.length!==this._terminal.rows&&this._onResize(this._terminal.rows);for(var h=0;h<this._terminal.rows;h++)this._refreshRowDimensions(this._rowElements[h])}},t.prototype._refreshRowDimensions=function(h){h.style.height=this._renderService.dimensions.actualCellHeight+"px"},t.prototype._announceCharacters=function(){0!==this._charsToAnnounce.length&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")},t}(C.Disposable);u.AccessibilityManager=E},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomRenderer=void 0;var y=f(57),m=f(9),C=f(2),w=f(5),E=f(1),L=f(0),A=f(10),R=1,k=function(h){function t(u,f,d,p,v,g,m,C,w){var E=h.call(this)||this;return E._colors=u,E._element=f,E._screenElement=d,E._viewportElement=p,E._linkifier=v,E._linkifier2=g,E._charSizeService=m,E._optionsService=C,E._bufferService=w,E._terminalClass=R++,E._rowElements=[],E._rowContainer=document.createElement("div"),E._rowContainer.classList.add("xterm-rows"),E._rowContainer.style.lineHeight="normal",E._rowContainer.setAttribute("aria-hidden","true"),E._refreshRowElements(E._bufferService.cols,E._bufferService.rows),E._selectionContainer=document.createElement("div"),E._selectionContainer.classList.add("xterm-selection"),E._selectionContainer.setAttribute("aria-hidden","true"),E.dimensions={scaledCharWidth:0,scaledCharHeight:0,scaledCellWidth:0,scaledCellHeight:0,scaledCharLeft:0,scaledCharTop:0,scaledCanvasWidth:0,scaledCanvasHeight:0,canvasWidth:0,canvasHeight:0,actualCellWidth:0,actualCellHeight:0},E._updateDimensions(),E._injectCss(),E._rowFactory=new y.DomRendererRowFactory(document,E._optionsService,E._colors),E._element.classList.add("xterm-dom-renderer-owner-"+E._terminalClass),E._screenElement.appendChild(E._rowContainer),E._screenElement.appendChild(E._selectionContainer),E._linkifier.onShowLinkUnderline((function(h){return E._onLinkHover(h)})),E._linkifier.onHideLinkUnderline((function(h){return E._onLinkLeave(h)})),E._linkifier2.onShowLinkUnderline((function(h){return E._onLinkHover(h)})),E._linkifier2.onHideLinkUnderline((function(h){return E._onLinkLeave(h)})),E}return p(t,h),Object.defineProperty(t.prototype,"onRequestRedraw",{get:function(){return(new L.EventEmitter).event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this._element.classList.remove("xterm-dom-renderer-owner-"+this._terminalClass),this._screenElement.removeChild(this._rowContainer),this._screenElement.removeChild(this._selectionContainer),this._screenElement.removeChild(this._themeStyleElement),this._screenElement.removeChild(this._dimensionsStyleElement),h.prototype.dispose.call(this)},t.prototype._updateDimensions=function(){var h=this;this.dimensions.scaledCharWidth=this._charSizeService.width*window.devicePixelRatio,this.dimensions.scaledCharHeight=Math.ceil(this._charSizeService.height*window.devicePixelRatio),this.dimensions.scaledCellWidth=this.dimensions.scaledCharWidth+Math.round(this._optionsService.options.letterSpacing),this.dimensions.scaledCellHeight=Math.floor(this.dimensions.scaledCharHeight*this._optionsService.options.lineHeight),this.dimensions.scaledCharLeft=0,this.dimensions.scaledCharTop=0,this.dimensions.scaledCanvasWidth=this.dimensions.scaledCellWidth*this._bufferService.cols,this.dimensions.scaledCanvasHeight=this.dimensions.scaledCellHeight*this._bufferService.rows,this.dimensions.canvasWidth=Math.round(this.dimensions.scaledCanvasWidth/window.devicePixelRatio),this.dimensions.canvasHeight=Math.round(this.dimensions.scaledCanvasHeight/window.devicePixelRatio),this.dimensions.actualCellWidth=this.dimensions.canvasWidth/this._bufferService.cols,this.dimensions.actualCellHeight=this.dimensions.canvasHeight/this._bufferService.rows,this._rowElements.forEach((function(u){u.style.width=h.dimensions.canvasWidth+"px",u.style.height=h.dimensions.actualCellHeight+"px",u.style.lineHeight=h.dimensions.actualCellHeight+"px",u.style.overflow="hidden"})),this._dimensionsStyleElement||(this._dimensionsStyleElement=document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));var u=this._terminalSelector+" .xterm-rows span { display: inline-block; height: 100%; vertical-align: top; width: "+this.dimensions.actualCellWidth+"px}";this._dimensionsStyleElement.innerHTML=u,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=this.dimensions.canvasWidth+"px",this._screenElement.style.height=this.dimensions.canvasHeight+"px"},t.prototype.setColors=function(h){this._colors=h,this._injectCss()},t.prototype._injectCss=function(){var h=this;this._themeStyleElement||(this._themeStyleElement=document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));var u=this._terminalSelector+" .xterm-rows { color: "+this._colors.foreground.css+"; font-family: "+this._optionsService.options.fontFamily+"; font-size: "+this._optionsService.options.fontSize+"px;}";u+=this._terminalSelector+" span:not(."+y.BOLD_CLASS+") { font-weight: "+this._optionsService.options.fontWeight+";}"+this._terminalSelector+" span."+y.BOLD_CLASS+" { font-weight: "+this._optionsService.options.fontWeightBold+";}"+this._terminalSelector+" span."+y.ITALIC_CLASS+" { font-style: italic;}",u+="@keyframes blink_box_shadow_"+this._terminalClass+" { 50% {  box-shadow: none; }}",u+="@keyframes blink_block_"+this._terminalClass+" { 0% {  background-color: "+this._colors.cursor.css+";  color: "+this._colors.cursorAccent.css+"; } 50% {  background-color: "+this._colors.cursorAccent.css+";  color: "+this._colors.cursor.css+"; }}",u+=this._terminalSelector+" .xterm-rows:not(.xterm-focus) ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { outline: 1px solid "+this._colors.cursor.css+"; outline-offset: -1px;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+":not(."+y.CURSOR_STYLE_BLOCK_CLASS+") { animation: blink_box_shadow_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_BLINK_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { animation: blink_block_"+this._terminalClass+" 1s step-end infinite;}"+this._terminalSelector+" .xterm-rows.xterm-focus ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BLOCK_CLASS+" { background-color: "+this._colors.cursor.css+"; color: "+this._colors.cursorAccent.css+";}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_BAR_CLASS+" { box-shadow: "+this._optionsService.options.cursorWidth+"px 0 0 "+this._colors.cursor.css+" inset;}"+this._terminalSelector+" .xterm-rows ."+y.CURSOR_CLASS+"."+y.CURSOR_STYLE_UNDERLINE_CLASS+" { box-shadow: 0 -1px 0 "+this._colors.cursor.css+" inset;}",u+=this._terminalSelector+" .xterm-selection { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}"+this._terminalSelector+" .xterm-selection div { position: absolute; background-color: "+this._colors.selection.css+";}",this._colors.ansi.forEach((function(f,d){u+=h._terminalSelector+" .xterm-fg-"+d+" { color: "+f.css+"; }"+h._terminalSelector+" .xterm-bg-"+d+" { background-color: "+f.css+"; }"})),u+=this._terminalSelector+" .xterm-fg-"+m.INVERTED_DEFAULT_COLOR+" { color: "+A.color.opaque(this._colors.background).css+"; }"+this._terminalSelector+" .xterm-bg-"+m.INVERTED_DEFAULT_COLOR+" { background-color: "+this._colors.foreground.css+"; }",this._themeStyleElement.innerHTML=u},t.prototype.onDevicePixelRatioChange=function(){this._updateDimensions()},t.prototype._refreshRowElements=function(h,u){for(var f=this._rowElements.length;f<=u;f++){var d=document.createElement("div");this._rowContainer.appendChild(d),this._rowElements.push(d)}for(;this._rowElements.length>u;)this._rowContainer.removeChild(this._rowElements.pop())},t.prototype.onResize=function(h,u){this._refreshRowElements(h,u),this._updateDimensions()},t.prototype.onCharSizeChanged=function(){this._updateDimensions()},t.prototype.onBlur=function(){this._rowContainer.classList.remove("xterm-focus")},t.prototype.onFocus=function(){this._rowContainer.classList.add("xterm-focus")},t.prototype.onSelectionChanged=function(h,u,f){for(;this._selectionContainer.children.length;)this._selectionContainer.removeChild(this._selectionContainer.children[0]);if(h&&u){var d=h[1]-this._bufferService.buffer.ydisp,p=u[1]-this._bufferService.buffer.ydisp,v=Math.max(d,0),g=Math.min(p,this._bufferService.rows-1);if(!(v>=this._bufferService.rows||g<0)){var y=document.createDocumentFragment();if(f)y.appendChild(this._createSelectionElement(v,h[0],u[0],g-v+1));else{var m=d===v?h[0]:0,C=v===g?u[0]:this._bufferService.cols;y.appendChild(this._createSelectionElement(v,m,C));var w=g-v-1;if(y.appendChild(this._createSelectionElement(v+1,0,this._bufferService.cols,w)),v!==g){var E=p===g?u[0]:this._bufferService.cols;y.appendChild(this._createSelectionElement(g,0,E))}}this._selectionContainer.appendChild(y)}}},t.prototype._createSelectionElement=function(h,u,f,d){void 0===d&&(d=1);var p=document.createElement("div");return p.style.height=d*this.dimensions.actualCellHeight+"px",p.style.top=h*this.dimensions.actualCellHeight+"px",p.style.left=u*this.dimensions.actualCellWidth+"px",p.style.width=this.dimensions.actualCellWidth*(f-u)+"px",p},t.prototype.onCursorMove=function(){},t.prototype.onOptionsChanged=function(){this._updateDimensions(),this._injectCss()},t.prototype.clear=function(){this._rowElements.forEach((function(h){return h.innerHTML=""}))},t.prototype.renderRows=function(h,u){for(var f=this._bufferService.buffer.ybase+this._bufferService.buffer.y,d=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),p=this._optionsService.options.cursorBlink,v=h;v<=u;v++){var g=this._rowElements[v];g.innerHTML="";var y=v+this._bufferService.buffer.ydisp,m=this._bufferService.buffer.lines.get(y),C=this._optionsService.options.cursorStyle;g.appendChild(this._rowFactory.createRow(m,y===f,C,d,p,this.dimensions.actualCellWidth,this._bufferService.cols))}},Object.defineProperty(t.prototype,"_terminalSelector",{get:function(){return".xterm-dom-renderer-owner-"+this._terminalClass},enumerable:!1,configurable:!0}),t.prototype.registerCharacterJoiner=function(h){return-1},t.prototype.deregisterCharacterJoiner=function(h){return!1},t.prototype._onLinkHover=function(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!0)},t.prototype._onLinkLeave=function(h){this._setCellUnderline(h.x1,h.x2,h.y1,h.y2,h.cols,!1)},t.prototype._setCellUnderline=function(h,u,f,d,p,v){for(;h!==u||f!==d;){var g=this._rowElements[f];if(!g)return;var y=g.children[h];y&&(y.style.textDecoration=v?"underline":"none"),++h>=p&&(h=0,f++)}},v([g(6,w.ICharSizeService),g(7,E.IOptionsService),g(8,E.IBufferService)],t)}(C.Disposable);u.DomRenderer=k},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.DomRendererRowFactory=u.CURSOR_STYLE_UNDERLINE_CLASS=u.CURSOR_STYLE_BAR_CLASS=u.CURSOR_STYLE_BLOCK_CLASS=u.CURSOR_BLINK_CLASS=u.CURSOR_CLASS=u.UNDERLINE_CLASS=u.ITALIC_CLASS=u.DIM_CLASS=u.BOLD_CLASS=void 0;var d=f(9),p=f(3),v=f(4),g=f(10);u.BOLD_CLASS="xterm-bold",u.DIM_CLASS="xterm-dim",u.ITALIC_CLASS="xterm-italic",u.UNDERLINE_CLASS="xterm-underline",u.CURSOR_CLASS="xterm-cursor",u.CURSOR_BLINK_CLASS="xterm-cursor-blink",u.CURSOR_STYLE_BLOCK_CLASS="xterm-cursor-block",u.CURSOR_STYLE_BAR_CLASS="xterm-cursor-bar",u.CURSOR_STYLE_UNDERLINE_CLASS="xterm-cursor-underline";var y=function(){function e(h,u,f){this._document=h,this._optionsService=u,this._colors=f,this._workCell=new v.CellData}return e.prototype.setColors=function(h){this._colors=h},e.prototype.createRow=function(h,f,v,y,m,C,w){for(var E=this._document.createDocumentFragment(),L=0,A=Math.min(h.length,w)-1;A>=0;A--)if(h.loadCell(A,this._workCell).getCode()!==p.NULL_CELL_CODE||f&&A===y){L=A+1;break}for(A=0;A<L;A++){h.loadCell(A,this._workCell);var R=this._workCell.getWidth();if(0!==R){var k=this._document.createElement("span");if(R>1&&(k.style.width=C*R+"px"),f&&A===y)switch(k.classList.add(u.CURSOR_CLASS),m&&k.classList.add(u.CURSOR_BLINK_CLASS),v){case"bar":k.classList.add(u.CURSOR_STYLE_BAR_CLASS);break;case"underline":k.classList.add(u.CURSOR_STYLE_UNDERLINE_CLASS);break;default:k.classList.add(u.CURSOR_STYLE_BLOCK_CLASS)}this._workCell.isBold()&&k.classList.add(u.BOLD_CLASS),this._workCell.isItalic()&&k.classList.add(u.ITALIC_CLASS),this._workCell.isDim()&&k.classList.add(u.DIM_CLASS),this._workCell.isUnderline()&&k.classList.add(u.UNDERLINE_CLASS),this._workCell.isInvisible()?k.textContent=p.WHITESPACE_CELL_CHAR:k.textContent=this._workCell.getChars()||p.WHITESPACE_CELL_CHAR;var x=this._workCell.getFgColor(),D=this._workCell.getFgColorMode(),O=this._workCell.getBgColor(),T=this._workCell.getBgColorMode(),M=!!this._workCell.isInverse();if(M){var P=x;x=O,O=P;var I=D;D=T,T=I}switch(D){case 16777216:case 33554432:this._workCell.isBold()&&x<8&&this._optionsService.options.drawBoldTextInBrightColors&&(x+=8),this._applyMinimumContrast(k,this._colors.background,this._colors.ansi[x])||k.classList.add("xterm-fg-"+x);break;case 50331648:var H=g.rgba.toColor(x>>16&255,x>>8&255,255&x);this._applyMinimumContrast(k,this._colors.background,H)||this._addStyle(k,"color:#"+c(x.toString(16),"0",6));break;case 0:default:this._applyMinimumContrast(k,this._colors.background,this._colors.foreground)||M&&k.classList.add("xterm-fg-"+d.INVERTED_DEFAULT_COLOR)}switch(T){case 16777216:case 33554432:k.classList.add("xterm-bg-"+O);break;case 50331648:this._addStyle(k,"background-color:#"+c(O.toString(16),"0",6));break;case 0:default:M&&k.classList.add("xterm-bg-"+d.INVERTED_DEFAULT_COLOR)}E.appendChild(k)}}return E},e.prototype._applyMinimumContrast=function(h,u,f){if(1===this._optionsService.options.minimumContrastRatio)return!1;var d=this._colors.contrastCache.getColor(this._workCell.bg,this._workCell.fg);return void 0===d&&(d=g.color.ensureContrastRatio(u,f,this._optionsService.options.minimumContrastRatio),this._colors.contrastCache.setColor(this._workCell.bg,this._workCell.fg,null!=d?d:null)),!!d&&(this._addStyle(h,"color:"+d.css),!0)},e.prototype._addStyle=function(h,u){h.setAttribute("style",""+(h.getAttribute("style")||"")+u+";")},e}();function c(h,u,f){for(;h.length<f;)h=u+h;return h}u.DomRendererRowFactory=y},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.evaluateKeyboardEvent=void 0;var d=f(12),p={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};u.evaluateKeyboardEvent=function(h,u,f,v){var g={type:0,cancel:!1,key:void 0},y=(h.shiftKey?1:0)|(h.altKey?2:0)|(h.ctrlKey?4:0)|(h.metaKey?8:0);switch(h.keyCode){case 0:"UIKeyInputUpArrow"===h.key?g.key=u?d.C0.ESC+"OA":d.C0.ESC+"[A":"UIKeyInputLeftArrow"===h.key?g.key=u?d.C0.ESC+"OD":d.C0.ESC+"[D":"UIKeyInputRightArrow"===h.key?g.key=u?d.C0.ESC+"OC":d.C0.ESC+"[C":"UIKeyInputDownArrow"===h.key&&(g.key=u?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:if(h.shiftKey){g.key=d.C0.BS;break}if(h.altKey){g.key=d.C0.ESC+d.C0.DEL;break}g.key=d.C0.DEL;break;case 9:if(h.shiftKey){g.key=d.C0.ESC+"[Z";break}g.key=d.C0.HT,g.cancel=!0;break;case 13:g.key=h.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,g.cancel=!0;break;case 27:g.key=d.C0.ESC,h.altKey&&(g.key=d.C0.ESC+d.C0.ESC),g.cancel=!0;break;case 37:if(h.metaKey)break;y?(g.key=d.C0.ESC+"[1;"+(y+1)+"D",g.key===d.C0.ESC+"[1;3D"&&(g.key=d.C0.ESC+(f?"b":"[1;5D"))):g.key=u?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(h.metaKey)break;y?(g.key=d.C0.ESC+"[1;"+(y+1)+"C",g.key===d.C0.ESC+"[1;3C"&&(g.key=d.C0.ESC+(f?"f":"[1;5C"))):g.key=u?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(h.metaKey)break;y?(g.key=d.C0.ESC+"[1;"+(y+1)+"A",f||g.key!==d.C0.ESC+"[1;3A"||(g.key=d.C0.ESC+"[1;5A")):g.key=u?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(h.metaKey)break;y?(g.key=d.C0.ESC+"[1;"+(y+1)+"B",f||g.key!==d.C0.ESC+"[1;3B"||(g.key=d.C0.ESC+"[1;5B")):g.key=u?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:h.shiftKey||h.ctrlKey||(g.key=d.C0.ESC+"[2~");break;case 46:g.key=y?d.C0.ESC+"[3;"+(y+1)+"~":d.C0.ESC+"[3~";break;case 36:g.key=y?d.C0.ESC+"[1;"+(y+1)+"H":u?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:g.key=y?d.C0.ESC+"[1;"+(y+1)+"F":u?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:h.shiftKey?g.type=2:g.key=d.C0.ESC+"[5~";break;case 34:h.shiftKey?g.type=3:g.key=d.C0.ESC+"[6~";break;case 112:g.key=y?d.C0.ESC+"[1;"+(y+1)+"P":d.C0.ESC+"OP";break;case 113:g.key=y?d.C0.ESC+"[1;"+(y+1)+"Q":d.C0.ESC+"OQ";break;case 114:g.key=y?d.C0.ESC+"[1;"+(y+1)+"R":d.C0.ESC+"OR";break;case 115:g.key=y?d.C0.ESC+"[1;"+(y+1)+"S":d.C0.ESC+"OS";break;case 116:g.key=y?d.C0.ESC+"[15;"+(y+1)+"~":d.C0.ESC+"[15~";break;case 117:g.key=y?d.C0.ESC+"[17;"+(y+1)+"~":d.C0.ESC+"[17~";break;case 118:g.key=y?d.C0.ESC+"[18;"+(y+1)+"~":d.C0.ESC+"[18~";break;case 119:g.key=y?d.C0.ESC+"[19;"+(y+1)+"~":d.C0.ESC+"[19~";break;case 120:g.key=y?d.C0.ESC+"[20;"+(y+1)+"~":d.C0.ESC+"[20~";break;case 121:g.key=y?d.C0.ESC+"[21;"+(y+1)+"~":d.C0.ESC+"[21~";break;case 122:g.key=y?d.C0.ESC+"[23;"+(y+1)+"~":d.C0.ESC+"[23~";break;case 123:g.key=y?d.C0.ESC+"[24;"+(y+1)+"~":d.C0.ESC+"[24~";break;default:if(!h.ctrlKey||h.shiftKey||h.altKey||h.metaKey)if(f&&!v||!h.altKey||h.metaKey)f&&!h.altKey&&!h.ctrlKey&&h.metaKey?65===h.keyCode&&(g.type=1):h.key&&!h.ctrlKey&&!h.altKey&&!h.metaKey&&h.keyCode>=48&&1===h.key.length?g.key=h.key:h.key&&h.ctrlKey&&"_"===h.key&&(g.key=d.C0.US);else{var m=p[h.keyCode],C=m&&m[h.shiftKey?1:0];if(C)g.key=d.C0.ESC+C;else if(h.keyCode>=65&&h.keyCode<=90){var w=h.ctrlKey?h.keyCode-64:h.keyCode+32;g.key=d.C0.ESC+String.fromCharCode(w)}}else h.keyCode>=65&&h.keyCode<=90?g.key=String.fromCharCode(h.keyCode-64):32===h.keyCode?g.key=d.C0.NUL:h.keyCode>=51&&h.keyCode<=55?g.key=String.fromCharCode(h.keyCode-51+27):56===h.keyCode?g.key=d.C0.DEL:219===h.keyCode?g.key=d.C0.ESC:220===h.keyCode?g.key=d.C0.FS:221===h.keyCode&&(g.key=d.C0.GS)}return g}},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.RenderService=void 0;var y=f(30),m=f(0),C=f(2),w=f(31),E=f(7),L=f(1),A=f(5),R=function(h){function t(u,f,d,p,v,g){var C=h.call(this)||this;if(C._renderer=u,C._rowCount=f,C._isPaused=!1,C._needsFullRefresh=!1,C._isNextRenderRedrawOnly=!0,C._needsSelectionRefresh=!1,C._canvasWidth=0,C._canvasHeight=0,C._selectionState={start:void 0,end:void 0,columnSelectMode:!1},C._onDimensionsChange=new m.EventEmitter,C._onRender=new m.EventEmitter,C._onRefreshRequest=new m.EventEmitter,C._renderDebouncer=new y.RenderDebouncer((function(h,u){return C._renderRows(h,u)})),C.register(C._renderDebouncer),C._screenDprMonitor=new w.ScreenDprMonitor,C._screenDprMonitor.setListener((function(){return C.onDevicePixelRatioChange()})),C.register(C._screenDprMonitor),C.register(g.onResize((function(h){return C._fullRefresh()}))),C.register(p.onOptionChange((function(){return C._renderer.onOptionsChanged()}))),C.register(v.onCharSizeChange((function(){return C.onCharSizeChanged()}))),C._renderer.onRequestRedraw((function(h){return C.refreshRows(h.start,h.end,!0)})),C.register(E.addDisposableDomListener(window,"resize",(function(){return C.onDevicePixelRatioChange()}))),"IntersectionObserver"in window){var L=new IntersectionObserver((function(h){return C._onIntersectionChange(h[h.length-1])}),{threshold:0});L.observe(d),C.register({dispose:function(){return L.disconnect()}})}return C}return p(t,h),Object.defineProperty(t.prototype,"onDimensionsChange",{get:function(){return this._onDimensionsChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRenderedBufferChange",{get:function(){return this._onRender.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onRefreshRequest",{get:function(){return this._onRefreshRequest.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dimensions",{get:function(){return this._renderer.dimensions},enumerable:!1,configurable:!0}),t.prototype._onIntersectionChange=function(h){this._isPaused=0===h.intersectionRatio,!this._isPaused&&this._needsFullRefresh&&(this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)},t.prototype.refreshRows=function(h,u,f){void 0===f&&(f=!1),this._isPaused?this._needsFullRefresh=!0:(f||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(h,u,this._rowCount))},t.prototype._renderRows=function(h,u){this._renderer.renderRows(h,u),this._needsSelectionRefresh&&(this._renderer.onSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRender.fire({start:h,end:u}),this._isNextRenderRedrawOnly=!0},t.prototype.resize=function(h,u){this._rowCount=u,this._fireOnCanvasResize()},t.prototype.changeOptions=function(){this._renderer.onOptionsChanged(),this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize()},t.prototype._fireOnCanvasResize=function(){this._renderer.dimensions.canvasWidth===this._canvasWidth&&this._renderer.dimensions.canvasHeight===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.dimensions)},t.prototype.dispose=function(){this._renderer.dispose(),h.prototype.dispose.call(this)},t.prototype.setRenderer=function(h){var u=this;this._renderer.dispose(),this._renderer=h,this._renderer.onRequestRedraw((function(h){return u.refreshRows(h.start,h.end,!0)})),this._needsSelectionRefresh=!0,this._fullRefresh()},t.prototype._fullRefresh=function(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)},t.prototype.setColors=function(h){this._renderer.setColors(h),this._fullRefresh()},t.prototype.onDevicePixelRatioChange=function(){this._renderer.onDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1)},t.prototype.onResize=function(h,u){this._renderer.onResize(h,u),this._fullRefresh()},t.prototype.onCharSizeChanged=function(){this._renderer.onCharSizeChanged()},t.prototype.onBlur=function(){this._renderer.onBlur()},t.prototype.onFocus=function(){this._renderer.onFocus()},t.prototype.onSelectionChanged=function(h,u,f){this._selectionState.start=h,this._selectionState.end=u,this._selectionState.columnSelectMode=f,this._renderer.onSelectionChanged(h,u,f)},t.prototype.onCursorMove=function(){this._renderer.onCursorMove()},t.prototype.clear=function(){this._renderer.clear()},t.prototype.registerCharacterJoiner=function(h){return this._renderer.registerCharacterJoiner(h)},t.prototype.deregisterCharacterJoiner=function(h){return this._renderer.deregisterCharacterJoiner(h)},v([g(3,L.IOptionsService),g(4,A.ICharSizeService),g(5,L.IBufferService)],t)}(C.Disposable);u.RenderService=R},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CharSizeService=void 0;var v=f(1),g=f(0),y=function(){function e(h,u,f){this._optionsService=f,this.width=0,this.height=0,this._onCharSizeChange=new g.EventEmitter,this._measureStrategy=new m(h,u,this._optionsService)}return Object.defineProperty(e.prototype,"hasValidSize",{get:function(){return this.width>0&&this.height>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onCharSizeChange",{get:function(){return this._onCharSizeChange.event},enumerable:!1,configurable:!0}),e.prototype.measure=function(){var h=this._measureStrategy.measure();h.width===this.width&&h.height===this.height||(this.width=h.width,this.height=h.height,this._onCharSizeChange.fire())},d([p(2,v.IOptionsService)],e)}();u.CharSizeService=y;var m=function(){function e(h,u,f){this._document=h,this._parentElement=u,this._optionsService=f,this._result={width:0,height:0},this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W",this._measureElement.setAttribute("aria-hidden","true"),this._parentElement.appendChild(this._measureElement)}return e.prototype.measure=function(){this._measureElement.style.fontFamily=this._optionsService.options.fontFamily,this._measureElement.style.fontSize=this._optionsService.options.fontSize+"px";var h=this._measureElement.getBoundingClientRect();return 0!==h.width&&0!==h.height&&(this._result.width=h.width,this._result.height=Math.ceil(h.height)),this._result},e}()},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.MouseService=void 0;var v=f(5),g=f(29),y=function(){function e(h,u){this._renderService=h,this._charSizeService=u}return e.prototype.getCoords=function(h,u,f,d,p){return g.getCoords(h,u,f,d,this._charSizeService.hasValidSize,this._renderService.dimensions.actualCellWidth,this._renderService.dimensions.actualCellHeight,p)},e.prototype.getRawByteCoords=function(h,u,f,d){var p=this.getCoords(h,u,f,d);return g.getRawByteCoords(p)},d([p(0,v.IRenderService),p(1,v.ICharSizeService)],e)}();u.MouseService=y},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.Linkifier2=void 0;var y=f(1),m=f(0),C=f(2),w=f(7),E=function(h){function t(u){var f=h.call(this)||this;return f._bufferService=u,f._linkProviders=[],f._linkCacheDisposables=[],f._isMouseOut=!0,f._activeLine=-1,f._onShowLinkUnderline=f.register(new m.EventEmitter),f._onHideLinkUnderline=f.register(new m.EventEmitter),f.register(C.getDisposeArrayDisposable(f._linkCacheDisposables)),f}return p(t,h),Object.defineProperty(t.prototype,"onShowLinkUnderline",{get:function(){return this._onShowLinkUnderline.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onHideLinkUnderline",{get:function(){return this._onHideLinkUnderline.event},enumerable:!1,configurable:!0}),t.prototype.registerLinkProvider=function(h){var u=this;return this._linkProviders.push(h),{dispose:function(){var f=u._linkProviders.indexOf(h);-1!==f&&u._linkProviders.splice(f,1)}}},t.prototype.attachToDom=function(h,u,f){var d=this;this._element=h,this._mouseService=u,this._renderService=f,this.register(w.addDisposableDomListener(this._element,"mouseleave",(function(){d._isMouseOut=!0,d._clearCurrentLink()}))),this.register(w.addDisposableDomListener(this._element,"mousemove",this._onMouseMove.bind(this))),this.register(w.addDisposableDomListener(this._element,"click",this._onClick.bind(this)))},t.prototype._onMouseMove=function(h){if(this._lastMouseEvent=h,this._element&&this._mouseService){var u=this._positionFromMouseEvent(h,this._element,this._mouseService);if(u){this._isMouseOut=!1;for(var f=h.composedPath(),d=0;d<f.length;d++){var p=f[d];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&u.x===this._lastBufferCell.x&&u.y===this._lastBufferCell.y||(this._onHover(u),this._lastBufferCell=u)}}},t.prototype._onHover=function(h){if(this._activeLine!==h.y)return this._clearCurrentLink(),void this._askForLink(h,!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,h)||(this._clearCurrentLink(),this._askForLink(h,!0))},t.prototype._askForLink=function(h,u){var f=this;this._activeProviderReplies&&u||(this._activeProviderReplies=new Map,this._activeLine=h.y);var d=!1;this._linkProviders.forEach((function(p,v){var g;u?(null===(g=f._activeProviderReplies)||void 0===g?void 0:g.get(v))&&(d=f._checkLinkProviderResult(v,h,d)):p.provideLinks(h.y,(function(u){var p,g;if(!f._isMouseOut){var y=null==u?void 0:u.map((function(h){return{link:h}}));null===(p=f._activeProviderReplies)||void 0===p||p.set(v,y),d=f._checkLinkProviderResult(v,h,d),(null===(g=f._activeProviderReplies)||void 0===g?void 0:g.size)===f._linkProviders.length&&f._removeIntersectingLinks(h.y,f._activeProviderReplies)}}))}))},t.prototype._removeIntersectingLinks=function(h,u){for(var f=new Set,d=0;d<u.size;d++){var p=u.get(d);if(p)for(var v=0;v<p.length;v++)for(var g=p[v],y=g.link.range.start.y<h?0:g.link.range.start.x,m=g.link.range.end.y>h?this._bufferService.cols:g.link.range.end.x,C=y;C<=m;C++){if(f.has(C)){p.splice(v--,1);break}f.add(C)}}},t.prototype._checkLinkProviderResult=function(h,u,f){var d,p=this;if(!this._activeProviderReplies)return f;for(var v=this._activeProviderReplies.get(h),g=!1,y=0;y<h;y++)this._activeProviderReplies.has(y)&&!this._activeProviderReplies.get(y)||(g=!0);if(!g&&v){var m=v.find((function(h){return p._linkAtPosition(h.link,u)}));m&&(f=!0,this._handleNewLink(m))}if(this._activeProviderReplies.size===this._linkProviders.length&&!f)for(y=0;y<this._activeProviderReplies.size;y++){var C=null===(d=this._activeProviderReplies.get(y))||void 0===d?void 0:d.find((function(h){return p._linkAtPosition(h.link,u)}));if(C){f=!0,this._handleNewLink(C);break}}return f},t.prototype._onClick=function(h){if(this._element&&this._mouseService&&this._currentLink){var u=this._positionFromMouseEvent(h,this._element,this._mouseService);u&&this._linkAtPosition(this._currentLink.link,u)&&this._currentLink.link.activate(h,this._currentLink.link.text)}},t.prototype._clearCurrentLink=function(h,u){this._element&&this._currentLink&&this._lastMouseEvent&&(!h||!u||this._currentLink.link.range.start.y>=h&&this._currentLink.link.range.end.y<=u)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,C.disposeArray(this._linkCacheDisposables))},t.prototype._handleNewLink=function(h){var u=this;if(this._element&&this._lastMouseEvent&&this._mouseService){var f=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);f&&this._linkAtPosition(h.link,f)&&(this._currentLink=h,this._currentLink.state={decorations:{underline:void 0===h.link.decorations||h.link.decorations.underline,pointerCursor:void 0===h.link.decorations||h.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,h.link,this._lastMouseEvent),h.link.decorations={},Object.defineProperties(h.link.decorations,{pointerCursor:{get:function(){var h,f;return null===(f=null===(h=u._currentLink)||void 0===h?void 0:h.state)||void 0===f?void 0:f.decorations.pointerCursor},set:function(h){var f,d;(null===(f=u._currentLink)||void 0===f?void 0:f.state)&&u._currentLink.state.decorations.pointerCursor!==h&&(u._currentLink.state.decorations.pointerCursor=h,u._currentLink.state.isHovered&&(null===(d=u._element)||void 0===d||d.classList.toggle("xterm-cursor-pointer",h)))}},underline:{get:function(){var h,f;return null===(f=null===(h=u._currentLink)||void 0===h?void 0:h.state)||void 0===f?void 0:f.decorations.underline},set:function(f){var d,p,v;(null===(d=u._currentLink)||void 0===d?void 0:d.state)&&(null===(v=null===(p=u._currentLink)||void 0===p?void 0:p.state)||void 0===v?void 0:v.decorations.underline)!==f&&(u._currentLink.state.decorations.underline=f,u._currentLink.state.isHovered&&u._fireUnderlineEvent(h.link,f))}}}),this._renderService&&this._linkCacheDisposables.push(this._renderService.onRenderedBufferChange((function(h){var f=0===h.start?0:h.start+1+u._bufferService.buffer.ydisp;u._clearCurrentLink(f,h.end+1+u._bufferService.buffer.ydisp)}))))}},t.prototype._linkHover=function(h,u,f){var d;(null===(d=this._currentLink)||void 0===d?void 0:d.state)&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!0),this._currentLink.state.decorations.pointerCursor&&h.classList.add("xterm-cursor-pointer")),u.hover&&u.hover(f,u.text)},t.prototype._fireUnderlineEvent=function(h,u){var f=h.range,d=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(f.start.x-1,f.start.y-d-1,f.end.x,f.end.y-d-1,void 0);(u?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)},t.prototype._linkLeave=function(h,u,f){var d;(null===(d=this._currentLink)||void 0===d?void 0:d.state)&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(u,!1),this._currentLink.state.decorations.pointerCursor&&h.classList.remove("xterm-cursor-pointer")),u.leave&&u.leave(f,u.text)},t.prototype._linkAtPosition=function(h,u){var f=h.range.start.y===h.range.end.y,d=h.range.start.y<u.y,p=h.range.end.y>u.y;return(f&&h.range.start.x<=u.x&&h.range.end.x>=u.x||d&&h.range.end.x>=u.x||p&&h.range.start.x<=u.x||d&&p)&&h.range.start.y<=u.y&&h.range.end.y>=u.y},t.prototype._positionFromMouseEvent=function(h,u,f){var d=f.getCoords(h,u,this._bufferService.cols,this._bufferService.rows);if(d)return{x:d[0],y:d[1]+this._bufferService.buffer.ydisp}},t.prototype._createLinkUnderlineEvent=function(h,u,f,d,p){return{x1:h,y1:u,x2:f,y2:d,cols:this._bufferService.cols,fg:p}},v([g(0,y.IBufferService)],t)}(C.Disposable);u.Linkifier2=E},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CoreBrowserService=void 0;var d=function(){function e(h){this._textarea=h}return Object.defineProperty(e.prototype,"isFocused",{get:function(){return document.activeElement===this._textarea&&document.hasFocus()},enumerable:!1,configurable:!0}),e}();u.CoreBrowserService=d},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.CoreTerminal=void 0;var v=f(2),g=f(1),y=f(65),m=f(66),C=f(67),w=f(73),E=f(74),L=f(0),A=f(75),R=f(76),k=f(77),x=f(79),D=f(80),O=f(18),T=f(81),M=function(h){function t(u){var f=h.call(this)||this;return f._onBinary=new L.EventEmitter,f._onData=new L.EventEmitter,f._onLineFeed=new L.EventEmitter,f._onResize=new L.EventEmitter,f._onScroll=new L.EventEmitter,f._instantiationService=new y.InstantiationService,f.optionsService=new w.OptionsService(u),f._instantiationService.setService(g.IOptionsService,f.optionsService),f._bufferService=f.register(f._instantiationService.createInstance(C.BufferService)),f._instantiationService.setService(g.IBufferService,f._bufferService),f._logService=f._instantiationService.createInstance(m.LogService),f._instantiationService.setService(g.ILogService,f._logService),f._coreService=f.register(f._instantiationService.createInstance(E.CoreService,(function(){return f.scrollToBottom()}))),f._instantiationService.setService(g.ICoreService,f._coreService),f._coreMouseService=f._instantiationService.createInstance(A.CoreMouseService),f._instantiationService.setService(g.ICoreMouseService,f._coreMouseService),f._dirtyRowService=f._instantiationService.createInstance(R.DirtyRowService),f._instantiationService.setService(g.IDirtyRowService,f._dirtyRowService),f.unicodeService=f._instantiationService.createInstance(k.UnicodeService),f._instantiationService.setService(g.IUnicodeService,f.unicodeService),f._charsetService=f._instantiationService.createInstance(x.CharsetService),f._instantiationService.setService(g.ICharsetService,f._charsetService),f._inputHandler=new O.InputHandler(f._bufferService,f._charsetService,f._coreService,f._dirtyRowService,f._logService,f.optionsService,f._coreMouseService,f.unicodeService),f.register(L.forwardEvent(f._inputHandler.onLineFeed,f._onLineFeed)),f.register(f._inputHandler),f.register(L.forwardEvent(f._bufferService.onResize,f._onResize)),f.register(L.forwardEvent(f._coreService.onData,f._onData)),f.register(L.forwardEvent(f._coreService.onBinary,f._onBinary)),f.register(f.optionsService.onOptionChange((function(h){return f._updateOptions(h)}))),f._writeBuffer=new T.WriteBuffer((function(h){return f._inputHandler.parse(h)})),f}return p(t,h),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onLineFeed",{get:function(){return this._onLineFeed.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onScroll",{get:function(){return this._onScroll.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cols",{get:function(){return this._bufferService.cols},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rows",{get:function(){return this._bufferService.rows},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"buffers",{get:function(){return this._bufferService.buffers},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){var u;this._isDisposed||(h.prototype.dispose.call(this),null===(u=this._windowsMode)||void 0===u||u.dispose(),this._windowsMode=void 0)},t.prototype.write=function(h,u){this._writeBuffer.write(h,u)},t.prototype.writeSync=function(h){this._writeBuffer.writeSync(h)},t.prototype.resize=function(h,u){isNaN(h)||isNaN(u)||(h=Math.max(h,C.MINIMUM_COLS),u=Math.max(u,C.MINIMUM_ROWS),this._bufferService.resize(h,u))},t.prototype.scroll=function(h,u){void 0===u&&(u=!1);var f,d=this._bufferService.buffer;(f=this._cachedBlankLine)&&f.length===this.cols&&f.getFg(0)===h.fg&&f.getBg(0)===h.bg||(f=d.getBlankLine(h,u),this._cachedBlankLine=f),f.isWrapped=u;var p=d.ybase+d.scrollTop,v=d.ybase+d.scrollBottom;if(0===d.scrollTop){var g=d.lines.isFull;v===d.lines.length-1?g?d.lines.recycle().copyFrom(f):d.lines.push(f.clone()):d.lines.splice(v+1,0,f.clone()),g?this._bufferService.isUserScrolling&&(d.ydisp=Math.max(d.ydisp-1,0)):(d.ybase++,this._bufferService.isUserScrolling||d.ydisp++)}else{var y=v-p+1;d.lines.shiftElements(p+1,y-1,-1),d.lines.set(v,f.clone())}this._bufferService.isUserScrolling||(d.ydisp=d.ybase),this._dirtyRowService.markRangeDirty(d.scrollTop,d.scrollBottom),this._onScroll.fire(d.ydisp)},t.prototype.scrollLines=function(h,u){var f=this._bufferService.buffer;if(h<0){if(0===f.ydisp)return;this._bufferService.isUserScrolling=!0}else h+f.ydisp>=f.ybase&&(this._bufferService.isUserScrolling=!1);var d=f.ydisp;f.ydisp=Math.max(Math.min(f.ydisp+h,f.ybase),0),d!==f.ydisp&&(u||this._onScroll.fire(f.ydisp))},t.prototype.scrollPages=function(h){this.scrollLines(h*(this.rows-1))},t.prototype.scrollToTop=function(){this.scrollLines(-this._bufferService.buffer.ydisp)},t.prototype.scrollToBottom=function(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)},t.prototype.scrollToLine=function(h){var u=h-this._bufferService.buffer.ydisp;0!==u&&this.scrollLines(u)},t.prototype.addEscHandler=function(h,u){return this._inputHandler.addEscHandler(h,u)},t.prototype.addDcsHandler=function(h,u){return this._inputHandler.addDcsHandler(h,u)},t.prototype.addCsiHandler=function(h,u){return this._inputHandler.addCsiHandler(h,u)},t.prototype.addOscHandler=function(h,u){return this._inputHandler.addOscHandler(h,u)},t.prototype._setup=function(){this.optionsService.options.windowsMode&&this._enableWindowsMode()},t.prototype.reset=function(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this._coreService.reset(),this._coreMouseService.reset()},t.prototype._updateOptions=function(h){var u;switch(h){case"scrollback":this.buffers.resize(this.cols,this.rows);break;case"windowsMode":this.optionsService.options.windowsMode?this._enableWindowsMode():(null===(u=this._windowsMode)||void 0===u||u.dispose(),this._windowsMode=void 0)}},t.prototype._enableWindowsMode=function(){var h=this;if(!this._windowsMode){var u=[];u.push(this.onLineFeed(D.updateWindowsModeWrappedState.bind(null,this._bufferService))),u.push(this.addCsiHandler({final:"H"},(function(){return D.updateWindowsModeWrappedState(h._bufferService),!1}))),this._windowsMode={dispose:function(){u.forEach((function(h){return h.dispose()}))}}}},t}(v.Disposable);u.CoreTerminal=M},function(h,u,f){"use strict";var d=this&&this.__spreadArrays||function(){for(var h=0,u=0,f=arguments.length;u<f;u++)h+=arguments[u].length;var d=Array(h),p=0;for(u=0;u<f;u++)for(var v=arguments[u],g=0,y=v.length;g<y;g++,p++)d[p]=v[g];return d};Object.defineProperty(u,"__esModule",{value:!0}),u.InstantiationService=u.ServiceCollection=void 0;var p=f(1),v=f(14),g=function(){function e(){for(var h=[],u=0;u<arguments.length;u++)h[u]=arguments[u];this._entries=new Map;for(var f=0,d=h;f<d.length;f++){var p=d[f],v=p[0],g=p[1];this.set(v,g)}}return e.prototype.set=function(h,u){var f=this._entries.get(h);return this._entries.set(h,u),f},e.prototype.forEach=function(h){this._entries.forEach((function(u,f){return h(f,u)}))},e.prototype.has=function(h){return this._entries.has(h)},e.prototype.get=function(h){return this._entries.get(h)},e}();u.ServiceCollection=g;var y=function(){function e(){this._services=new g,this._services.set(p.IInstantiationService,this)}return e.prototype.setService=function(h,u){this._services.set(h,u)},e.prototype.getService=function(h){return this._services.get(h)},e.prototype.createInstance=function(h){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];for(var p=v.getServiceDependencies(h).sort((function(h,u){return h.index-u.index})),g=[],y=0,m=p;y<m.length;y++){var C=m[y],w=this._services.get(C.id);if(!w)throw new Error("[createInstance] "+h.name+" depends on UNKNOWN service "+C.id+".");g.push(w)}var E=p.length>0?p[0].index:u.length;if(u.length!==E)throw new Error("[createInstance] First service dependency of "+h.name+" at position "+(E+1)+" conflicts with "+u.length+" static arguments");return new(h.bind.apply(h,d([void 0],d(u,g))))},e}();u.InstantiationService=y},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}},v=this&&this.__spreadArrays||function(){for(var h=0,u=0,f=arguments.length;u<f;u++)h+=arguments[u].length;var d=Array(h),p=0;for(u=0;u<f;u++)for(var v=arguments[u],g=0,y=v.length;g<y;g++,p++)d[p]=v[g];return d};Object.defineProperty(u,"__esModule",{value:!0}),u.LogService=u.LogLevel=void 0;var g,y=f(1);!function(h){h[h.DEBUG=0]="DEBUG",h[h.INFO=1]="INFO",h[h.WARN=2]="WARN",h[h.ERROR=3]="ERROR",h[h.OFF=4]="OFF"}(g=u.LogLevel||(u.LogLevel={}));var m={debug:g.DEBUG,info:g.INFO,warn:g.WARN,error:g.ERROR,off:g.OFF},C=function(){function e(h){var u=this;this._optionsService=h,this._updateLogLevel(),this._optionsService.onOptionChange((function(h){"logLevel"===h&&u._updateLogLevel()}))}return e.prototype._updateLogLevel=function(){this._logLevel=m[this._optionsService.options.logLevel]},e.prototype._evalLazyOptionalParams=function(h){for(var u=0;u<h.length;u++)"function"==typeof h[u]&&(h[u]=h[u]())},e.prototype._log=function(h,u,f){this._evalLazyOptionalParams(f),h.call.apply(h,v([console,"xterm.js: "+u],f))},e.prototype.debug=function(h){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];this._logLevel<=g.DEBUG&&this._log(console.log,h,u)},e.prototype.info=function(h){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];this._logLevel<=g.INFO&&this._log(console.info,h,u)},e.prototype.warn=function(h){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];this._logLevel<=g.WARN&&this._log(console.warn,h,u)},e.prototype.error=function(h){for(var u=[],f=1;f<arguments.length;f++)u[f-1]=arguments[f];this._logLevel<=g.ERROR&&this._log(console.error,h,u)},d([p(0,y.IOptionsService)],e)}();u.LogService=C},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.BufferService=u.MINIMUM_ROWS=u.MINIMUM_COLS=void 0;var y=f(1),m=f(68),C=f(0),w=f(2);u.MINIMUM_COLS=2,u.MINIMUM_ROWS=1;var E=function(h){function r(f){var d=h.call(this)||this;return d._optionsService=f,d.isUserScrolling=!1,d._onResize=new C.EventEmitter,d.cols=Math.max(f.options.cols,u.MINIMUM_COLS),d.rows=Math.max(f.options.rows,u.MINIMUM_ROWS),d.buffers=new m.BufferSet(f,d),d}return p(r,h),Object.defineProperty(r.prototype,"onResize",{get:function(){return this._onResize.event},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"buffer",{get:function(){return this.buffers.active},enumerable:!1,configurable:!0}),r.prototype.dispose=function(){h.prototype.dispose.call(this),this.buffers.dispose()},r.prototype.resize=function(h,u){this.cols=h,this.rows=u,this.buffers.resize(h,u),this.buffers.setupTabStops(this.cols),this._onResize.fire({cols:h,rows:u})},r.prototype.reset=function(){this.buffers.dispose(),this.buffers=new m.BufferSet(this._optionsService,this),this.isUserScrolling=!1},v([g(0,y.IOptionsService)],r)}(w.Disposable);u.BufferService=E},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.BufferSet=void 0;var v=f(69),g=f(0),y=function(h){function t(u,f){var d=h.call(this)||this;return d._onBufferActivate=d.register(new g.EventEmitter),d._normal=new v.Buffer(!0,u,f),d._normal.fillViewportRows(),d._alt=new v.Buffer(!1,u,f),d._activeBuffer=d._normal,d.setupTabStops(),d}return p(t,h),Object.defineProperty(t.prototype,"onBufferActivate",{get:function(){return this._onBufferActivate.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"alt",{get:function(){return this._alt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return this._activeBuffer},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"normal",{get:function(){return this._normal},enumerable:!1,configurable:!0}),t.prototype.activateNormalBuffer=function(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))},t.prototype.activateAltBuffer=function(h){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(h),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))},t.prototype.resize=function(h,u){this._normal.resize(h,u),this._alt.resize(h,u)},t.prototype.setupTabStops=function(h){this._normal.setupTabStops(h),this._alt.setupTabStops(h)},t}(f(2).Disposable);u.BufferSet=y},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.BufferStringIterator=u.Buffer=u.MAX_BUFFER_SIZE=void 0;var d=f(70),p=f(16),v=f(4),g=f(3),y=f(71),m=f(72),C=f(19),w=f(6);u.MAX_BUFFER_SIZE=4294967295;var E=function(){function e(h,u,f){this._hasScrollback=h,this._optionsService=u,this._bufferService=f,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.savedY=0,this.savedX=0,this.savedCurAttrData=p.DEFAULT_ATTR_DATA.clone(),this.savedCharset=C.DEFAULT_CHARSET,this.markers=[],this._nullCell=v.CellData.fromCharData([0,g.NULL_CELL_CHAR,g.NULL_CELL_WIDTH,g.NULL_CELL_CODE]),this._whitespaceCell=v.CellData.fromCharData([0,g.WHITESPACE_CELL_CHAR,g.WHITESPACE_CELL_WIDTH,g.WHITESPACE_CELL_CODE]),this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}return e.prototype.getNullCell=function(h){return h?(this._nullCell.fg=h.fg,this._nullCell.bg=h.bg,this._nullCell.extended=h.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new w.ExtendedAttrs),this._nullCell},e.prototype.getWhitespaceCell=function(h){return h?(this._whitespaceCell.fg=h.fg,this._whitespaceCell.bg=h.bg,this._whitespaceCell.extended=h.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new w.ExtendedAttrs),this._whitespaceCell},e.prototype.getBlankLine=function(h,u){return new p.BufferLine(this._bufferService.cols,this.getNullCell(h),u)},Object.defineProperty(e.prototype,"hasScrollback",{get:function(){return this._hasScrollback&&this.lines.maxLength>this._rows},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCursorInViewport",{get:function(){var h=this.ybase+this.y-this.ydisp;return h>=0&&h<this._rows},enumerable:!1,configurable:!0}),e.prototype._getCorrectBufferLength=function(h){if(!this._hasScrollback)return h;var f=h+this._optionsService.options.scrollback;return f>u.MAX_BUFFER_SIZE?u.MAX_BUFFER_SIZE:f},e.prototype.fillViewportRows=function(h){if(0===this.lines.length){void 0===h&&(h=p.DEFAULT_ATTR_DATA);for(var u=this._rows;u--;)this.lines.push(this.getBlankLine(h))}},e.prototype.clear=function(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()},e.prototype.resize=function(h,u){var f=this.getNullCell(p.DEFAULT_ATTR_DATA),d=this._getCorrectBufferLength(u);if(d>this.lines.maxLength&&(this.lines.maxLength=d),this.lines.length>0){if(this._cols<h)for(var v=0;v<this.lines.length;v++)this.lines.get(v).resize(h,f);var g=0;if(this._rows<u)for(var y=this._rows;y<u;y++)this.lines.length<u+this.ybase&&(this._optionsService.options.windowsMode?this.lines.push(new p.BufferLine(h,f)):this.ybase>0&&this.lines.length<=this.ybase+this.y+g+1?(this.ybase--,g++,this.ydisp>0&&this.ydisp--):this.lines.push(new p.BufferLine(h,f)));else for(y=this._rows;y>u;y--)this.lines.length>u+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(d<this.lines.maxLength){var m=this.lines.length-d;m>0&&(this.lines.trimStart(m),this.ybase=Math.max(this.ybase-m,0),this.ydisp=Math.max(this.ydisp-m,0),this.savedY=Math.max(this.savedY-m,0)),this.lines.maxLength=d}this.x=Math.min(this.x,h-1),this.y=Math.min(this.y,u-1),g&&(this.y+=g),this.savedX=Math.min(this.savedX,h-1),this.scrollTop=0}if(this.scrollBottom=u-1,this._isReflowEnabled&&(this._reflow(h,u),this._cols>h))for(v=0;v<this.lines.length;v++)this.lines.get(v).resize(h,f);this._cols=h,this._rows=u},Object.defineProperty(e.prototype,"_isReflowEnabled",{get:function(){return this._hasScrollback&&!this._optionsService.options.windowsMode},enumerable:!1,configurable:!0}),e.prototype._reflow=function(h,u){this._cols!==h&&(h>this._cols?this._reflowLarger(h,u):this._reflowSmaller(h,u))},e.prototype._reflowLarger=function(h,u){var f=y.reflowLargerGetLinesToRemove(this.lines,this._cols,h,this.ybase+this.y,this.getNullCell(p.DEFAULT_ATTR_DATA));if(f.length>0){var d=y.reflowLargerCreateNewLayout(this.lines,f);y.reflowLargerApplyNewLayout(this.lines,d.layout),this._reflowLargerAdjustViewport(h,u,d.countRemoved)}},e.prototype._reflowLargerAdjustViewport=function(h,u,f){for(var d=this.getNullCell(p.DEFAULT_ATTR_DATA),v=f;v-- >0;)0===this.ybase?(this.y>0&&this.y--,this.lines.length<u&&this.lines.push(new p.BufferLine(h,d))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-f,0)},e.prototype._reflowSmaller=function(h,u){for(var f=this.getNullCell(p.DEFAULT_ATTR_DATA),d=[],v=0,g=this.lines.length-1;g>=0;g--){var m=this.lines.get(g);if(!(!m||!m.isWrapped&&m.getTrimmedLength()<=h)){for(var C=[m];m.isWrapped&&g>0;)m=this.lines.get(--g),C.unshift(m);var w=this.ybase+this.y;if(!(w>=g&&w<g+C.length)){var E=C[C.length-1].getTrimmedLength(),L=y.reflowSmallerGetNewLineLengths(C,this._cols,h),A=L.length-C.length,R=void 0;R=0===this.ybase&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+A):Math.max(0,this.lines.length-this.lines.maxLength+A);for(var k=[],x=0;x<A;x++){var D=this.getBlankLine(p.DEFAULT_ATTR_DATA,!0);k.push(D)}k.length>0&&(d.push({start:g+C.length+v,newLines:k}),v+=k.length),C.push.apply(C,k);var O=L.length-1,T=L[O];0===T&&(T=L[--O]);for(var M=C.length-A-1,P=E;M>=0;){var I=Math.min(P,T);if(C[O].copyCellsFrom(C[M],P-I,T-I,I,!0),0==(T-=I)&&(T=L[--O]),0==(P-=I)){M--;var H=Math.max(M,0);P=y.getWrappedLineTrimmedLength(C,H,this._cols)}}for(x=0;x<C.length;x++)L[x]<h&&C[x].setCell(L[x],f);for(var B=A-R;B-- >0;)0===this.ybase?this.y<u-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+v)-u&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+A,this.ybase+u-1)}}}if(d.length>0){var F=[],j=[];for(x=0;x<this.lines.length;x++)j.push(this.lines.get(x));var W=this.lines.length,U=W-1,q=0,N=d[q];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+v);var z=0;for(x=Math.min(this.lines.maxLength-1,W+v-1);x>=0;x--)if(N&&N.start>U+z){for(var K=N.newLines.length-1;K>=0;K--)this.lines.set(x--,N.newLines[K]);x++,F.push({index:U+1,amount:N.newLines.length}),z+=N.newLines.length,N=d[++q]}else this.lines.set(x,j[U--]);var V=0;for(x=F.length-1;x>=0;x--)F[x].index+=V,this.lines.onInsertEmitter.fire(F[x]),V+=F[x].amount;var G=Math.max(0,W+v-this.lines.maxLength);G>0&&this.lines.onTrimEmitter.fire(G)}},e.prototype.stringIndexToBufferIndex=function(h,u,f){for(void 0===f&&(f=!1);u;){var d=this.lines.get(h);if(!d)return[-1,-1];for(var p=f?d.getTrimmedLength():d.length,v=0;v<p;++v)if(d.get(v)[g.CHAR_DATA_WIDTH_INDEX]&&(u-=d.get(v)[g.CHAR_DATA_CHAR_INDEX].length||1),u<0)return[h,v];h++}return[h,0]},e.prototype.translateBufferLineToString=function(h,u,f,d){void 0===f&&(f=0);var p=this.lines.get(h);return p?p.translateToString(u,f,d):""},e.prototype.getWrappedRangeForLine=function(h){for(var u=h,f=h;u>0&&this.lines.get(u).isWrapped;)u--;for(;f+1<this.lines.length&&this.lines.get(f+1).isWrapped;)f++;return{first:u,last:f}},e.prototype.setupTabStops=function(h){for(null!=h?this.tabs[h]||(h=this.prevStop(h)):(this.tabs={},h=0);h<this._cols;h+=this._optionsService.options.tabStopWidth)this.tabs[h]=!0},e.prototype.prevStop=function(h){for(null==h&&(h=this.x);!this.tabs[--h]&&h>0;);return h>=this._cols?this._cols-1:h<0?0:h},e.prototype.nextStop=function(h){for(null==h&&(h=this.x);!this.tabs[++h]&&h<this._cols;);return h>=this._cols?this._cols-1:h<0?0:h},e.prototype.addMarker=function(h){var u=this,f=new m.Marker(h);return this.markers.push(f),f.register(this.lines.onTrim((function(h){f.line-=h,f.line<0&&f.dispose()}))),f.register(this.lines.onInsert((function(h){f.line>=h.index&&(f.line+=h.amount)}))),f.register(this.lines.onDelete((function(h){f.line>=h.index&&f.line<h.index+h.amount&&f.dispose(),f.line>h.index&&(f.line-=h.amount)}))),f.register(f.onDispose((function(){return u._removeMarker(f)}))),f},e.prototype._removeMarker=function(h){this.markers.splice(this.markers.indexOf(h),1)},e.prototype.iterator=function(h,u,f,d,p){return new L(this,h,u,f,d,p)},e}();u.Buffer=E;var L=function(){function e(h,u,f,d,p,v){void 0===f&&(f=0),void 0===d&&(d=h.lines.length),void 0===p&&(p=0),void 0===v&&(v=0),this._buffer=h,this._trimRight=u,this._startIndex=f,this._endIndex=d,this._startOverscan=p,this._endOverscan=v,this._startIndex<0&&(this._startIndex=0),this._endIndex>this._buffer.lines.length&&(this._endIndex=this._buffer.lines.length),this._current=this._startIndex}return e.prototype.hasNext=function(){return this._current<this._endIndex},e.prototype.next=function(){var h=this._buffer.getWrappedRangeForLine(this._current);h.first<this._startIndex-this._startOverscan&&(h.first=this._startIndex-this._startOverscan),h.last>this._endIndex+this._endOverscan&&(h.last=this._endIndex+this._endOverscan),h.first=Math.max(h.first,0),h.last=Math.min(h.last,this._buffer.lines.length);for(var u="",f=h.first;f<=h.last;++f)u+=this._buffer.translateBufferLineToString(f,this._trimRight);return this._current=h.last+1,{range:h,content:u}},e}();u.BufferStringIterator=L},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CircularList=void 0;var d=f(0),p=function(){function e(h){this._maxLength=h,this.onDeleteEmitter=new d.EventEmitter,this.onInsertEmitter=new d.EventEmitter,this.onTrimEmitter=new d.EventEmitter,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}return Object.defineProperty(e.prototype,"onDelete",{get:function(){return this.onDeleteEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onInsert",{get:function(){return this.onInsertEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"onTrim",{get:function(){return this.onTrimEmitter.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(h){if(this._maxLength!==h){for(var u=new Array(h),f=0;f<Math.min(h,this.length);f++)u[f]=this._array[this._getCyclicIndex(f)];this._array=u,this._maxLength=h,this._startIndex=0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(h){if(h>this._length)for(var u=this._length;u<h;u++)this._array[u]=void 0;this._length=h},enumerable:!1,configurable:!0}),e.prototype.get=function(h){return this._array[this._getCyclicIndex(h)]},e.prototype.set=function(h,u){this._array[this._getCyclicIndex(h)]=u},e.prototype.push=function(h){this._array[this._getCyclicIndex(this._length)]=h,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++},e.prototype.recycle=function(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]},Object.defineProperty(e.prototype,"isFull",{get:function(){return this._length===this._maxLength},enumerable:!1,configurable:!0}),e.prototype.pop=function(){return this._array[this._getCyclicIndex(this._length---1)]},e.prototype.splice=function(h,u){for(var f=[],d=2;d<arguments.length;d++)f[d-2]=arguments[d];if(u){for(var p=h;p<this._length-u;p++)this._array[this._getCyclicIndex(p)]=this._array[this._getCyclicIndex(p+u)];this._length-=u}for(p=this._length-1;p>=h;p--)this._array[this._getCyclicIndex(p+f.length)]=this._array[this._getCyclicIndex(p)];for(p=0;p<f.length;p++)this._array[this._getCyclicIndex(h+p)]=f[p];if(this._length+f.length>this._maxLength){var v=this._length+f.length-this._maxLength;this._startIndex+=v,this._length=this._maxLength,this.onTrimEmitter.fire(v)}else this._length+=f.length},e.prototype.trimStart=function(h){h>this._length&&(h=this._length),this._startIndex+=h,this._length-=h,this.onTrimEmitter.fire(h)},e.prototype.shiftElements=function(h,u,f){if(!(u<=0)){if(h<0||h>=this._length)throw new Error("start argument out of range");if(h+f<0)throw new Error("Cannot shift elements in list beyond index 0");if(f>0){for(var d=u-1;d>=0;d--)this.set(h+d+f,this.get(h+d));var p=h+u+f-this._length;if(p>0)for(this._length+=p;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(d=0;d<u;d++)this.set(h+d+f,this.get(h+d))}},e.prototype._getCyclicIndex=function(h){return(this._startIndex+h)%this._maxLength},e}();u.CircularList=p},function(h,u,f){"use strict";function i(h,u,f){if(u===h.length-1)return h[u].getTrimmedLength();var d=!h[u].hasContent(f-1)&&1===h[u].getWidth(f-1),p=2===h[u+1].getWidth(0);return d&&p?f-1:f}Object.defineProperty(u,"__esModule",{value:!0}),u.getWrappedLineTrimmedLength=u.reflowSmallerGetNewLineLengths=u.reflowLargerApplyNewLayout=u.reflowLargerCreateNewLayout=u.reflowLargerGetLinesToRemove=void 0,u.reflowLargerGetLinesToRemove=function(h,u,f,d,p){for(var v=[],g=0;g<h.length-1;g++){var y=g,m=h.get(++y);if(m.isWrapped){for(var C=[h.get(g)];y<h.length&&m.isWrapped;)C.push(m),m=h.get(++y);if(d>=g&&d<y)g+=C.length-1;else{for(var w=0,E=i(C,w,u),L=1,A=0;L<C.length;){var R=i(C,L,u),k=R-A,x=f-E,D=Math.min(k,x);C[w].copyCellsFrom(C[L],A,E,D,!1),(E+=D)===f&&(w++,E=0),(A+=D)===R&&(L++,A=0),0===E&&0!==w&&2===C[w-1].getWidth(f-1)&&(C[w].copyCellsFrom(C[w-1],f-1,E++,1,!1),C[w-1].setCell(f-1,p))}C[w].replaceCells(E,f,p);for(var O=0,T=C.length-1;T>0&&(T>w||0===C[T].getTrimmedLength());T--)O++;O>0&&(v.push(g+C.length-O),v.push(O)),g+=C.length-1}}}return v},u.reflowLargerCreateNewLayout=function(h,u){for(var f=[],d=0,p=u[d],v=0,g=0;g<h.length;g++)if(p===g){var y=u[++d];h.onDeleteEmitter.fire({index:g-v,amount:y}),g+=y-1,v+=y,p=u[++d]}else f.push(g);return{layout:f,countRemoved:v}},u.reflowLargerApplyNewLayout=function(h,u){for(var f=[],d=0;d<u.length;d++)f.push(h.get(u[d]));for(d=0;d<f.length;d++)h.set(d,f[d]);h.length=u.length},u.reflowSmallerGetNewLineLengths=function(h,u,f){for(var d=[],p=h.map((function(f,d){return i(h,d,u)})).reduce((function(h,u){return h+u})),v=0,g=0,y=0;y<p;){if(p-y<f){d.push(p-y);break}v+=f;var m=i(h,g,u);v>m&&(v-=m,g++);var C=2===h[g].getWidth(v-1);C&&v--;var w=C?f-1:f;d.push(w),y+=w}return d},u.getWrappedLineTrimmedLength=i},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)});Object.defineProperty(u,"__esModule",{value:!0}),u.Marker=void 0;var v=f(0),g=function(h){function t(u){var f=h.call(this)||this;return f.line=u,f._id=t._nextId++,f.isDisposed=!1,f._onDispose=new v.EventEmitter,f}return p(t,h),Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onDispose",{get:function(){return this._onDispose.event},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire())},t._nextId=1,t}(f(2).Disposable);u.Marker=g},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.OptionsService=u.DEFAULT_OPTIONS=u.DEFAULT_BELL_SOUND=void 0;var d=f(0),p=f(11),v=f(32);u.DEFAULT_BELL_SOUND="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4LjMyLjEwNAAAAAAAAAAAAAAA//tQxAADB8AhSmxhIIEVCSiJrDCQBTcu3UrAIwUdkRgQbFAZC1CQEwTJ9mjRvBA4UOLD8nKVOWfh+UlK3z/177OXrfOdKl7pyn3Xf//WreyTRUoAWgBgkOAGbZHBgG1OF6zM82DWbZaUmMBptgQhGjsyYqc9ae9XFz280948NMBWInljyzsNRFLPWdnZGWrddDsjK1unuSrVN9jJsK8KuQtQCtMBjCEtImISdNKJOopIpBFpNSMbIHCSRpRR5iakjTiyzLhchUUBwCgyKiweBv/7UsQbg8isVNoMPMjAAAA0gAAABEVFGmgqK////9bP/6XCykxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",u.DEFAULT_OPTIONS=Object.freeze({cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,bellSound:u.DEFAULT_BELL_SOUND,bellStyle:"none",drawBoldTextInBrightColors:!0,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",lineHeight:1,linkTooltipHoverDuration:500,letterSpacing:0,logLevel:"info",scrollback:1e3,scrollSensitivity:1,screenReaderMode:!1,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!0,allowTransparency:!1,tabStopWidth:8,theme:{},rightClickSelectsWord:p.isMac,rendererType:"canvas",windowOptions:{},windowsMode:!1,wordSeparator:" ()[]{}',\"`",convertEol:!1,termName:"xterm",cancelEvents:!1});var g=["cols","rows"],y=function(){function e(h){var f=this;this._onOptionChange=new d.EventEmitter,this.options=v.clone(u.DEFAULT_OPTIONS),Object.keys(h).forEach((function(u){if(u in f.options){var d=h[u];f.options[u]=d}}))}return Object.defineProperty(e.prototype,"onOptionChange",{get:function(){return this._onOptionChange.event},enumerable:!1,configurable:!0}),e.prototype.setOption=function(h,f){if(!(h in u.DEFAULT_OPTIONS))throw new Error('No option with key "'+h+'"');if(-1!==g.indexOf(h))throw new Error('Option "'+h+'" can only be set in the constructor');this.options[h]!==f&&(f=this._sanitizeAndValidateOption(h,f),this.options[h]!==f&&(this.options[h]=f,this._onOptionChange.fire(h)))},e.prototype._sanitizeAndValidateOption=function(h,f){switch(h){case"bellStyle":case"cursorStyle":case"fontWeight":case"fontWeightBold":case"rendererType":case"wordSeparator":f||(f=u.DEFAULT_OPTIONS[h]);break;case"cursorWidth":f=Math.floor(f);case"lineHeight":case"tabStopWidth":if(f<1)throw new Error(h+" cannot be less than 1, value: "+f);break;case"minimumContrastRatio":f=Math.max(1,Math.min(21,Math.round(10*f)/10));break;case"scrollback":if((f=Math.min(f,4294967295))<0)throw new Error(h+" cannot be less than 0, value: "+f);break;case"fastScrollSensitivity":case"scrollSensitivity":if(f<=0)throw new Error(h+" cannot be less than or equal to 0, value: "+f)}return f},e.prototype.getOption=function(h){if(!(h in u.DEFAULT_OPTIONS))throw new Error('No option with key "'+h+'"');return this.options[h]},e}();u.OptionsService=y},function(h,u,f){"use strict";var d,p=this&&this.__extends||(d=function(h,u){return(d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,u){h.__proto__=u}||function(h,u){for(var f in u)u.hasOwnProperty(f)&&(h[f]=u[f])})(h,u)},function(h,u){function r(){this.constructor=h}d(h,u),h.prototype=null===u?Object.create(u):(r.prototype=u.prototype,new r)}),v=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},g=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CoreService=void 0;var y=f(1),m=f(0),C=f(32),w=f(2),E=Object.freeze({insertMode:!1}),L=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0}),A=function(h){function t(u,f,d,p){var v=h.call(this)||this;return v._bufferService=f,v._logService=d,v._optionsService=p,v.isCursorInitialized=!1,v.isCursorHidden=!1,v._onData=v.register(new m.EventEmitter),v._onUserInput=v.register(new m.EventEmitter),v._onBinary=v.register(new m.EventEmitter),v._scrollToBottom=u,v.register({dispose:function(){return v._scrollToBottom=void 0}}),v.modes=C.clone(E),v.decPrivateModes=C.clone(L),v}return p(t,h),Object.defineProperty(t.prototype,"onData",{get:function(){return this._onData.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onUserInput",{get:function(){return this._onUserInput.event},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"onBinary",{get:function(){return this._onBinary.event},enumerable:!1,configurable:!0}),t.prototype.reset=function(){this.modes=C.clone(E),this.decPrivateModes=C.clone(L)},t.prototype.triggerDataEvent=function(h,u){if(void 0===u&&(u=!1),!this._optionsService.options.disableStdin){var f=this._bufferService.buffer;f.ybase!==f.ydisp&&this._scrollToBottom(),u&&this._onUserInput.fire(),this._logService.debug('sending data "'+h+'"',(function(){return h.split("").map((function(h){return h.charCodeAt(0)}))})),this._onData.fire(h)}},t.prototype.triggerBinaryEvent=function(h){this._optionsService.options.disableStdin||(this._logService.debug('sending binary "'+h+'"',(function(){return h.split("").map((function(h){return h.charCodeAt(0)}))})),this._onBinary.fire(h))},v([g(1,y.IBufferService),g(2,y.ILogService),g(3,y.IOptionsService)],t)}(w.Disposable);u.CoreService=A},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.CoreMouseService=void 0;var v=f(1),g=f(0),y={NONE:{events:0,restrict:function(){return!1}},X10:{events:1,restrict:function(h){return 4!==h.button&&1===h.action&&(h.ctrl=!1,h.alt=!1,h.shift=!1,!0)}},VT200:{events:19,restrict:function(h){return 32!==h.action}},DRAG:{events:23,restrict:function(h){return 32!==h.action||3!==h.button}},ANY:{events:31,restrict:function(h){return!0}}};function c(h,u){var f=(h.ctrl?16:0)|(h.shift?4:0)|(h.alt?8:0);return 4===h.button?(f|=64,f|=h.action):(f|=3&h.button,4&h.button&&(f|=64),8&h.button&&(f|=128),32===h.action?f|=32:0!==h.action||u||(f|=3)),f}var m=String.fromCharCode,C={DEFAULT:function(h){var u=[c(h,!1)+32,h.col+32,h.row+32];return u[0]>255||u[1]>255||u[2]>255?"":"[M"+m(u[0])+m(u[1])+m(u[2])},SGR:function(h){var u=0===h.action&&4!==h.button?"m":"M";return"[<"+c(h,!0)+";"+h.col+";"+h.row+u}},w=function(){function e(h,u){var f=this;this._bufferService=h,this._coreService=u,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._onProtocolChange=new g.EventEmitter,this._lastEvent=null,Object.keys(y).forEach((function(h){return f.addProtocol(h,y[h])})),Object.keys(C).forEach((function(h){return f.addEncoding(h,C[h])})),this.reset()}return e.prototype.addProtocol=function(h,u){this._protocols[h]=u},e.prototype.addEncoding=function(h,u){this._encodings[h]=u},Object.defineProperty(e.prototype,"activeProtocol",{get:function(){return this._activeProtocol},set:function(h){if(!this._protocols[h])throw new Error('unknown protocol "'+h+'"');this._activeProtocol=h,this._onProtocolChange.fire(this._protocols[h].events)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"areMouseEventsActive",{get:function(){return 0!==this._protocols[this._activeProtocol].events},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeEncoding",{get:function(){return this._activeEncoding},set:function(h){if(!this._encodings[h])throw new Error('unknown encoding "'+h+'"');this._activeEncoding=h},enumerable:!1,configurable:!0}),e.prototype.reset=function(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null},Object.defineProperty(e.prototype,"onProtocolChange",{get:function(){return this._onProtocolChange.event},enumerable:!1,configurable:!0}),e.prototype.triggerMouseEvent=function(h){if(h.col<0||h.col>=this._bufferService.cols||h.row<0||h.row>=this._bufferService.rows)return!1;if(4===h.button&&32===h.action)return!1;if(3===h.button&&32!==h.action)return!1;if(4!==h.button&&(2===h.action||3===h.action))return!1;if(h.col++,h.row++,32===h.action&&this._lastEvent&&this._compareEvents(this._lastEvent,h))return!1;if(!this._protocols[this._activeProtocol].restrict(h))return!1;var u=this._encodings[this._activeEncoding](h);return u&&("DEFAULT"===this._activeEncoding?this._coreService.triggerBinaryEvent(u):this._coreService.triggerDataEvent(u,!0)),this._lastEvent=h,!0},e.prototype.explainEvents=function(h){return{down:!!(1&h),up:!!(2&h),drag:!!(4&h),move:!!(8&h),wheel:!!(16&h)}},e.prototype._compareEvents=function(h,u){return h.col===u.col&&h.row===u.row&&h.button===u.button&&h.action===u.action&&h.ctrl===u.ctrl&&h.alt===u.alt&&h.shift===u.shift},d([p(0,v.IBufferService),p(1,v.ICoreService)],e)}();u.CoreMouseService=w},function(h,u,f){"use strict";var d=this&&this.__decorate||function(h,u,f,d){var p,v=arguments.length,g=v<3?u:null===d?d=Object.getOwnPropertyDescriptor(u,f):d;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)g=Reflect.decorate(h,u,f,d);else for(var y=h.length-1;y>=0;y--)(p=h[y])&&(g=(v<3?p(g):v>3?p(u,f,g):p(u,f))||g);return v>3&&g&&Object.defineProperty(u,f,g),g},p=this&&this.__param||function(h,u){return function(f,d){u(f,d,h)}};Object.defineProperty(u,"__esModule",{value:!0}),u.DirtyRowService=void 0;var v=f(1),g=function(){function e(h){this._bufferService=h,this.clearRange()}return Object.defineProperty(e.prototype,"start",{get:function(){return this._start},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"end",{get:function(){return this._end},enumerable:!1,configurable:!0}),e.prototype.clearRange=function(){this._start=this._bufferService.buffer.y,this._end=this._bufferService.buffer.y},e.prototype.markDirty=function(h){h<this._start?this._start=h:h>this._end&&(this._end=h)},e.prototype.markRangeDirty=function(h,u){if(h>u){var f=h;h=u,u=f}h<this._start&&(this._start=h),u>this._end&&(this._end=u)},e.prototype.markAllDirty=function(){this.markRangeDirty(0,this._bufferService.rows-1)},d([p(0,v.IBufferService)],e)}();u.DirtyRowService=g},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UnicodeService=void 0;var d=f(0),p=f(78),v=function(){function e(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter;var h=new p.UnicodeV6;this.register(h),this._active=h.version,this._activeProvider=h}return Object.defineProperty(e.prototype,"onChange",{get:function(){return this._onChange.event},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"versions",{get:function(){return Object.keys(this._providers)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeVersion",{get:function(){return this._active},set:function(h){if(!this._providers[h])throw new Error('unknown Unicode version "'+h+'"');this._active=h,this._activeProvider=this._providers[h],this._onChange.fire(h)},enumerable:!1,configurable:!0}),e.prototype.register=function(h){this._providers[h.version]=h},e.prototype.wcwidth=function(h){return this._activeProvider.wcwidth(h)},e.prototype.getStringCellWidth=function(h){for(var u=0,f=h.length,d=0;d<f;++d){var p=h.charCodeAt(d);if(55296<=p&&p<=56319){if(++d>=f)return u+this.wcwidth(p);var v=h.charCodeAt(d);56320<=v&&v<=57343?p=1024*(p-55296)+v-56320+65536:u+=this.wcwidth(v)}u+=this.wcwidth(p)}return u},e}();u.UnicodeService=v},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.UnicodeV6=void 0;var d,p=f(15),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],g=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]],y=function(){function e(){if(this.version="6",!d){d=new Uint8Array(65536),p.fill(d,1),d[0]=0,p.fill(d,0,1,32),p.fill(d,0,127,160),p.fill(d,2,4352,4448),d[9001]=2,d[9002]=2,p.fill(d,2,11904,42192),d[12351]=1,p.fill(d,2,44032,55204),p.fill(d,2,63744,64256),p.fill(d,2,65040,65050),p.fill(d,2,65072,65136),p.fill(d,2,65280,65377),p.fill(d,2,65504,65511);for(var h=0;h<v.length;++h)p.fill(d,0,v[h][0],v[h][1]+1)}}return e.prototype.wcwidth=function(h){return h<32?0:h<127?1:h<65536?d[h]:function(h,u){var f,d=0,p=u.length-1;if(h<u[0][0]||h>u[p][1])return!1;for(;p>=d;)if(h>u[f=d+p>>1][1])d=f+1;else{if(!(h<u[f][0]))return!0;p=f-1}return!1}(h,g)?0:h>=131072&&h<=196605||h>=196608&&h<=262141?2:1},e}();u.UnicodeV6=y},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.CharsetService=void 0;var d=function(){function e(){this.glevel=0,this._charsets=[]}return e.prototype.reset=function(){this.charset=void 0,this._charsets=[],this.glevel=0},e.prototype.setgLevel=function(h){this.glevel=h,this.charset=this._charsets[h]},e.prototype.setgCharset=function(h,u){this._charsets[h]=u,this.glevel===h&&(this.charset=u)},e}();u.CharsetService=d},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.updateWindowsModeWrappedState=void 0;var d=f(3);u.updateWindowsModeWrappedState=function(h){var u=h.buffer.lines.get(h.buffer.ybase+h.buffer.y-1),f=null==u?void 0:u.get(h.cols-1),p=h.buffer.lines.get(h.buffer.ybase+h.buffer.y);p&&f&&(p.isWrapped=f[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&f[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.WriteBuffer=void 0;var d=function(){function e(h){this._action=h,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0}return e.prototype.writeSync=function(h){if(this._writeBuffer.length){for(var u=this._bufferOffset;u<this._writeBuffer.length;++u){var f=this._writeBuffer[u],d=this._callbacks[u];this._action(f),d&&d()}this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=2147483647}this._action(h)},e.prototype.write=function(h,u){var f=this;if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");this._writeBuffer.length||(this._bufferOffset=0,setTimeout((function(){return f._innerWrite()}))),this._pendingData+=h.length,this._writeBuffer.push(h),this._callbacks.push(u)},e.prototype._innerWrite=function(){for(var h=this,u=Date.now();this._writeBuffer.length>this._bufferOffset;){var f=this._writeBuffer[this._bufferOffset],d=this._callbacks[this._bufferOffset];if(this._bufferOffset++,this._action(f),this._pendingData-=f.length,d&&d(),Date.now()-u>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((function(){return h._innerWrite()}),0)):(this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0)},e}();u.WriteBuffer=d},function(h,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),u.AddonManager=void 0;var d=function(){function e(){this._addons=[]}return e.prototype.dispose=function(){for(var h=this._addons.length-1;h>=0;h--)this._addons[h].instance.dispose()},e.prototype.loadAddon=function(h,u){var f=this,d={instance:u,dispose:u.dispose,isDisposed:!1};this._addons.push(d),u.dispose=function(){return f._wrappedAddonDispose(d)},u.activate(h)},e.prototype._wrappedAddonDispose=function(h){if(!h.isDisposed){for(var u=-1,f=0;f<this._addons.length;f++)if(this._addons[f]===h){u=f;break}if(-1===u)throw new Error("Could not dispose an addon that has not been loaded");h.isDisposed=!0,h.dispose.apply(h.instance),this._addons.splice(u,1)}},e}();u.AddonManager=d}])},I6JG:function(h,u,f){"use strict";f.d(u,"a",(function(){return p}));var d=f("q1tI");function _extends(){return(_extends=Object.assign||function(h){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(h[d]=f[d])}return h}).apply(this,arguments)}function _objectWithoutProperties(h,u){if(null==h)return{};var f,d,p=function _objectWithoutPropertiesLoose(h,u){if(null==h)return{};var f,d,p={},v=Object.keys(h);for(d=0;d<v.length;d++)f=v[d],u.indexOf(f)>=0||(p[f]=h[f]);return p}(h,u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(h);for(d=0;d<v.length;d++)f=v[d],u.indexOf(f)>=0||Object.prototype.propertyIsEnumerable.call(h,f)&&(p[f]=h[f])}return p}var p=d.forwardRef((function RefreshIcon(h,u){var f=h.title,p=void 0===f?"Refresh Icon":f,v=h.titleId,g=h.size,y=h.color,m=h.width,C=h.height,w=_objectWithoutProperties(h,["title","titleId","size","color","width","height"]);return d.createElement("svg",_extends({viewBox:"0 0 24 24",width:g||m||"16px",height:g||C||"16px",fill:y||"currentColor",role:"img",ref:u,"aria-labelledby":v},w),void 0===p?d.createElement("title",{id:v},"button-refresh-arrow"):p?d.createElement("title",{id:v},p):null,d.createElement("path",{d:"M12.723 22.497c-1.385 0-2.737-.271-4.019-.804a.747.747 0 01-.404-.98.748.748 0 01.98-.405 8.924 8.924 0 003.445.689 8.935 8.935 0 006.204-2.489 8.91 8.91 0 002.762-6.283 8.911 8.911 0 00-2.482-6.399 8.892 8.892 0 00-6.483-2.765 8.921 8.921 0 00-6.199 2.485 8.937 8.937 0 00-2.746 5.833c-.14 2 .375 3.948 1.462 5.589v-2.72a.75.75 0 011.5 0v4.5a.75.75 0 01-.75.75h-.238a.364.364 0 01-.096 0H1.493a.75.75 0 010-1.5h2.636a10.467 10.467 0 01-1.822-6.964l.007-.076.019-.197.006-.045A10.54 10.54 0 015.497 4.42a10.465 10.465 0 017.264-2.913c1.385 0 2.738.269 4.019.8a.74.74 0 01.26.18 10.382 10.382 0 013.253 2.301c3.991 4.171 3.844 10.812-.327 14.803a10.43 10.43 0 01-7.241 2.905h-.002z"}))}))},VKDU:function(h,u,f){"use strict";f.d(u,"a",(function(){return p}));var d=f("q1tI");function _extends(){return(_extends=Object.assign||function(h){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(h[d]=f[d])}return h}).apply(this,arguments)}function _objectWithoutProperties(h,u){if(null==h)return{};var f,d,p=function _objectWithoutPropertiesLoose(h,u){if(null==h)return{};var f,d,p={},v=Object.keys(h);for(d=0;d<v.length;d++)f=v[d],u.indexOf(f)>=0||(p[f]=h[f]);return p}(h,u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(h);for(d=0;d<v.length;d++)f=v[d],u.indexOf(f)>=0||Object.prototype.propertyIsEnumerable.call(h,f)&&(p[f]=h[f])}return p}var p=d.forwardRef((function ObjectiveIcon(h,u){var f=h.title,p=void 0===f?"Objective Icon":f,v=h.titleId,g=h.size,y=h.color,m=h.width,C=h.height,w=_objectWithoutProperties(h,["title","titleId","size","color","width","height"]);return d.createElement("svg",_extends({viewBox:"0 0 24 24",width:g||m||"16px",height:g||C||"16px",fill:y||"currentColor",role:"img",ref:u,"aria-labelledby":v},w),void 0===p?d.createElement("title",{id:v},"target-center"):p?d.createElement("title",{id:v},p):null,d.createElement("path",{fill:"none",stroke:y||"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.016 11.859l4.167-4.167m0 0l.568-3.75L18.999.75l.502 2.624 2.624.502-3.192 3.248-3.75.568zm5.872 1.821A9.75 9.75 0 1112.614 2.3m4.108 8.437a5.251 5.251 0 11-5.1-3.987m-5.106 13.5l-.75 3m11.25-3l.75 3"}))}))},YhNG:function(h,u,f){"use strict";f.d(u,"a",(function(){return p}));var d=f("q1tI");function _extends(){return(_extends=Object.assign||function(h){for(var u=1;u<arguments.length;u++){var f=arguments[u];for(var d in f)Object.prototype.hasOwnProperty.call(f,d)&&(h[d]=f[d])}return h}).apply(this,arguments)}function _objectWithoutProperties(h,u){if(null==h)return{};var f,d,p=function _objectWithoutPropertiesLoose(h,u){if(null==h)return{};var f,d,p={},v=Object.keys(h);for(d=0;d<v.length;d++)f=v[d],u.indexOf(f)>=0||(p[f]=h[f]);return p}(h,u);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(h);for(d=0;d<v.length;d++)f=v[d],u.indexOf(f)>=0||Object.prototype.propertyIsEnumerable.call(h,f)&&(p[f]=h[f])}return p}var p=d.forwardRef((function ExploreIcon(h,u){var f=h.title,p=void 0===f?"Explore Icon":f,v=h.titleId,g=h.size,y=h.color,m=h.width,C=h.height,w=_objectWithoutProperties(h,["title","titleId","size","color","width","height"]);return d.createElement("svg",_extends({viewBox:"0 0 24 24",width:g||m||"16px",height:g||C||"16px",fill:y||"currentColor",role:"img",ref:u,"aria-labelledby":v},w),void 0===p?d.createElement("title",{id:v},"compass-1"):p?d.createElement("title",{id:v},p):null,d.createElement("circle",{cx:12,cy:12,r:11.25,fill:"none",stroke:y||"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}),d.createElement("path",{d:"M16.648 7.352a.75.75 0 00-.768-.181L9.348 9.348 7.171 15.88a.75.75 0 00.949.949l6.532-2.177 2.177-6.532a.75.75 0 00-.181-.768zM12 .75V3m7.955 1.045l-1.591 1.591M23.25 12H21m-1.045 7.955l-1.591-1.591M12 23.25V21m-7.955-1.045l1.591-1.591M.75 12H3m1.045-7.955l1.591 1.591M12 11.625a.375.375 0 01.375.375m-.75 0a.375.375 0 01.375-.375m0 .75a.375.375 0 01-.375-.375m.75 0a.375.375 0 01-.375.375",fill:"none",stroke:y||"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5}))}))},q7KB:function(h,u,f){}}]);
//# sourceMappingURL=157.e4d927d464bebfaf453f.chunk.js.map