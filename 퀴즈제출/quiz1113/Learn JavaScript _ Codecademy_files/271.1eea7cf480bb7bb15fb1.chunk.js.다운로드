(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[271],{"+gav":function(e,t,s){"use strict";var r=s("hhPA"),n=s.n(r),i=s("+gt8");const o={name:"AdapterStore",init(){this._adapter=null,this._broadcast=null,this.listenToMany({onBroadcast:i.a.broadcast,onNewAdapter:i.a.newAdapter})},onBroadcast(...e){!this._adapter||!this._broadcast||e.length<1||this._broadcast(...e)},onNewAdapter(e){this._adapter=e,this._broadcast=e.createComponentBroadcastFunction("Reflux"),this.trigger()}};n.a.createStore(o)},"+gt8":function(e,t,s){"use strict";var r=s("hhPA"),n=s.n(r);t.a=n.a.createActions(["broadcast","newAdapter"])},"21f3":function(e,t,s){"use strict";var r=s("wx14"),n=s("mwIZ"),i=s.n(n),o=s("Os+f"),a=s("TSYQ"),l=s.n(a),c=s("q1tI"),h=s.n(c),d=s("/MKj"),p=s("NkHZ"),u=s("eikI"),m=s("NDib"),g=s("kBm1"),f=s("BzM2"),b=s("fhzG"),v=s.n(b),y=s("ydTQ");const w=v()({displayName:"WorkspaceStatusMessage",mixins:[f.a.connect(y.a,"workspaceStatusType"),f.a.connect(y.a,"workspaceStatusMessage")],getInitialState:()=>({visible:!1,isHovering:!1}),componentDidUpdate(e,t){const s=this.state.workspaceStatusType,r=this.state.workspaceStatusMessage;if((s!==t.workspaceStatusType||r!==t.workspaceStatusMessage)&&this.state.workspaceStatusMessage&&(this.setState({visible:!0}),this.state.hideTimeout&&(clearTimeout(this.state.hideTimeout),this.setState({hideTimeout:null})),"success"===this.state.workspaceStatusType)){const e=setTimeout((()=>{this.setState({visible:!1})}),3e3);this.setState({hideTimeout:e})}},onMouseOver(){this.state.isHovering=!0,this.setState({isHovering:this.state.isHovering,visible:!0})},onMouseLeave(){this.setState({visible:!1,isHovering:!1})},render(){const e="neutral"===this.state.workspaceStatusType,t=l()({"fcn-godex-status--hidden":!this.state.visible,"fcn-godex-status":!0,"fcn-godex-status--neutral":e,"fcn-godex-status--error":"error"===this.state.workspaceStatusType||"idle"===this.state.workspaceStatusType,"fcn-godex-status--success":"success"===this.state.workspaceStatusType,"fcn-godex-status--stable":this.state.isHovering&&"error"!==this.state.workspaceStatusType});return h.a.createElement("div",{className:"fcn-godex-status-container",onMouseEnter:this.onMouseOver,onMouseLeave:this.onMouseLeave},h.a.createElement("div",{className:t},h.a.createElement("span",{"aria-live":"polite","data-testid":"connection-status-message",ref:"statusMessage"},this.state.workspaceStatusMessage),h.a.createElement("div",{className:"fcn-godex-status__glow"})))}});var C=s("2oex"),E=s("CWAm"),k=s("/VKx"),S=s("9UDR"),_=s("y3J+"),T="circle__1bwIKZv-h_nZ1RbuXcy5fV",x="circleWatermark__26Z3JhQvRw3jVczRDCO-nF";function AnimatedTimerCircle(e){const t=e.circleRef,s=e.circleRadius,r=e.className,n=e.circleLength,i=Math.round(s/7),o=s+i;return h.a.createElement("svg",{height:2*o,width:2*o,className:r},h.a.createElement("circle",{className:x,cx:o,cy:o,r:s,strokeWidth:i}),h.a.createElement("circle",{ref:t,className:T,cx:o,cy:o,r:s,strokeWidth:i,strokeDasharray:n,strokeDashoffset:n,transform:"rotate(-90, ".concat(o,", ").concat(o,")")}))}var O=s("FZcb"),N=s("oqPb"),M=s.n(N),R={error:"error__2dcMbp_Emtga3iuiet8F6D",finishedState:"finishedState__3nu5bFOfPEFjiuFbx_vEDK",image:"image__dhfW0Do8eLNye3ai1VOQE"};const Errored=({resetTimer:e})=>h.a.createElement(h.a.Fragment,null,h.a.createElement("h2",null,"Focus Timer"),h.a.createElement("p",{className:R.error},"Oops, the time you set is invalid. Please enter a number."),h.a.createElement("div",{className:R.image},h.a.createElement("img",{src:M.a,alt:"Errored Codey"})),h.a.createElement(O.a,{onClick:e,className:R.resetButton,outline:!1,theme:"brand-purple"},"Restart"));var D=s("vYtj"),W=s.n(D),F={finishedState:"finishedState__2UVa4YK3r2DZTyI_67ch_6",image:"image__3KqestgyCCSlCyXM5XAshM"};const Finished=({resetTimer:e})=>h.a.createElement(h.a.Fragment,null,h.a.createElement("h2",null,"Great job!"),h.a.createElement("p",null,"Take a short break and keep going!"),h.a.createElement("div",{className:F.image},h.a.createElement("img",{src:W.a,alt:"Finished"})),h.a.createElement(O.a,{onClick:e,className:F.resetButton,outline:!1,theme:"brand-purple"},"Restart"));var P=s("G8Hi"),B="commitButton__xovRqMzReHqwhevYHoRFZ",I="timeForm__1btHZX5dhsc1nOl_JsVe1Q",j="timeInputBox__1Sxcig_3zPgTEzZj3bicjM",A="minutesLabel__2Aa9UMzIP07BehXs_vRxfI";class Idle_Idle extends c.Component{constructor(...e){super(...e),this.state={minutes:this.props.focusInterval},this.handleChange=e=>{this.setState({minutes:e.target.value})},this.handleSubmit=e=>{e.preventDefault(),this.props.startTimer(this.state.minutes)}}render(){const e=this.props.startTimer;return h.a.createElement("div",null,h.a.createElement("h2",null,"Focus Timer"),h.a.createElement("div",null,"Set a timer to stay focused and get more done!"),h.a.createElement("form",{action:"start-timer",id:"timer-form",onSubmit:this.handleSubmit,className:I},h.a.createElement(P.g,{className:j,value:this.state.minutes,onChange:this.handleChange}),h.a.createElement("span",{className:A},"Minutes")),h.a.createElement(O.a,{onClick:()=>e(this.state.minutes),className:B,outline:!1,theme:"brand-purple"},"Start"))}}var L=s("ZMKu"),z={timeRemainingSection:"timeRemainingSection__PphJdrAln3WQcerzxLi6P",strong:"strong__3-SLkUA95YKNfhgwcJmzqW",buttonWithMargin:"buttonWithMargin__3raBEwfPH6IlwiFueJ0Yx",timeCircle:"timeCircle__1xXhj6N0kaufxvykhkz6H3",time:"time__3r1y1kpJ8Z5XB5P2BpdUvI",timeRemaining:"timeRemaining__167tYlItbAzLdJcKUYTK0F",rotate:"rotate__1Ndtywd8K-ssUSJrZN83Xq"};const H={enter:{scale:1,opacity:1},exit:{scale:1.5,opacity:0,y:"-40px",transition:{duration:1.5}}};class Running_Running extends c.Component{constructor(e){super(e),this.state={isVisible:!0},this.pauseTimerAndAnimation=()=>{const e=this.props.pauseTimer;this.circleRef.current&&(this.circleRef.current.style.webkitAnimationPlayState="paused"),clearTimeout(this.focusSessionCompletedAnimation),e()},this.resumeTimerAndAnimation=()=>{const e=this.props.resumeTimer;this.circleRef.current&&(this.circleRef.current.style.webkitAnimationPlayState="running"),e(),this.setEndingAnimation()},this.setEndingAnimation=()=>{this.focusSessionCompletedAnimation=setTimeout((()=>{this.setState({isVisible:!1})}),1e3*this.props.secondsRemaining-1500)},this.circleRef=h.a.createRef()}componentDidMount(){this.circleRef.current.style.animationDuration="".concat(60*this.props.focusIntervalMinutes-1,"s"),this.circleRef.current.style.animationDelay="-".concat(60*this.props.focusIntervalMinutes-this.props.secondsRemaining,"s"),this.setEndingAnimation()}render(){const e=this.props,t=e.isTimerPaused,s=e.cancelTimer,r=e.secondsRemaining,n=this.state.isVisible,i=Math.ceil(r/60);return h.a.createElement("div",null,h.a.createElement("h2",{className:z.header},"Time Remaining"),h.a.createElement("div",{className:z.timeRemainingSection},h.a.createElement(L.a,null,n&&h.a.createElement(L.b.div,{key:"circle",initial:!1,animate:"enter",exit:"exit",variants:H},h.a.createElement(AnimatedTimerCircle,{circleRef:this.circleRef,circleRadius:75,circleLength:471,className:z.timeCircle}))),h.a.createElement("div",{className:z.time},h.a.createElement("strong",{className:z.strong},i),h.a.createElement("div",{className:z.timeRemaining},"Minute",i>1&&"s"," left"))),h.a.createElement("div",null,h.a.createElement(O.a,{onClick:s,className:z.buttonWithMargin,theme:"brand-purple",outline:!0},"Cancel"),t?h.a.createElement(O.a,{onClick:this.resumeTimerAndAnimation,outline:!1,theme:"brand-purple"},"Resume"):h.a.createElement(O.a,{onClick:this.pauseTimerAndAnimation,outline:!1,theme:"brand-purple"},"Pause")))}}var U={alarm:"alarm__3MtzgTYzP6r5EVrzXWHIfj",lookHere:"lookHere__71Zqn1mBfojfq9HgZ8OrJ",activeAlarm:"activeAlarm__3xEJceXIyR-nv71sNshA3O",alarmContainer:"alarmContainer__16VA91HscL7XZKOafJJdeC",dropdown:"dropdown__2J5PpoTcoQNQHZRbSqaNHu",content:"content__1wLELogSwZi8YS_be0yqH8",focusTimerToolContainer:"focusTimerToolContainer__2-P6ZcbiHJ90DyA_IU76Ox",timerCircle:"timerCircle__14Ktf2Euc9om8-px40kI4C",inactiveTimerCircle:"inactiveTimerCircle__MZRLB8PRo7473cMXm3ekc"};const K="idle",V="running",G="finished",Z="errored";class FocusTimer_FocusTimer extends c.Component{constructor(e){super(e),this.state={popoverOpenOverride:void 0},this.updateTimer=()=>{if(!this.timerId)return;if(sessionStorage.getItem("timerPaused"))return;this.calculateSecondsRemaining()<=1&&this.endTimer(),this.forceUpdate()},this.endTimer=()=>{window.clearInterval(this.timerId),this.timerId=null,this.setState({popoverOpenOverride:!0}),this.forceUpdate()},this.startTimer=e=>{(0,this.props.trackClick)({data:{target:"focustimer_commit"}}),this.timerId=window.setInterval(this.updateTimer,1e3),sessionStorage.setItem("timerDuration","".concat(e)),sessionStorage.setItem("timerStartTime","".concat(Date.now())),this.circleRef.current.style.animationDuration="".concat(60*e-1,"s"),this.circleRef.current.style.animationDelay="0s",this.forceUpdate()},this.resetTimer=()=>{this.timerId&&(window.clearInterval(this.timerId),this.timerId=null),sessionStorage.removeItem("timerStartTime"),sessionStorage.removeItem("timerPaused"),this.forceUpdate()},this.pauseTimer=()=>{(0,this.props.trackClick)({data:{target:"focustimer_pause"}}),this.circleRef.current.style.webkitAnimationPlayState="paused",sessionStorage.setItem("timerPaused","".concat(Date.now())),this.forceUpdate()},this.resumeTimer=()=>{(0,this.props.trackClick)({data:{target:"focustimer_resume"}}),this.circleRef.current.style.webkitAnimationPlayState="running";const e=Number(sessionStorage.getItem("timerStartTime"))+(Date.now()-Number(sessionStorage.getItem("timerPaused")));sessionStorage.setItem("timerStartTime","".concat(e)),sessionStorage.removeItem("timerPaused"),this.forceUpdate()},this.onTogglePopover=e=>{const t=this.props.trackClick;e&&t({data:{target:"focustimer"}}),this.setState({popoverOpenOverride:void 0})},this.calculateSecondsRemaining=()=>(Number(sessionStorage.getItem("timerStartTime"))+6e4*Number(sessionStorage.getItem("timerDuration"))-Date.now())/1e3,this.circleRef=h.a.createRef()}componentDidMount(){const e=sessionStorage.getItem("timerDuration");if(e||sessionStorage.setItem("timerDuration","15"),sessionStorage.getItem("timerStartTime")){if(this.timerId=window.setInterval(this.updateTimer,1e3),!this.circleRef.current)return;this.circleRef.current.style.animationDuration="".concat(60*parseFloat(e)-1,"s");const t=this.calculateSecondsRemaining();this.circleRef.current.style.animationDelay="-".concat(60*parseFloat(e)-t,"s")}}renderTimerState(){const e=Number(sessionStorage.getItem("timerDuration")),t=!!sessionStorage.getItem("timerPaused");let s,r;sessionStorage.getItem("timerStartTime")?(r=this.calculateSecondsRemaining(),s=Number.isNaN(r)?Z:r>1?V:G):s=K;return{[K]:h.a.createElement(Idle_Idle,{startTimer:this.startTimer,focusInterval:e}),[V]:h.a.createElement(Running_Running,{focusIntervalMinutes:e,secondsRemaining:r,cancelTimer:()=>{(0,this.props.trackClick)({data:{target:"focustimer_cancel"}}),this.resetTimer()},pauseTimer:this.pauseTimer,resumeTimer:this.resumeTimer,isTimerPaused:t}),[G]:h.a.createElement(Finished,{resetTimer:this.resetTimer}),[Z]:h.a.createElement(Errored,{resetTimer:this.resetTimer})}[s]}render(){const e=!!this.timerId,t=l()({[U.alarm]:!0,[U.activeAlarm]:e}),s=l()({[U.timerCircle]:!0,[U.inactiveTimerCircle]:!e}),r=h.a.createElement("div",{className:U.alarmContainer},h.a.createElement(S.a,{size:20,className:t,"aria-label":"focus timer tool",role:"img"}),h.a.createElement(AnimatedTimerCircle,{circleRef:this.circleRef,circleRadius:14,circleLength:88,className:s}));return h.a.createElement("div",{className:U.focusTimerToolContainer},h.a.createElement(_.a,{clickTarget:r,className:U.dropdownToggle,open:this.state.popoverOpenOverride,onToggle:this.onTogglePopover},h.a.createElement(k.a,{column:!0,className:U.dropdown},h.a.createElement("div",{className:U.content},this.renderTimerState()))))}}const q={trackClick:E.f};var Q=Object(d.connect)(null,q)(FocusTimer_FocusTimer),Y={authorModeTag:"authorModeTag__1SlzRi0YI5AnR1ar2Fiba-"};class Header_PlatformHeader extends c.Component{render(){const e=[],t=[];if(t.push(h.a.createElement(p.a,{key:"focus-timer-tool"},h.a.createElement(Q,null))),this.props.authoringMode){const t=l()("new-cc-icon","icon-edit",Y.authorModeTag);e.push(h.a.createElement("span",{className:t,key:"authoring"},"Authoring"))}u.a.hasGodMode()&&e.push(h.a.createElement(o.a,null,h.a.createElement(m.a,{setProgressToCurrentExercise:this.props.setProgressToCurrentExercise,prerender:this.props.prerender,currentWorkspace:this.props.workspace,nolock:this.props.nolock,authoringMode:this.props.authoringMode})));const s=h.a.createElement(w,null),n=l()(Y.header,this.props.className);return h.a.createElement(g.a,Object(r.a)({},this.props,{compact:!0,className:n,theme:"dark",wide:!0,titleRoute:i()(this.props,"exitPaths.back"),tabsRight:e,tabsLeft:t,statusDisplay:s,flags:{openUpgradeLinkInNewTab:!0},hideRegisterButton:!0,hideLoginButton:!0}))}}t.a=Object(d.connect)((e=>({title:Object(C.h)(e)})))(Header_PlatformHeader)},"F6+0":function(e,t,s){"use strict";var r=s("hhPA"),n=s.n(r);t.a=n.a.createActions(["resized","resizing","cueSeen"])},"Fd/6":function(e,t,s){"use strict";var r=s("rePB"),n=s("zdiy"),i=s.n(n),o=s("dLBa").a.extend({initialize(){},createComponentBroadcastFunction(e){return function(){const t=arguments[0],s=["component",e,t].join(":"),r=Array.prototype.slice.call(arguments,1),n=[s].concat(r);this.trigger.apply(this,n)}.bind(this)},_handle(e){this._handlers[e].forEach((e=>{e.call(this)}))},registerComponent(e,t){this._components[e]=t},destroy(){this._handle("destroy");for(const e in this._events)this.off(e)},inheritCache(e){this._cache=e._cache},extendCache(){this._handle("extendCache")}});function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}var create=function(e){return function(){const t=function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}({mixins:[]},e);let s={};const n=t.mixins,a=[t.events],l={destroy:[],extendCache:[]};function keepHandler(e,t){void 0!==e[t]&&(l[t].push(e[t]),delete e[t])}delete t.events,keepHandler(t,"destroy"),keepHandler(t,"extendCache"),s=i()(s,t),void 0!==n&&n.forEach((e=>{keepHandler(e,"destroy"),keepHandler(e,"extendCache"),a.push(i()({},e.events)),delete e.events,s=i()(s,e)}));const c=new(o.extend(s));return c._handlers=l,c._components={},c._state={},c._cache={},a.forEach((e=>{for(const t in e)c.on(t,e[t].bind(c))})),c}},a=s("NZ0w"),l={events:{"interface:persist":function(){a.a.persist()},"component:Brief:start":function(){this.controller.revealComponents()}}},c=s("ydTQ");const h={PersistentCodeEditor:[{events:{"component:PersistentCodeEditor:error":function(e){this.controller.setState({errors:e})}}}],OutputTerminal:[{}],Terminal:[{events:{"component:Terminal:input":function(e,t){c.a.interface.execute(e).then((s=>{t(e,s.Content,s.Error?1:0)})).catch((()=>{t(e,"",1)}))}}}],WebBrowser:[],Brief:[l]};t.a={forComponents(e){return create({mixins:this._getBaseMixins(e)})()},forProjectsWithComponents(e){return create({mixins:this._getBaseMixins(e)})()},_getComponentMixins(e,t){const s=Object.keys(e);let r=[];return s.forEach((e=>{e in t&&(r=r.concat(t[e]))})),r},_getBaseMixins(e){return this._getComponentMixins(e,h)}}},GDib:function(e,t,s){"use strict";var r=s("rePB"),n=s("gLAU"),i=s.n(n),o=s("zdiy"),a=s.n(o),l=s("mwIZ"),c=s.n(l),h=s("7tbW"),d=s.n(h),p=s("TSYQ"),u=s.n(p),m=s("fhzG"),g=s.n(m),f=s("q1tI"),b=s.n(f),v=s("i8i4"),y=s.n(v),w=s("/MKj"),C=s("zIEt"),E=s("z9go"),k=s("F6+0"),S=s("NZ0w");const FullScreenControls=({isFullscreen:e,toggleFullscreen:t})=>{const s=e?"minimize":"fullscreen";return b.a.createElement("div",{"data-cue":"discovery-fullscreen",className:"fcn-control fcn-control--right",onClick:t},b.a.createElement("span",{className:"fcn-icon fcn-icon-".concat(s)}))};s("u2tZ");var _=s("Wdql"),T=s("CWAm"),x=s("BzM2"),O=s("FZcb"),N=s("yc/i"),M=s("dqGO"),R=s("hhPA"),D=s.n(R),W=s("wIFh"),F=s("C5ZO"),P=s("uBVh"),B=s("swBZ"),I=s("AUig"),j=s("yole"),A=s("xkGU"),L=s.n(A),z=s("/VKx"),H=s("v2jj"),U=s("ABYF"),K=s("6qam"),V=s.n(K),G=s("TP7S"),Z=s.n(G),q="invalid__3KlnRB3SfTkOU_ZRNAaCWx";class Text_TextField extends b.a.Component{constructor(...e){super(...e),this.getInitialValue=()=>this.getCleanValue(this.props.value),this.getCleanValue=e=>Z()(e)||V()(e)?"":e,this.handleFocus=e=>{if(this.setState({isFocused:!0}),this.props.selectOnClick){const e=y.a.findDOMNode(this.refs.input);e&&e.select()}this.props.onFocus&&this.props.onFocus(e)},this.handleBlur=e=>{this.setState({isFocused:!1}),this.props.onBlur&&this.props.onBlur(e)},this.handleChange=e=>{const t=e.target.value;t&&this.props.filterValue&&!this.props.filterValue(t)||(this.setState({value:t}),t.length>=this.props.maxLength&&this.props.onReachMaxLength&&this.props.onReachMaxLength(e,t),this.props.onChange&&this.props.onChange(e,t))},this.handleKeyDown=e=>{switch(e.which){case 13:this.props.onEnter&&this.props.onEnter(e)}},this.value=()=>y.a.findDOMNode(this.refs.input).value,this.state={isFocused:!1,value:this.getInitialValue()}}UNSAFE_componentWillReceiveProps(e){this.props.value!==e.value&&this.setState({value:this.getCleanValue(e.value)})}render(){let e=null;if(this.props.icon){const t=u()("field__status-icon icon-".concat(this.props.icon),this.props.iconClass);e=b.a.createElement("div",{className:t})}let t={};this.props.useDefaultStyles&&(t={field:!0,"field--text":!0,"field--error":this.props.error,"field--text--hidden":"hidden"===this.props.type,"field--focused":this.state.isFocused,[q]:this.props.invalid&&!this.state.isFocused});const s=u()(t,this.props.className),r=u()({inspectletIgnore:this.props.sensitive,"input--invalid":this.props.invalid&&!this.state.isFocused});return b.a.createElement("div",{style:{width:this.props.width},className:s},b.a.createElement("input",{ref:"input",type:this.props.type||"text",className:r,name:this.props.name,id:this.props.id,disabled:this.props.disabled,placeholder:this.props.placeholder,onFocus:this.handleFocus,onBlur:this.handleBlur,onChange:this.handleChange,onKeyDown:this.handleKeyDown,maxLength:this.props.maxLength,value:this.state.value,autoComplete:this.props.autoComplete}),e)}}Text_TextField.defaultProps={useDefaultStyles:!0,autoComplete:"off"};var Q=Text_TextField,Y="progressElipse__2BxwK9AnOO7CVkOvrQtYuC",J="dot__yS7_YWKcgynBiftiSv9ec",X="dotActive__3o7HlfeAE6rwc1Jv6EVYon";const ProgressDot=({active:e})=>{const t=u()({[J]:!0,[X]:e});return b.a.createElement("div",{className:t})};let $;class ProgressElipse_ProgressElipse extends b.a.Component{constructor(...e){super(...e),this.state={activeDot:0},this.changeDot=()=>{let e=this.state.activeDot;2===e?this.setState({activeDot:0}):(e+=1,this.setState({activeDot:e}))}}componentDidMount(){$=setInterval(this.changeDot,300)}componentWillUnmount(){clearInterval($)}render(){return b.a.createElement("div",{className:Y},b.a.createElement(ProgressDot,{active:0===this.state.activeDot}),b.a.createElement(ProgressDot,{active:1===this.state.activeDot}),b.a.createElement(ProgressDot,{active:2===this.state.activeDot}))}}var ee=ProgressElipse_ProgressElipse,te=s("eikI"),se=s("HMXE"),re=s("Y+p1"),ne=s.n(re),ie=s("24Ii"),oe=s.n(ie),ae=s("hFGM");let le=null,ce=null;var he="copyField__2N7wPKWadhQPLJQLoOk72o",de="copyInputField__iHvYgSU-g203KG0uSEeXW",pe="errorMsg__2DE6fHS_MkPM0BGDUqXHd_",ue="responseMsgContainer__X_VjJDApqFnhgmjMby12c",me="loadingContainer__3aE1eUMo8Z9d9zKSsfDm1T",ge="closeIcon__hbO9FZs86Z2kj093QHAMn";const createCollaborationUrl=()=>{const e="".concat(window.location.origin+window.location.pathname,"?user_id=").concat(te.a.id()),t="?user_id=".concat(te.a.id());return window.history.pushState({userId:te.a.id()},window.location.pathname,t),e};class CollaborationWallContent_CollaborationWallContent extends f.Component{constructor(...e){super(...e),this.state={responseMsg:null,url:""},this.onCopyClicked=async()=>{const e=this.state.url;try{await U.writeText(e),this.setState({responseMsg:se.clipBoardMessages.success,error:!1})}catch(e){this.setState({responseMsg:se.clipBoardMessages.error,error:!0})}}}createGistUrl(){const e={};L()(this.props.files,(t=>{e[t.name]={content:t.content}})),function createGist(e){return new Promise(((t,s)=>{ne()(le,e)&&ce?t(ce):(le=e,oe.a.post("/gist").use(ae.b).send(e).end(((r,n)=>{if(r)ce=null,s(r);else{le=e;const s=JSON.parse(n.text).url;ce=s,t(s)}})))}))}({description:"Codecademy export",public:!1,files:e}).then((e=>{this.setState({url:e})})).catch((()=>{this.setState({responseMsg:se.gistError,error:!0,url:""})}))}componentDidMount(){!this.state.url&&this.allFilesHaveCode()&&(this.props.gist?this.createGistUrl():this.setState({url:createCollaborationUrl()}))}allFilesHaveCode(){const e=this.props.files;return null==e?void 0:e.every((e=>""!==e.encodedContent))}renderGistShare(){const e=u()({[pe]:this.state.error});return b.a.createElement(b.a.Fragment,null,b.a.createElement("h5",{"data-testid":"copy-message"},se.copyMessage),b.a.createElement(z.a,null,b.a.createElement("div",{className:he},b.a.createElement(Q,{className:de,id:"collInput",value:this.state.url}),!this.state.url&&b.a.createElement(z.a,{flex:!0,center:!0,className:me},!this.state.error&&b.a.createElement(ee,null))),b.a.createElement(O.a,{disabled:!this.state.url||!this.allFilesHaveCode(),onClick:this.onCopyClicked},se.ctaTitle)),b.a.createElement(z.a,{center:!0,flex:!0,className:ue},b.a.createElement("span",{className:e},this.state.responseMsg)))}render(){return b.a.createElement(z.a,{column:!0},b.a.createElement(O.a,{className:ge,onClick:this.props.dismiss,square:!0,flat:!0,theme:"black"},b.a.createElement(H.a,{size:20})),this.allFilesHaveCode()?this.renderGistShare():b.a.createElement("h5",{"data-testid":"no-code-message"},se.noCodeMessage))}}var fe=s("FmSy"),be=s("b+vN"),ve=s("5/jU"),ye=s("oHca"),we=s("kqkn"),Ce=s("ZMKu"),Ee=s("qqJs"),ke="codeFooterButton__EBaDNNWQLtjTzNWBwrVVY",Se="tooltip__LhVnSskKTtV__LKf6Gkf5";const CodeFooterButton=({children:e,id:t,onClick:s,tooltipText:r})=>b.a.createElement(Ce.b.div,{animate:{opacity:1,marginTop:0},initial:{opacity:0,marginTop:"30px"},transition:{duration:.5}},b.a.createElement(ye.a,{id:t,target:b.a.createElement("div",{className:ke},b.a.createElement(Ee.a,{theme:"editor",isControl:!0,clickHandler:s,testId:"".concat(t,"-button")},e)),theme:we.a.DarkMode,tipClassName:Se},r));var _e="copyMessage__2pQWQgwBHErvpTsZkiTzpz",Te="error__2Vp9gpr0ou0Oabaq4RUS6n";class CopyContentControl_CopyContentControl extends f.Component{constructor(...e){super(...e),this.state={message:"",error:!1},this.copyFile=async()=>{const e=this.props,t=e.content,s=e.successMessage,r=e.failMessage;(0,e.trackClick)({data:{target:"copy_file"}});try{await U.writeText(t),this.setState({message:s,error:!1})}catch{this.setState({message:r,error:!0})}}}componentDidUpdate(e){const t=this.props.content;e.content!==t&&this.setState({message:"",error:!1})}render(){const e=this.state,t=e.message,s=e.error,r="Copy to Clipboard";return b.a.createElement(CodeFooterButton,{id:"copy",onClick:this.copyFile,tooltipText:r},b.a.createElement(ve.a,{"aria-label":r,"data-testid":"copy-content-control"}),b.a.createElement("span",{"aria-live":"polite",className:u()(_e,s&&Te),"data-testid":"copy-content-control-message".concat(s?"-error":"")},t))}}CopyContentControl_CopyContentControl.defaultProps={content:"",successMessage:"File copied!",failMessage:"There was a problem."};var xe=s("D5Q1"),Oe=s("4Te6"),Ne=s("ydTQ");function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const createDirectories=(e,t)=>S.a.createDirectories(e,_objectSpread({overwriteExisting:!1},t)),updateFiles=(e,t)=>S.a.updateFiles(e,_objectSpread({overwriteExisting:!1},t)),deleteFile=e=>S.a.deleteFile(e).then(S.a.updateFileTree),openFile=e=>{const t=P.a(P.b(e));S.a.getFile(e,t).then((()=>{j.a.openFile(Oe.a.emptyWithPath(e))}))},renameFile=(e,t)=>S.a.rename(e,t,{overwriteExisting:!1});var Me=Object(x.b)(Ne.a,["workspaceDirectory"])((({open:e,workspaceDirectory:t,toggleLayout:s})=>(Object(f.useEffect)((()=>{e&&S.a.getFileTree()}),[e]),b.a.createElement(xe.a,{open:e,directory:t,createDirectories:createDirectories,updateFiles:updateFiles,deleteFile:deleteFile,openFile:openFile,renameFile:renameFile,toggleLayout:s})))),Re=s("KKCq"),De=s("2oex"),We=s("wx14"),Fe=s("Ff2n"),Pe="button__8RgBAq12E71O1XuArYhoJ";const HelpButton=e=>{const t=e.children,s=Object(Fe.a)(e,["children"]);return b.a.createElement(O.a,Object(We.a)({},s,{flat:!0,theme:"white",target:"_blank",className:Pe}),t)},Be={userClick:T.f,userImpression:T.g};var Ie=Object(w.connect)((e=>({reviewLink:Object(De.t)(e)})),Be)((e=>{const t=e.reviewLink,s=e.userClick,r=e.userImpression;Object(f.useEffect)((()=>{r({data:{target:"view_cheatsheet"}})}),[r]);return b.a.createElement(HelpButton,{target:"_blank",href:t,onClick:()=>{s({data:{target:"view_cheatsheet",context:"code_editor"}})}},b.a.createElement(M.a,{size:24,title:"Concept Review",style:{marginRight:"0.3rem"}}),B.components.code_editor.review_button)})),je=s("tDFQ"),Ae=s("Rab/"),Le=s("NhxS"),ze=s("lkI2"),He=s("0u4h");class SolutionButton_SolutionButton extends f.Component{constructor(...e){super(...e),this.state={isModalOpen:!1},this.trackClick=e=>{(0,this.props.userClick)({data:{target:e}})},this.onButtonClick=()=>{this.trackClick("savepointsSolutionButton"),this.setState({isModalOpen:!0})},this.closeModal=()=>{this.setState({isModalOpen:!1})},this.keepTrying=()=>{this.trackClick("savepointsKeepTrying"),this.closeModal()},this.getAnswer=()=>{this.trackClick("savepointsGetCode"),this.closeModal(),Object(ze.a)("info","Savepoints restoring solution code and force passing checkpoints"),S.a.solution().then(this.props.forcePassClicked)}}componentDidMount(){(0,this.props.userImpression)({data:{target:"savepointsSolutionButton"}})}render(){const e=this.state.isModalOpen;return b.a.createElement(b.a.Fragment,null,b.a.createElement(HelpButton,{onClick:this.onButtonClick},b.a.createElement(Le.a,{size:24,style:{marginRight:"0.3rem"}}),B.components.code_editor.savepoints_button),b.a.createElement(He.a,{isOpen:e,keepTrying:this.keepTrying,getAnswer:this.getAnswer}))}}const Ue={forcePassClicked:je.g,userClick:T.f,userImpression:T.g};var Ke=Object(w.connect)((e=>{const t=Object(Ae.g)(e);return{course:t.trackSlug,exercise:t.exerciseSlug,lesson:t.contentItemSlug}}),Ue)(SolutionButton_SolutionButton),Ve="container__3fYOsbzX6XcVJs0aoAXfaV";var HelpContainer_HelpContainer=({failureCount:e,showReviewButton:t})=>{const s=t&&1===e?b.a.createElement(Ie,null):e>1?b.a.createElement(Ke,null):null;return b.a.createElement("span",{className:Ve},s)};var Ge=Object(w.connect)((e=>({showReviewButton:Object(De.r)(e),failureCount:Object(_.e)(e)})))(HelpContainer_HelpContainer),Ze=s("z9KF"),qe=s("t2YD"),Qe=D.a.createStore({name:"OrphanedFilesStore",mixins:[x.a.store],init(){this.workspaceSlug=null,Ne.a.listen(this.checkWatchedFiles,this),this.listenTo(qe.a.publishFilenames,this.setDefaultFiles),this.listenTo(qe.a.loadFiles,this.resetOrphanedFiles)},getInitialState:()=>({orphaned:[],watching:[],notify:[]}),setDefaultFiles(e){this.setState({watching:e})},resetOrphanedFiles(){this.watching=[],this.setState({orphaned:[],watching:[]})},checkWatchedFiles(e){if(e.workspaceObject&&e.workspaceReady){const t=[];for(const s of this.state.watching)void 0===e.workspaceObject.getFile(s)&&t.push(s);this.setState({orphaned:t})}}});var Ye=g()({displayName:"MissingFilesWall",mixins:[x.a.connect(Qe,["orphaned"],{onChange:"checkOrphans"})],getInitialState:()=>({phase:"inactive",notify:!0}),checkOrphans(){this.state.orphaned.length||this.setState({phase:"inactive"})},showConfirmation(){this.setState({phase:"confirmation"})},cancelAndClose(){this.setState({notify:!1,phase:"inactive"})},resetFiles(){this.setState({notify:!0,phase:"fixing"}),S.a.restore()},resetFilesContent(){const e=this.state.orphaned[0],t=this.state.notify&&this.state.orphaned.length>0&&"confirmation"!==this.state.phase;return b.a.createElement(be.a,{isOpen:t,cancel:this.cancelAndClose,action:this.showConfirmation,actionText:"Reset Files",cancelText:"Ok"},b.a.createElement("div",null,b.a.createElement("h5",null,"Whoa there!"),b.a.createElement("p",null,"".concat(e," has been moved. This will cause problems with this exercise, please move ").concat(e," back to its original location, or reset your files"))))},resetFilesConfirmationContent(){const e=this.state.notify&&this.state.orphaned.length>0&&"confirmation"===this.state.phase;return b.a.createElement(be.a,{isOpen:e,cancel:this.cancelAndClose,action:this.resetFiles},b.a.createElement("div",null,b.a.createElement("h5",null,"Reset your files?"),b.a.createElement("p",null,"This will overwrite your existing files, and reset your progress to the beginning of this exercise")))},render(){return b.a.createElement("div",null,"inactive"===this.state.phase?this.resetFilesContent():this.resetFilesConfirmationContent())}}),Je=s("ev85"),Xe=s("MLxE"),$e=s("PIZE"),et=s("fxH1"),tt=s("kuGx"),st=D.a.createStore({name:"InterfaceStore",listenables:[k.a],resized(){this.trigger()},resizing(){this.trigger()}}),rt="runButton__2uQVTMn2N52sHjz-Bz2rI2",nt="tooltip__17rL50jQq97FrARyC1uTVX";var components_LegacyRunButton=({children:e,disabled:t,hasTyped:s,ariaLabel:r,onClick:n})=>{const i=navigator.platform.match("Mac")?"⌘ + return":"ctrl + enter";return b.a.createElement(ye.a,{id:"run",target:b.a.createElement(O.a,{className:rt,square:!0,theme:"royalblue",go:!t&&s,disabled:t,onClick:n,"data-testid":"run-button","aria-label":r},e),theme:we.a.DarkMode,tipClassName:nt},i)},it=s("xq+a");var components_ResetWorkspaceButton=({noun:e,onClick:t})=>{const s=navigator.platform.match("Mac")?"ctrl":"alt",r="Reset ".concat(e," (").concat(s," + g)");return b.a.createElement(CodeFooterButton,{id:"reset",onClick:t,tooltipText:r},b.a.createElement(it.a,{"aria-label":r}))},ot=s("gCrh");var components_ShareWorkspaceButton=({onClick:e})=>{if(!te.a.isPro())return null;const t="Share Code";return b.a.createElement(CodeFooterButton,{id:"share",onClick:e,tooltipText:t},b.a.createElement(ot.a,{"aria-label":t}))},at="edFToolLayoutContainer__1k0ofduspbCuwrugNJKsJd",lt="mainContainer__3f-bTuWfhAnqTEI2uZ3ZWg",ct="layoutCollapsed__3xm5yNjl9Xl7k6RghljlBs",ht="noNavigator__2BCA6PQSwz-zCOMpp-nOa-",dt="includeFileNavTab__1PbU2wBQKyqP5eZPnKVDBW",pt="fileTabOpen__3RNjkMsg58BD29bMER7hiH",ut="tabsOffSet__2Bt6pWD8KrnHZw8kYuhqyf",mt="editorContainerPadded__1HINGnQ-Cn2f9BdqehjYlq",gt="editorFooter__3vwk-k2NGitXY-FI-IT16w",ft="codeEditorSkeleton__1_B5WnzvIeZjvSmOntzI4t",bt="footerContainer__1z5LFGBvRHKImhrGkUdzEr",vt="errorDisplay__1W34lsMyVa3sX7aT9JxDPH",yt=s("GNhk"),wt=s("G8Hi"),Ct={workspaceNaming:"workspaceNaming__1afMhUV-Zkct8qMoGuDd-A",saveWorkspaceButton:"saveWorkspaceButton__sR8mwstpXL_Rw3eJpZFsi",customWorkspaceName:"customWorkspaceName__167Dyy0HlA-ogI2jarij0J"};const Et="blank-workspace";class WorkspaceNameChooser_WorkspaceNameChooser extends f.Component{constructor(...e){super(...e),this.state={customSlug:this.props.workspaceSlug===Et?"":this.props.workspaceSlug},this.handleChange=e=>{this.setState({customSlug:e.target.value.replace(/\s/g,"-")})}}render(){const e=this.props,t=e.saveWorkspace,s=e.workspaceSlug,r=e.generatedWorkspaceName;return b.a.createElement(yt.a,null,b.a.createElement(wt.b,{className:Ct.workspaceNaming,onSubmit:t},s&&s!==Et?b.a.createElement(wt.d,{label:"Current Workspace Name"},b.a.createElement(wt.h,{htmlFor:"currentWorkspaceSlug",label:s,name:"chooseWorkspaceSlug",className:Ct.slugRadioButtons,value:s})):null,r&&r!==s?b.a.createElement(wt.d,{label:"Generated Workspace Name"},b.a.createElement(wt.h,{htmlFor:"generatedWorkspaceSlug",label:r,name:"chooseWorkspaceSlug",className:Ct.slugRadioButtons,value:r})):null,b.a.createElement(wt.d,{label:"Custom Name"},b.a.createElement(wt.h,{htmlFor:"customWorkspaceSlug",label:b.a.createElement("div",{className:Ct.customWorkspaceName},b.a.createElement(wt.g,{onChange:this.handleChange,value:this.state.customSlug})),name:"chooseWorkspaceSlug",className:Ct.slugRadioButtons,value:this.state.customSlug})),b.a.createElement(O.a,{theme:"secondary",className:Ct.saveWorkspaceButton,type:"submit"},"Save Workspace")))}}const kt=g()({displayName:"CodeEditor",mixins:[x.a.connect(tt.a,["files","active","hasReceivedCurrentFiles"]),x.a.connect(et.a),x.a.connect(Ne.a),D.a.listenTo(st,"onResize")],getInitialState(){let e;return this.props.geometry&&(e={width:this.props.geometry.width(),height:this.props.geometry.height()}),{openResetWorkspaceWall:!1,openShareWall:!1,fileToolOpen:!1,hasTyped:!1,collapsed:!0,orphans:[],dimensions:e}},toggleLayout(){this.setState((e=>({collapsed:!e.collapsed,fileToolOpen:!e.fileToolOpen})))},toggleAuthoringMode(){I.a.adminChange("toggleWorkspaceNaming",!this.state.toggleWorkspaceNaming)},componentDidMount(){window.addEventListener("keydown",this.onKeyDown)},componentWillUnmount(){window.removeEventListener("keydown",this.onKeyDown)},isEvaluateExerciseEvent:e=>13===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey),isResetExerciseEvent:e=>71===e.keyCode&&(navigator.platform.match("Mac")?e.ctrlKey:e.altKey),onKeyDown(e){if(this.isEvaluateExerciseEvent(e))this.submitClick();else{if(!this.openResetWorkspaceWall||!this.isResetExerciseEvent(e))return!0;this.openResetWorkspaceWall()}return e.preventDefault(),!1},normalizeFileKeys:e=>e.map((e=>({name:e.filename,type:e.type}))),setOrphans(e){e.length>this.state.orphans.length&&(this.setState({orphans:e}),this.setState({hasNewOrphan:!0}))},processFiles(){return new Promise((e=>{this.props.presenter.hasCheckWork?S.a.autoSaveFiles().then(e):e()}))},onModelChanged(e){const t=this.state.files[this.state.active];t&&t.content!==e&&(this.setState({persistingFiles:!0}),j.a.updateFile(t,e).then((()=>{this.processFiles().then((()=>{this.setState({persistingFiles:!1})}))})),this.state.hasTyped||this.setState({hasTyped:!0}))},submitClick(){this.state.offerAnswer&&this.props.broadcast("keepTrying"),this.setState({offerAnswer:!1,hasTyped:!1}),this.setState({persistingFiles:!0}),this.props.presenter.evaluateExercise().then((()=>{this.setState({persistingFiles:!1})})).catch((e=>{e&&600===e.code&&this.props.broadcast("error",{visible:!0,timestamp:(new Date).valueOf(),friendly:e.message,component:"PersistentCodeEditor"}),this.setState({persistingFiles:!1})}))},saveWorkspace(e){e.preventDefault();const t=e.target.elements,s=t.currentWorkspaceSlug,r=t.generatedWorkspaceSlug,n=t.customWorkspaceSlug;let i;s&&s.checked?i=s.value:n.checked?i=n.value:r.checked&&(i=r.value),""!==i&&S.a.saveFilesAndCheckWork().then((()=>S.a.getFetchUrl(i))).then((e=>S.a.persist(e,i))).then(this.toggleAuthoringMode)},updateTree(){this.props.broadcast("getFileTree")},offerAnswer(){this.setState({offerAnswer:!0})},resetWorkspace(){const noop=function(){};return this.props.trackClick({data:{target:"platformResetWorkspace"}}),"project"===this.props.presenter.contentItemType?S.a.reset().then(this.closeResetWorkspaceWall,noop):S.a.restore().then(this.closeResetWorkspaceWall,noop)},renderHeader(){return this.renderTabs()},renderEditorOrPlaceholder(){return Object($e.a)(this.state)?b.a.createElement("div",{className:ft},b.a.createElement(Ze.a,null)):this.state.files.length>0?this.renderEditor():this.renderPlaceholder()},renderEditor(){return b.a.createElement(F.a,{file:this.activeFile(),onChange:this.onModelChanged})},_ignoreOrphan(){this.setState({hasNewOrphan:!1})},_keepTrying(){this.setState({offerAnswer:!1}),this.props.broadcast("keepTrying")},_showAnswer(){this.setState({offerAnswer:!1}),this.props.broadcast("showAnswer")},openCollaborationWall(){this.setState({openShareWall:!0})},openResetWorkspaceWall(){this.props.trackClick({data:{target:"platformResetWorkspaceDialog"}}),this.setState({openResetWorkspaceWall:!0})},closeCollaborationWall(){this.setState({openShareWall:!1})},closeResetWorkspaceWall(){this.setState({openResetWorkspaceWall:!1})},renderFooter(){const e=this.props.presenter;return b.a.createElement("div",{className:bt},e.displayErrors&&b.a.createElement(fe.a,{className:vt,onVisibilityToggle:this.onResize}),b.a.createElement(Je.a,null,this.renderFooterButtons()))},renderFooterButtons(){const e=this.props.trackClick,t=this.state.persistingFiles||this.props.checkpointsRunning,s=t||0===this.state.files.length,r=this.props.modifiers.isProject?B.components.code_editor.save:B.components.code_editor.run,n=this.props.modifiers.isProject?B.components.code_editor.save_aria_label:B.components.code_editor.run_aria_label,i=this.props.modifiers.isProject?B.components.code_editor.project:B.components.code_editor.exercise;return b.a.createElement(b.a.Fragment,null,b.a.createElement("div",{className:gt},!this.props.presenter.hasCheckWork&&b.a.createElement(components_LegacyRunButton,{disabled:s,hasTyped:this.state.hasTyped,onClick:this.submitClick,ariaLabel:n},t?b.a.createElement(Re.a,null):r),b.a.createElement(components_ResetWorkspaceButton,{onClick:this.openResetWorkspaceWall,noun:i}),b.a.createElement(components_ShareWorkspaceButton,{onClick:this.openCollaborationWall}),b.a.createElement(CopyContentControl_CopyContentControl,{trackClick:e,content:this.activeFileContent()}),b.a.createElement(Ge,null)),this.state.authoringMode?b.a.createElement(b.a.Fragment,null,b.a.createElement(O.a,{theme:"lantern",onClick:this.toggleAuthoringMode,style:{minWidth:"9rem"}},this.state.toggleWorkspaceNaming?"Back":"Save Workspace"),b.a.createElement(W.a,{isOpen:this.state.authoringMode&&this.state.toggleWorkspaceNaming,onOutsideClick:this.toggleAuthoringMode},b.a.createElement(WorkspaceNameChooser_WorkspaceNameChooser,{saveWorkspace:this.saveWorkspace,workspaceSlug:Ne.a.state.workspaceSlug,generatedWorkspaceName:this.props.presenter.generatedWorkspaceName}))):null)},placeholderTab:()=>b.a.createElement(Ee.a,{key:"codeEditorTab-empty",theme:"editor",isActive:!0,canClose:!1,clickHandler:()=>{},closeHandler:()=>{}}),tabsData(){const e=[];return Object($e.a)(this.state)?(e.push(this.placeholderTab()),e):this.state.files&&this.state.files.length>0?(this.state.files.forEach(((t,s)=>{if(t.isDir)return;const r=this.state.active===s,n=t.name.split("/"),i=n[n.length-1],o=t.path;e.push(b.a.createElement(Ee.a,{title:i,theme:"editor",key:"codeEditorTab-".concat(o),isActive:r,tabId:s,canClose:!this.props.presenter.navigator_disabled||this.state.authoringMode,clickHandler:j.a.setCurrentOpenFile,closeHandler:j.a.closeFile}))})),e):e},renderTabs(){const e=this.tabsData(),t=u()({[ut]:this.state.collapsed});return b.a.createElement("div",{className:t},b.a.createElement(Je.a,{theme:"editor"},e,b.a.createElement(Ee.a,{theme:"editor",key:"codeEditorTab-fullscreen","data-cue":"discovery-fullscreen",clickHandler:this.props.helpers.toggleFullscreen,canClose:!1,isControl:!0,align:"right"},b.a.createElement(N.a,{"aria-label":"Toggle fullscreen"}))))},renderPlaceholder(){return b.a.createElement("div",{className:"fcn-code-editor__placeholder"},b.a.createElement("div",{className:"fcn-code-editor__placeholder__icon"},b.a.createElement(M.a,{size:48})),b.a.createElement("div",{style:{marginTop:15}},"Code Editor"),this.state.hasReceivedCurrentFiles&&!this.state.fileToolOpen?b.a.createElement(O.a,{theme:"lantern",style:{marginTop:20},outline:!0,onClick:this.toggleLayout},"Open file"):null)},activeFile(){if(null!==this.state.active)return this.state.files[this.state.active]},activeFileContent(){const e=this.activeFile();return e?e.content:""},reloadFile(e){if(!this.state.files)return;if(this.state.files.map((e=>e.path)).indexOf(e)>-1){const t=P.a(P.b(e));j.a.reloadFile(e,t)}},render(){const e=u()({editor:!0,[ct]:this.state.collapsed,[ht]:this.props.presenter.navigator_disabled,[dt]:this.state.authoringMode,[pt]:!this.state.collapsed}),t=u()({[lt]:!0});return b.a.createElement("div",{className:t},b.a.createElement(Ye,null),b.a.createElement(be.a,{isOpen:this.state.openResetWorkspaceWall,cancel:this.closeResetWorkspaceWall,action:this.resetWorkspace,actionText:"Reset",cancelText:"Cancel",wallOverlayType:"screen"},b.a.createElement("h2",null,B.components.code_editor.reset_workspace_confirmation_title),b.a.createElement("p",null,B.components.code_editor.reset_workspace_confirmation_content)),b.a.createElement(Xe.a,{isOpen:this.state.openShareWall,dismiss:this.closeCollaborationWall},b.a.createElement(CollaborationWallContent_CollaborationWallContent,{gist:!0,files:this.state.files,dismiss:this.closeCollaborationWall})),b.a.createElement("div",{className:at},!this.props.presenter.navigator_disabled||this.state.authoringMode?b.a.createElement(Me,{open:this.state.fileToolOpen,toggleLayout:this.toggleLayout}):null,b.a.createElement("div",{className:e},this.renderHeader(),b.a.createElement("div",{className:u()("editor-container",mt)},this.renderEditorOrPlaceholder()),this.renderFooter())))}}),St={trackClick:T.f};var _t,Tt=Object(w.connect)((e=>({checkpointsRunning:Object(_.h)(e)})),St,null,{forwardRef:!0})(kt),xt=s("e2nI"),Ot=s("babB"),Nt=s("VAEl"),Mt=s("ScvY"),Rt=s("G9Nm"),Dt=s("YPUT"),Wt=s("ud20"),Ft="container__1jE6C6bjuF6ymn8Jvdmw2R";var Pt=Object(x.b)(Wt.a,["stdout","stderr","exitStatus"])(_t=class SQLPreview extends b.a.Component{render(){const e=this.props,t=e.stdout,s=e.stderr;return b.a.createElement("div",{className:Ft,"data-testid":"interactive-output-component"},b.a.createElement(Dt.a,{result:t}),b.a.createElement(fe.a,{pinnedBottom:!0,componentOnly:!0,componentError:s,timestamp:(new Date).valueOf()}))}})||_t,Bt=s("dUu8"),It=s("NZpv"),jt=s("nYFV"),At=s("RoNi"),Lt=s("qwsu"),zt=s("TYUh");var Ht=g()({displayName:"TerminalContainer",mixins:[D.a.listenTo(k.a.resized,"onResize"),D.a.listenTo(S.a.restore.completed,"resetTerminals"),x.a.connect(Ne.a,["workspaceReady","workspaceStatusType"]),x.a.connect(Lt.a,["sessions","busy","currentSession","hasCreatedSessionBefore","fontSize","hasFocus"])],componentDidMount(){this.state.workspaceReady?this.createInitialTerminal():this.unsubSetWorkspace=S.a.setWorkspace.completed.listen((()=>this.setState({workspaceReady:!0}))),Bt.a.saveTerminalReference(this)},componentWillUnmount(){this.unsubSetWorkspace&&this.unsubSetWorkspace()},createInitialTerminal(){0===this.state.sessions.length&&It.a.createSession("bash").then((()=>{this.props.onReady&&this.props.onReady()}))},componentDidUpdate(e,t){t.currentSession!==this.state.currentSession&&this.state.hasFocus&&this.getActiveTerminal()&&i()((()=>{this.getActiveTerminal().focus()})),t.workspaceReady&&!this.state.workspaceReady&&It.a.closeAllSessions(),!t.workspaceReady&&this.state.workspaceReady&&this.createInitialTerminal()},getActiveTerminal(){const e=Lt.a.currentSession();return e?this.refs[e.id]:null},getAllTerminals(){return this.state.sessions.map((e=>this.refs[e.id]))},onResize(){const e=this.getAllTerminals();if(!e||!e.length)return;const t=this.getActiveTerminal();if(t&&!t.state.fake&&t.refRealTerminal){const s=t.refRealTerminal.getRowsCols();for(const t of e)t.resize(s)}},resetTerminals(){this.replaceState(Object.assign({},this.getInitialState(),{workspaceReady:this.state.workspaceReady})),this.createInitialTerminal()},renderTerminal(e,t){return b.a.createElement(jt.a,{key:t.id,ref:t.id,session:t,terminalId:t.id,fakeResponses:this.props.presenter.fake_responses,handleRealResponse:(e,t)=>{this.props.broadcast("input",e,t)},onFocus:It.a.focus,onBlur:It.a.blur,isActive:e===this.state.currentSession,hasCheckWork:this.props.presenter.hasCheckWork,workspaceReady:this.state.workspaceReady,fontSize:this.state.fontSize,hasFocus:this.state.hasFocus,checkpointRun:()=>Bt.a.run(),setFontSize:e=>{It.a.setFontSize(e)},closeSession:e=>{It.a.closeSession(e)}})},createNewTerminal(){It.a.createSession("bash")},render(){const e=this.props.presenter,t=e.hasCheckWork,s=e.displayErrors;let r=[];const n=Object($e.a)(this.state);if(n)r=b.a.createElement("div",{className:zt.a.terminalContainerSkeleton},b.a.createElement(Ze.a,null));else if(this.state.sessions&&this.state.sessions.length>0)for(let e=0;e<this.state.sessions.length;e+=1){const t=this.state.sessions[e];r.push(this.renderTerminal(e,t))}else r=b.a.createElement("div",{className:"fcn-terminal-container__placeholder"},b.a.createElement("div",{className:"fcn-terminal-container__placeholder__body"},b.a.createElement("div",{className:"fcn-terminal-container__placeholder__icon fcn-icon fcn-icon-terminal"}),b.a.createElement("span",{className:"fcn-terminal-container__placeholder__text"},"Terminal"),this.state.hasCreatedSessionBefore&&!this.state.busy?b.a.createElement("span",{className:"fcn-terminal-container__placeholder__text"},b.a.createElement(O.a,{theme:"lantern",style:{marginTop:20},outline:!0,onClick:()=>{It.a.createSession("bash")}},"New session")):null));const i=b.a.createElement(At.a,{isLoading:n,isBusy:this.state.busy,canCreateSession:Lt.a.canCreateSession(),currentSessionIndex:this.state.currentSession,sessions:this.state.sessions.map((e=>({id:e.id,title:e.title}))),toggleFullscreen:this.props.helpers.toggleFullscreen,createNewTerminal:this.createNewTerminal,selectTerminalSession:It.a.selectSession,closeTerminalSession:It.a.closeSession}),o=b.a.createElement("div",{className:"fcn-component-footer"},b.a.createElement(Je.a,null,b.a.createElement(O.a,{className:zt.a.evaluateButton,square:!0,theme:"lantern",onClick:this.props.presenter.evaluateExercise,block:!0},"project"===this.props.presenter.contentItemType?B.components.terminal.refresh_browser:B.components.terminal.run_checkpoints)));return b.a.createElement("div",{className:"fcn-terminal-container fcn-terminal-container--with-header"},i,r,s&&b.a.createElement(fe.a,{onVisibilityToggle:this.onResize}),t?o:null)}}),Ut=s("4az4"),Kt=s("44Ds"),Vt=s.n(Kt),Gt=s("bizM"),Zt=s("bQRv"),qt=s("2h7Y");const Qt=Vt()(((e,t)=>e),((e,t)=>t));var Yt=g()({displayName:"WebBrowser",urlBarRef:Object(f.createRef)(),browserRef:Object(f.createRef)(),mixins:[x.a.connect(Zt.a),x.a.connect(Ne.a,["workspaceReady","workspaceStatusType"])],getInitialState:()=>({urlBarValue:""}),getBrowser(){return this.browserRef},onUrlBarKeyDown(e){13===e.keyCode&&Gt.a.load(this.state.urlBarValue)},onUrlBarChange(e){this.setState({urlBarValue:e.target.value})},componentDidUpdate(e,t){!t.workspaceReady&&this.state.workspaceReady&&this.onHome()},isBlank(){const e=this.state.location;return!(void 0===e?{}:e).internalUrl||!Ne.a.state.workspaceObject},onHome(){void 0!==this.props.presenter.display_url&&Gt.a.load(this.props.presenter.display_url)},bindBrowserListener:e=>Gt.a.sendMessage.listen(e),onBrowserMessage({data:e}){e&&(e.location&&Gt.a.push(e.location),Gt.a.receiveMessage(e))},onBrowserLoad(e){Zt.a.state.onLoadCallback(),this.setState((e=>({urlBarValue:e.location.displayUrl})))},onBrowserError(e){},onBack(){this.state.historyIndex>0&&Gt.a.navigateBack()},onRefresh(){Gt.a.refresh()},getSrc(){const e=this.state,t=e.location,s=e.nonce,r=t.internalUrl&&t.internalUrl.toString()||"";return Qt(r,s)},render(){const e=this.state,t=e.nonce,s=e.urlBarValue,r=this.props,n=r.presenter,i=r.helpers;return b.a.createElement(qt.a,{src:this.getSrc(),displayUrl:s,urlBarRef:this.urlBarRef,browserRef:this.browserRef,bindBrowserListener:this.bindBrowserListener,onBack:this.onBack,onRefresh:this.onRefresh,onHome:this.onHome,onBrowserMessage:this.onBrowserMessage,onBrowserLoad:this.onBrowserLoad,onBrowserError:this.onBrowserError,onUrlBarKeyDown:this.onUrlBarKeyDown,onUrlBarChange:this.onUrlBarChange,onToggleFullscreen:i.toggleFullscreen,showErrors:!!n.displayErrors,isLoading:this.state.loading,isReady:!Object($e.a)(this.state),isBlank:this.isBlank(),refreshCount:t})}});var Jt={ReadOnlyCodeEditor:Rt.b,PersistentCodeEditor:Tt,Image:xt.a,Video:Ut.a,Narrative:Nt.a,Terminal:Ht,OutputTerminal:Mt.a,WebBrowser:Yt,Brief:Ot.a,SQLPreview:Pt},Xt=s("NkHZ");const $t=new Map([["Narrative","Narrative and Instructions"],["OutputTerminal","Output-only Terminal"],["PersistentCodeEditor","Code Editor"],["ReadOnlyCodeEditor","Read-only Code Pane"],["WebBrowser","Web Browser"]]);class Slot_Slot extends f.PureComponent{constructor(...e){super(...e),this.componentRef=b.a.createRef()}componentDidMount(){this.register()}componentDidUpdate(){this.register()}register(){this.props.adapter.registerComponent&&this.props.adapter.registerComponent(this.props.component.name,this.componentRef.current)}render(){const e=this.props,t=e.slot,s=e.deferred,r=void 0===s||s,n=t.geometry,i=this.props.modifiers.disabled||this.props.modifiers.collapsed,o={position:"absolute",top:"".concat(100*n.top(),"%"),right:"".concat(100-100*n.right(),"%"),bottom:"".concat(100-100*n.bottom(),"%"),left:"".concat(100*n.left(),"%")},a=u()({"fcn-component":!0,enabled:!i,disabled:i,collapsed:this.props.modifiers.collapsed}),l=u()({"fcn-slot":!0,"fcn-slot--no-top-neighbor":n.soloEdges().top,"fcn-slot--no-right-neighbor":n.soloEdges().right,"fcn-slot--no-bottom-neighbor":n.soloEdges().bottom,"fcn-slot--no-left-neighbor":n.soloEdges().left,collapsed:this.props.modifiers.collapsed,"fcn-slot--collapsed-x":n.withinCollapseThreshold("x"),"fcn-slot--collapsed-y":n.withinCollapseThreshold("y")}),c=$t.get(this.props.component.name)||this.props.component.name,h=b.a.createElement("div",{"aria-label":c,id:"discovery-resize-".concat(this.props.locations),className:l,style:o,"data-fcn-arrangement":this.props.slot.arrangement.slots,role:"region"},b.a.createElement(C.a,{as:"h2"},c),b.a.createElement("div",{className:a},b.a.createElement("div",{className:"overlay"}),b.a.createElement(this.props.component.constructor,{presenter:this.props.component.presenter,user:this.props.user,broadcast:this.props.adapter.createComponentBroadcastFunction(this.props.component.name),modifiers:this.props.modifiers,helpers:this.props.helpers,geometry:this.props.slot.geometry,ref:this.componentRef})),n.withinCollapseThreshold("x")||n.withinCollapseThreshold("y")?b.a.createElement("div",{className:u()({"fcn-slot-snapped-button":!0,["fcn-slot-snapped-button--".concat(this.props.component.name)]:!0}),onClick:()=>{this.props.expandSlot(this.props.slot.geometry.id)}},b.a.createElement("div",{className:u()({"fcn-slot-snapped-button__icon":!0,"fcn-icon":!0,["fcn-icon-".concat(this.props.component.icon||"learn")]:!0})})):void 0);return r?b.a.createElement(Xt.a,null,h):h}}Slot_Slot.defaultProps={deferred:!0};var es=Slot_Slot,ts=s("dLBa");const ss={PersistentCodeEditor:"CodeEditor",WebBrowser:"Preview",Terminal:"Terminal",OutputTerminal:"Terminal",Brief:"Narrative",Image:"Visual",Video:"Visual",SQLPreview:"SQLPreview"};var rs=ts.a.extend({initialize(){this.arrangements={},this.registerLayouts([{Narrative:"03"},{Narrative:"03",CodeEditor:"1245"},{Narrative:"03",CodeEditor:"14",ReadOnlyCodeEditor:"25"},{Narrative:"03",CodeEditor:"1",ReadOnlyCodeEditor:"2",Preview:"45"},{Narrative:"03",CodeEditor:"1",ReadOnlyCodeEditor:"2",Terminal:"45"},{Narrative:"03",Preview:"1245"},{Narrative:"03",Terminal:"1245"},{Narrative:"03",Visual:"1245"},{Narrative:"03",SQLPreview:"1245"},{Narrative:"03",CodeEditor:"14",Preview:"25"},{Narrative:"03",CodeEditor:"14",Visual:"25"},{Narrative:"03",CodeEditor:"14",Terminal:"25"},{Narrative:"03",CodeEditor:"14",SQLPreview:"25"},{Narrative:"03",CodeEditor:"1",Preview:"25",Terminal:"4"},{Narrative:"03",CodeEditor:"1",Visual:"25",Terminal:"4"},{Narrative:"03",Preview:"14",Visual:"25"},{Narrative:"03",Preview:"25",Terminal:"14"},{Narrative:"03",Terminal:"45",Visual:"12"}])},registerLayouts(e){e.forEach((e=>{this.registerLayout(e)}))},registerLayout(e){const t=Object.keys(e).sort().join("_"),s={};for(const t in e)s[t]={slots:"".concat(e[t]),cols:this.determineColForSlots(e[t])};this.arrangements[t]=s},determineColForSlots(e){let t="";return/[03]/.test(e+="")&&(t+="1"),/[14]/.test(e)&&(t+="2"),/[25]/.test(e)&&(t+="3"),t},getArrangement(e){return this.arrangements[this.buildComponentName(e)]},arrangementAmong(e,t){const s=this.getArrangement(t);if(void 0===s)throw new Error("Couldn't find layout for ".concat(this.buildComponentName(t)));return s[ss[e.type]]||s[e.type]},buildComponentName:e=>Object.keys(e).map((e=>ss[e]||e)).sort(((e,t)=>e.toLowerCase().localeCompare(t.toLowerCase()))).join("_")});const ns=.04,is=.06,os=["x","y"],as={right:"x",bottom:"y",left:"x",top:"y"},ls={top:"bottom",right:"left",bottom:"top",left:"right"};class Range{constructor(e,t){this.min=e,this.max=t,this.length=t-e+1}contains(e,t={}){const s=t.buffer||0;return this.min-s<=e&&this.max+s>=e}}class Posn{constructor(e,t){this.x=e,this.y=t}clone(){return new Posn(this.x,this.y)}gte(e){return this.x>=e.x&&this.y>=e.y}lte(e){return this.x<=e.x&&this.y<=e.y}}class Cell{constructor(e,t,s,r){this.x=e,this.y=t,this.id=s,this.neighbors={},this.grid=r,this._right={value:e/r.width+1/r.width},this._bottom={value:t/r.height+1/r.height},0===e&&(this._left={value:0}),0===t&&(this._top={value:0})}left(){return 0===this.x?0:this.neighbors.left.right()}right(){return this._right.value}top(){return 0===this.y?0:this.neighbors.top.bottom()}bottom(){return this._bottom.value}soloEdges(){return{top:void 0===this.neighbors.top,right:void 0===this.neighbors.right,bottom:void 0===this.neighbors.bottom,left:void 0===this.neighbors.left}}set(e,t){switch(e){case"top":if(0===this.y)throw new Error("Cannot set 'top' on top-most cell");this.neighbors.top._bottom.value=t;break;case"right":if(this.x===this.grid.width-1)throw new Error("Cannot set 'right' on right-most cell");this._right.value=t;break;case"bottom":if(this.y===this.grid.height-1)throw new Error("Cannot set 'bottom' on bottom-most cell");this._bottom.value=t;break;case"left":if(0===this.x)throw new Error("Cannot set 'left' on left-most cell");this.neighbors.left._right.value=t}}}class geometry_Slot{constructor(e,t){this.id=e,this.grid=t,this.cells={},this.lastEdgeSet={x:void 0,y:void 0}}registerCells(e){for(const t of e){if(this.cells[t.id]=t,void 0!==t.slot)throw new Error("Can't register slot ".concat(this.id,"; cell ").concat(t.id," already belongs to slot ").concat(t.slot.id,"!"));t.slot=this}this.calculateEdges(),this.mergePointers(),this.cacheNeighbors()}calculateEdges(){this.edgeCells={top:[],right:[],bottom:[],left:[]},this.edges={top:1,right:0,bottom:0,left:1};const e=Object.values(this.cells);for(const t of["top","right","bottom","left"])for(const s of e){const e=s[t]();0===this.edgeCells[t].length||e===this.edges[t]?(this.edgeCells[t].push(s),this.edges[t]=e):(("left"===t||"top"===t)&&e<this.edges[t]||("right"===t||"bottom"===t)&&e>this.edges[t])&&(this.edgeCells[t]=[s],this.edges[t]=e)}this.edgeExtents={};const t=this.sharedEdges();for(const e in t)if(t[e]){const t=this.edgeCells[e];this.edgeExtents[e]={x:new Range(Math.min(...t.map((e=>e.left()))),Math.max(...t.map((e=>e.right())))),y:new Range(Math.min(...t.map((e=>e.top()))),Math.max(...t.map((e=>e.bottom()))))}}}mergePointers(){for(const e in ls){const t=ls[e],s=this.edgeCells[e][0];if(!s["_".concat(e)]){const r=s.neighbors[e];r&&(s["_".concat(e)]=r["_".concat(t)])}for(const r of this.edgeCells[e]){r["_".concat(e)]=s["_".concat(e)];const n=r.neighbors[e];n&&r["_".concat(e)]&&(n["_".concat(t)]=r["_".concat(e)])}}}cacheNeighbors(){const e={top:[],right:[],bottom:[],left:[]};for(const t of Object.values(this.cells))t.neighbors.top&&t.top()===this.edges.top&&-1===e.top.indexOf(t.neighbors.top.slot)&&e.top.push(t.neighbors.top.slot),t.neighbors.right&&t.right()===this.edges.right&&-1===e.right.indexOf(t.neighbors.right.slot)&&e.right.push(t.neighbors.right.slot),t.neighbors.bottom&&t.bottom()===this.edges.bottom&&-1===e.bottom.indexOf(t.neighbors.bottom.slot)&&e.bottom.push(t.neighbors.bottom.slot),t.neighbors.left&&t.left()===this.edges.left&&-1===e.left.indexOf(t.neighbors.left.slot)&&e.left.push(t.neighbors.left.slot);this.neighbors=e}soloEdges(){return{top:this.edgeCells.top[0].soloEdges().top,right:this.edgeCells.right[0].soloEdges().right,bottom:this.edgeCells.bottom[0].soloEdges().bottom,left:this.edgeCells.left[0].soloEdges().left}}sharedEdges(){return{top:!this.edgeCells.top[0].soloEdges().top,right:!this.edgeCells.right[0].soloEdges().right,bottom:!this.edgeCells.bottom[0].soloEdges().bottom,left:!this.edgeCells.left[0].soloEdges().left}}top(){return this.edgeCells.top[0].top()}right(){return this.edgeCells.right[0].right()}bottom(){return this.edgeCells.bottom[0].bottom()}origin(){return new Posn(this.left(),this.top())}left(){return this.edgeCells.left[0].left()}width(){return this.right()-this.left()}roundedWidth(){return Math.round(100*this.width())/100}height(){return this.bottom()-this.top()}roundedHeight(){return Math.round(100*this.height())/100}coordExtent(){return{x:new Range(this.edgeCells.left[0].x,this.edgeCells.right[0].x),y:new Range(this.edgeCells.top[0].y,this.edgeCells.bottom[0].y)}}collapsed(e){switch(e){case"x":return this.roundedWidth()<=ns;case"y":return this.roundedHeight()<=is;default:return this.collapsed("x")||this.collapsed("y")}}elgibileToSnap(e){switch(e){case"x":{const e=this.roundedWidth();return e>ns&&e<=.1}default:{const e=this.roundedHeight();return e>is&&e<=.17}}}withinCollapseThreshold(e){switch(e){case"x":return this.roundedWidth()<=.1;default:return this.roundedHeight()<=.17}}slack(e){switch(e){case"x":return this.roundedWidth()-ns;default:return this.roundedHeight()-is}}firstSlotWithSlackInDirection(e){const t=as[e];return this.slack(t)>0?this:0===this.neighbors[e].length?null:this.neighbors[e][0].firstSlotWithSlackInDirection(e)}neighborWithSlackInDirection(e){switch(e){case"top":case"left":return this.firstSlotWithSlackInDirection(e);case"right":case"bottom":return this.neighbors[e][0].firstSlotWithSlackInDirection(e);default:return null}}firstDirectionWithSlack(e){for(const t of e)if(this.neighborWithSlackInDirection(t))return t;return null}set(e,t){for(const s of this.edgeCells[e])s.set(e,t);const s=as[e];this.lastEdgeSet[s]=e;for(const t of this.neighbors[e]){t.lastEdgeSet[s]=ls[e],t.redistributeCells();const r=t.neighbors[ls[e]].filter((e=>e!==this));for(const t of r)t.lastEdgeSet[s]=e,t.redistributeCells()}this.redistributeCells()}push(e,t){const s=ls[e];if(0===this.neighbors[e].length)return!1;if("top"===e){return this.neighbors.top[0].push(s,-t)}if("left"===e){return this.neighbors.left[0].push(s,-t)}const r=as[e];let n;if(n=t>0?this.neighborWithSlackInDirection(e):this.neighborWithSlackInDirection(s),!n)return!1;const i=t<0;t=Math.min(Math.abs(t),n.slack(r)),i&&(t=-t),this.set(e,this[e]()+t),this.enforceMinimumDimensions(e);const o=this.neighbors[t>0?e:s];if(o)for(const e of o)e.enforceMinimumDimensions(s);return!0}redistributeCells(){const e=Object.values(this.cells),t=this.coordExtent();for(const s of e){if(t.x.length>1){const e=(s.x+1-t.x.min)/t.x.length;s.neighbors.right&&s.set("right",this.left()+e*this.width())}if(t.y.length>1){const e=(s.y+1-t.y.min)/t.y.length;s.neighbors.bottom&&s.set("bottom",this.top()+e*this.height())}}}fullscreen(){let e=!1;for(const t in as)for(;this.push(t,1);)e=!0;return e}enforceMinimumDimensions(e){const t=this.width(),s=this.height();switch(e){case"left":t<ns&&(this.neighbors.right.length?this.set("right",this.left()+ns):this.set("left",this.right()-ns));break;case"right":t<ns&&(this.neighbors.left.length?this.set("left",this.right()-ns):this.set("right",this.left()+ns));break;case"top":s<is&&(this.neighbors.bottom.length?this.set("bottom",this.top()+is):this.set("top",this.bottom()-is));break;default:s<is&&(this.neighbors.top.length?this.set("top",this.bottom()-is):this.set("bottom",this.top()+is))}}}class Grid{constructor(e,t){this.width=e,this.height=t,this.cells=[],this.slots={};for(let s=0;s<t;s+=1){const t=this.cells[s]=[];for(let r=0;r<e;r+=1){const n=new Cell(r,s,s*e+r,this);t[r]=n}}for(let s=0;s<t;s+=1)for(let r=0;r<e;r+=1){const n=this.getCellByCoords(r,s);s>0&&(n.neighbors.top=this.getCellByCoords(r,s-1)),r<e-1&&(n.neighbors.right=this.getCellByCoords(r+1,s)),s<t-1&&(n.neighbors.bottom=this.getCellByCoords(r,s+1)),r>0&&(n.neighbors.left=this.getCellByCoords(r-1,s))}}registerSlot(e){const t=new geometry_Slot(e,this);this.slots[e]=t;const s=e.split("").map((e=>this.getCellById(parseInt(e,10))));t.registerCells(s),this.slotsList=Object.values(this.slots);for(const e of this.slotsList)e.cacheNeighbors()}getSlotById(e){return this.slots[e]}getCellByCoords(e,t){return this.cells[t][e]}getCellById(e){const t=e%this.width,s=Math.floor(e/this.width);return this.cells[s][t]}registerDOMNode(e){this.DOMNode=e}DOMNodeRect(){return this.DOMNode.getBoundingClientRect()}percentageToPx(e,t){if(0===t)return 0;switch(e){case"x":return this.DOMNodeRect().width*t;default:return this.DOMNodeRect().height*t}}pxToPercentage(e,t){if(0===t)return 0;switch(e){case"x":return t/this.DOMNodeRect().width;default:return t/this.DOMNodeRect().height}}gutterUnderPosn(e){const t=this.DOMNodeRect(),s=new Posn(e.x-t.left,e.y-t.top);for(const e of this.slotsList)for(const t in e.edgeExtents)switch(t){case"right":{const r=this.percentageToPx("x",e[t]()),n=this.percentageToPx("y",e.edgeExtents[t].y.min),i=this.percentageToPx("y",e.edgeExtents[t].y.max);if(Math.abs(s.x-r)<7&&s.y>=n&&s.y<=i)return{edge:t,slot:e};break}case"bottom":{const r=this.percentageToPx("y",e[t]()),n=this.percentageToPx("x",e.edgeExtents[t].x.min),i=this.percentageToPx("x",e.edgeExtents[t].x.max);if(Math.abs(s.y-r)<7&&s.x>=n&&s.x<=i)return{edge:t,slot:e};break}}}recalculateEdges(){for(const e of this.slotsList)e.calculateEdges()}getSlotsWaitingToCollapse(e){return this.slotsList.filter((t=>t.elgibileToSnap(e)))}expandSlot(e){const t=this.getSlotById(e),s=t.origin(),r=t.coordExtent();for(const e of os){const s=t.lastEdgeSet[e],n=t.firstDirectionWithSlack([s,ls[s]]);if(!n)continue;let i;if(t.withinCollapseThreshold(e))switch(e){case"x":i=r[e].length/this.width,t.push(n,i-t.width());break;default:i=r[e].length/this.height,t.push(n,i-t.height())}}this.snapSlots(s)}expandSlotInDirection(e,t){const s=this.getSlotById(e),r=s.neighbors[t];let n;r.length>0&&(n=r[0].slack(as[t]),s.push(t,n))}toggleFullscreenSlot(e){if(!this.slots[e].fullscreen()){const e=1/this.width,t=1/this.height;for(let s=0;s<this.height;s+=1)for(let r=0;r<this.width;r+=1){const n=this.cells[s][r];n._right.value=(r+1)*e,n._bottom.value=(s+1)*t}return!1}return!0}fullscreenSlot(){const e=this.slotsList.filter((e=>!(e.withinCollapseThreshold("x")||e.withinCollapseThreshold("y"))));return 1===e.length?e[0]:null}snapSlots(e){this.recalculateEdges();const t=[],s={};for(const r of["x","y"]){const n=this.getSlotsWaitingToCollapse(r);for(const i of n){let n;const o=-i.slack(r);if(n=s[r]?s[r]:i.origin().lte(e)?{x:"right",y:"bottom"}[r]:{x:"left",y:"top"}[r],(0===i.neighbors[n].length||t.indexOf(i.neighbors[n][0].id)>-1)&&(n=ls[n]),0===i.neighbors[n].length||t.indexOf(i.neighbors[n][0].id)>-1)return;s[r]=n,i.push(n,o),t.push(i.id)}}}}let cs=null,hs=null;var ds={save(){if(cs=document.activeElement,cs&&window.getSelection){const e=window.getSelection();hs="Range"===e.type?e.getRangeAt(0):null}},restore(){if(cs&&(cs.focus(),hs&&window.getSelection)){const e=window.getSelection();e.rangeCount>0&&e.removeAllRanges(),e.addRange(hs)}}},ps={componentDidMount(){document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)},componentWillUnmount(){document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp)},onMouseDown(e){0===e.button&&this.handleMouseDown&&this.handleMouseDown(e)},onMouseUp(e){if(this.handleMouseUp){if(void 0!==e._dispatchIDs)return;this.handleMouseUp(e)}},onMouseMove(e){if(this.handleMouseMove){if(void 0!==e._dispatchIDs)return;this.handleMouseMove(e,this.state.didMouseMove),this.state.didMouseMove=!0}}};function ComponentGrid_ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function ComponentGrid_objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ComponentGrid_ownKeys(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ComponentGrid_ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const us={Terminal:"terminal",OutputTerminal:"terminal",PersistentCodeEditor:"editor",ReadOnlyCodeEditor:"editor",Image:"image",Narrative:"learn",WebBrowser:"browser"},ms=g()({displayName:"ComponentGrid",mixins:[ps],getInitialState(){const e=new Grid(3,2),t={fullscreenSlot:void 0,config:new rs,cursor:"auto",grid:e,slotArrangements:{},hasTrackedDragging:!1},s=this.props.components;for(const r of Object.keys(s)){const n=t.config.arrangementAmong(s[r],s);e.registerSlot(n.slots)}for(let t=0;t<e.width*e.height;t+=1)e.getCellById(t).slot||e.registerSlot("".concat(t));return void 0!==this.props.gridSetup&&this.props.gridSetup(e),t},componentDidMount(){this.state.grid.registerDOMNode(y.a.findDOMNode(this))},UNSAFE_componentWillUpdate(e,t){t.grid&&(t.fullscreenSlot=t.grid.fullscreenSlot())},componentDidUpdate(){this.state.resizing&&k.a.resized(),this.state.resizing=!1},hasCheckWork(){const e=this.props,t=e.contentItemType,s=e.components;return!("project"===t&&!Object.keys(s).includes("WebBrowser"))&&(!0===c()(s,"Terminal.prevent_checkpoint_run")&&!0===c()(s,"PersistentCodeEditor.no_run_button"))},evaluateExercise(){return this.props.checkpointsRunning?Promise.resolve():this.hasCheckWork()?S.a.checkWork():S.a.saveFilesAndCheckWork()},selectComponentForError(){const e=this.props.components,t=["PersistentCodeEditor","Terminal","WebBrowser"];for(const s of t)if(e[s])return s;const s=Object.keys(e).filter((e=>"Narrative"!==e));return s.length>0?s[0]:null},buildComponents(){const e=this.props.components,t={};for(const s of Object.keys(e)){const r=Jt[e[s].type],n=this.state.config.arrangementAmong(e[s],e),i=this.props.helpers.componentShouldBeDisabled(s);this.state.slotArrangements[s]=n.slots;const o=this.toggleFullscreenSlot.bind(this,n.slots),l=b.a.createElement(FullScreenControls,{toggleFullscreen:o,isFullscreen:!!this.state.fullscreenSlot}),c=ComponentGrid_objectSpread(ComponentGrid_objectSpread({},this.props.modifiers),{},{disabled:i,fullscreen:n.slots===this.state.fullscreenSlot,dragging:this.state.dragging});let h={fullscreenButton:l,evaluateExercise:this.evaluateExercise,hasCheckWork:this.hasCheckWork(),contentItemType:this.props.contentItemType};a()(h,this.props.presenter);const d=this.selectComponentForError();h.displayErrors=d===s,h=a()({},e[s],h);const p={arrangement:n,wall:this.props.presenter.wall,geometry:this.state.grid.slots[n.slots]},u={toggleFullscreen:this.toggleFullscreenSlot.bind(this,n.slots)},m={constructor:r,presenter:h,name:s,icon:us[s]},g=b.a.createElement(es,{deferred:-1===["Brief","Narrative"].indexOf(s),locations:n.slots,component:m,slot:p,modifiers:c,helpers:u,adapter:this.props.adapter,user:this.props.user,expandSlot:this.expandSlot,key:"slot:".concat(s)});for(const e of n.slots.split(""))t[e]=g}return d()(Object.keys(t).sort().map((e=>t[e])))},expandSlot(e){this.state.grid.expandSlot(e),this.setState((e=>({grid:e.grid,resizing:!0})))},expandSlotByName(e){const t=this.state.slotArrangements[e];if(!t)throw new Error("No arrangement for ".concat(e));this.state.grid.expandSlot(t),this.setState((e=>({grid:e.grid,resizing:!0})))},toggleFullscreenSlot(e){this.state.grid.toggleFullscreenSlot(e),Object(E.c)({target:"platformFullscreen"}),this.setState((e=>({grid:e.grid,resizing:!0})))},hasDOMNode(){return Boolean(this.state.grid.DOMNode)},handleMouseMove(e,t){if(!this.hasDOMNode())return;const s=this.getPosns(e).pagePosn;if(this.state.dragging){if(e.preventDefault(),this.props.adapter.trigger("interface:resizing"),this.state.hasTrackedDragging||(Object(E.c)({target:"platformDragHandle"}),this.setState((()=>({hasTrackedDragging:!0})))),t){let e;const t=this.state.focusedGutter.edge;if("right"===t){const t=this.state.grid.DOMNodeRect().left+this.state.grid.percentageToPx("x",this.state.focusedGutter.slot.right());e=s.x-t,this.state.focusedGutter.slot.push("right",this.state.grid.pxToPercentage("x",e)),this.setState((e=>({grid:e.grid})))}else if("bottom"===t){const t=this.state.grid.DOMNodeRect().top+this.state.grid.percentageToPx("y",this.state.focusedGutter.slot.bottom());e=s.y-t,this.state.focusedGutter.slot.push("bottom",this.state.grid.pxToPercentage("y",e)),this.setState((e=>({grid:e.grid})))}}}else{const e=this.state.grid.gutterUnderPosn(s);let t;t=void 0!==e?{right:"ew-resize",bottom:"ns-resize"}[e.edge]:"auto",ds.save(),this.state.focusedGutter===e&&this.state.cursor===t||this.setState({focusedGutter:e,cursor:t})}},handleMouseDown(){this.state.focusedGutter&&this.setState({dragging:!0})},handleMouseUp(e){this.state.dragging&&(this.state.grid.snapSlots(this.state.focusedGutter.slot.origin()),e.stopPropagation(),e.preventDefault(),i()(ds.restore)),this.setState((e=>({grid:e.grid,dragging:!1,resizing:e.dragging})))},getPosns(e){if(!this.hasDOMNode())return{};const t=this.state.grid.DOMNodeRect();return{offsetPosn:new Posn(e.pageX-t.left,e.offsetY-t.top),pagePosn:new Posn(e.pageX,e.pageY)}},render(){const e=u()({"fcn-grid":!0,"fcn-grid--dragging":!!this.state.dragging}),t={cursor:this.state.cursor};return b.a.createElement("main",{className:e,onMouseMove:this.onMouseMove,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,style:t},b.a.createElement(C.a,{as:"h1"},this.props.title),this.buildComponents(),this.props.presenter.wall)}});t.a=Object(w.connect)((e=>({checkpointsRunning:Object(_.h)(e)})),null,null,{forwardRef:!0})(ms)},HMXE:function(e){e.exports=JSON.parse('{"noCodeMessage":"Oops! There\'s an open file that has nothing to share right now - try writing some code first!","copyMessage":"Copy the path below to share your code","ctaTitle":"Copy","clipBoardMessages":{"error":"uh oh! there was a problem copying the url!","success":"Link copied!"},"gistError":"Oops! There was an error generating the gist url"}')},ScvY:function(e,t,s){"use strict";var r=s("BzM2"),n=s("MKeS"),i=s("fhzG"),o=s.n(i),a=s("q1tI"),l=s.n(a),c=s("071C"),h=s("/9uS"),d=s("ydTQ");const p=Object(n.a)({resolved:{},chunkName:()=>"OutputTerminal",isReady(e){const t=this.resolve(e);return!0===this.resolved[t]&&!!s.m[t]},importAsync:()=>Promise.all([s.e(293),s.e(518),s.e(98),s.e(149),s.e(381)]).then(s.bind(null,"Wt+T")),requireAsync(e){const t=this.resolve(e);return this.resolved[t]=!1,this.importAsync(e).then((e=>(this.resolved[t]=!0,e)))},requireSync(e){const t=this.resolve(e);return s(t)},resolve(){return"Wt+T"}}),u=o()({displayName:"OutputTerminalRefluxContainer",mixins:[r.a.connect(h.a,["output","awaitingInput"]),r.a.connect(d.a,["workspaceStatusType","workspaceReady"])],handleInput(e){c.a.input(e)},render(){return l.a.createElement(p,{awaitingInput:this.state.awaitingInput,handleInput:this.handleInput,output:this.state.output,workspaceReady:this.state.workspaceReady,workspaceStatusType:this.state.workspaceStatusType})}});t.a=u},Z6NK:function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var r=s("BzM2"),n=s("eikI"),i={componentShouldBeDisabled(e){switch(e){case"Terminal":case"OutputTerminal":case"WebBrowser":case"PersistentCodeEditor":case"ReadOnlyCodeEditor":if(!this.state.workspaceReady)return!0}return!!(this.isExerciseLocked&&this.isExerciseLocked()||n.a.isAnon())}},o=s("fxH1");const a=[r.a.connect(o.a),i]},bf6c:function(e,t,s){"use strict";s.d(t,"a",(function(){return setupWorkspace}));var r=s("rePB"),n=s("eikI"),i=s("bizM"),o=s("t2YD"),a=s("NZ0w");function ownKeys(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.push.apply(s,r)}return s}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(s),!0).forEach((function(t){Object(r.a)(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))}))}return e}const setupWorkspace=async({content:e,userId:t})=>{if(n.a.isAnon())return;const s=_objectSpread(_objectSpread({},e.workspace),{},{einConfig:e.ein_config});s.user_id=t,e.components.PersistentCodeEditor?o.a.publishFilenames(e.components.PersistentCodeEditor.files):o.a.publishFilenames([]),await a.a.setWorkspace(s),await i.a.clearHistory(),e.components.WebBrowser&&e.components.WebBrowser.display_url&&await i.a.load(e.components.WebBrowser.display_url)}},dLBa:function(e,t,s){"use strict";var r=s("OFL0"),n=s.n(r),i=s("zdiy"),o=s.n(i),a=s("w/QP"),l=s.n(a),c=s("gB9P"),h=s.n(c);function Controller(){this.initialize.apply(this,arguments)}Controller.extend=function(e,t){const s=this;let r;return r=e&&n()(e,"constructor")?e.constructor:function(){return s.apply(this,arguments)},o()(r,s,t),r.prototype=l()(s.prototype,e),r.prototype.constructor=r,r.__super__=s.prototype,r},Controller.prototype=h.a.mixin({}),t.a=Controller},i3sr:function(e,t,s){"use strict";var r=s("FZcb"),n=s("/VKx"),i=s("JCGJ"),o=s("q1tI"),a=s.n(o),l=s("Xxlx"),c=s("z9go"),h=s("eikI"),d={container:"container__usWHItN4GY3utD-Qqxitn",headerMsg:"headerMsg__iI61DAKtQ3OAvBE4NnPL9",mainMsg:"mainMsg__2rk7wWjya8MIutrFpXoHs",maintButton:"maintButton__37m3w5Qoqo2zmQhR7Hn124",iconContainer:"iconContainer__2e_WMqoAVg8Lb39Ppm6d8M",icon:"icon__1oTDB3w_fXLAvnZDLOKr82"};class MaintenancePane_MaintenancePane extends o.Component{constructor(...e){super(...e),this.state={notify:!1},this.notify=()=>{Object(c.c)({target:"maintenance_notify",element:"maintenance_notify",slug:this.props.slug}),this.setState({notify:!0})}}renderNofiicationButton(){if(h.a.isAnon())return null;const e=this.state.notify?"nuetral":"secondary";return a.a.createElement(r.a,{block:!0,theme:e,className:d.maintButton,onClick:this.notify},this.state.notify?"Ok we'll let you know!":"Notify Me When This Course Is Available")}render(){return a.a.createElement(n.b,{className:d.container},a.a.createElement(n.a,{grow:1,column:!0,className:d.itemRow,center:!0},a.a.createElement(n.a,{center:!0,className:d.iconContainer},a.a.createElement(i.a,{size:52,className:d.icon})),a.a.createElement("h1",{className:d.headerMsg},"Under Construction"),a.a.createElement(n.a,{column:!0,className:d.mainMsg},a.a.createElement("p",null,"Hey there,"),a.a.createElement("p",null,"We are currently having a service outage, and some of our content is unavailable. We are working hard to get this fixed, and appreciate your patience!"),a.a.createElement("p",null,"Keep up the good work!")),a.a.createElement(n.a,null,a.a.createElement(l.a,{href:"/catalog",data:{target:"maintenance_pane_explore_all"},disableTracking:!0},a.a.createElement(r.a,{theme:"secondary",className:d.maintButton},"Explore All Courses")),this.renderNofiicationButton())))}}t.a=MaintenancePane_MaintenancePane},oqPb:function(e,t,s){e.exports=s.p+"58bc6bc211514dbfbd8ed1add6a87a49.svg"},vYtj:function(e,t,s){e.exports=s.p+"9863bf17c1f2242a1bea6434fa8259a4.svg"},zqu8:function(e,t,s){"use strict";var r=s("ncDI"),n=s.n(r),i=s("q1tI"),o=s.n(i),a=s("F6+0"),l=s("NZ0w"),c=s("lkI2");class LegacyLearningEnvironment extends o.a.Component{componentDidMount(){this.resizeCallback=n()(window,"resize",(()=>{a.a.resized()})),this.onlineCallback=n()(window,"online",(()=>{Object(c.a)("info","Reconnected from offline state"),l.a.setOfflineState(!1)})),this.offlineCallback=n()(window,"offline",(()=>{l.a.setOfflineState(!0)}))}componentWillUnmount(){window.removeEventListener("resize",this.resizeCallback),window.removeEventListener("online",this.onlineCallback),window.removeEventListener("offline",this.offlineCallback)}render(){return o.a.createElement(o.a.Fragment,null,this.props.children)}}t.a=LegacyLearningEnvironment}}]);
//# sourceMappingURL=271.1eea7cf480bb7bb15fb1.chunk.js.map