(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[59],{"96qd":function(e,t,n){"use strict";var a=n("udU5"),i=n("630U"),o=n("7xvl"),c=n("q1tI"),s=n.n(c),r=n("z9go"),l=n("g3jP"),u=n.n(l);const d={"location/DASHBOARD":"dashboard_v2","location/CATALOG":"catalog","location/COURSE":"course_landing_page","location/PATH":"path_landing_page","location/COURSE_CONTENT_ITEM":"le_course_content_item","location/PATH_CONTENT_ITEM":"le_path_content_item"},byDate=(e,t)=>new Date(t.time).getTime()-new Date(e.time).getTime();class NotificationsList extends c.Component{constructor(...e){super(...e),this.trackNotificationClick=e=>{const t=this.props.locationType;Object(r.b)("notification","clicked",{target:"notification_bell_cta",page_name:t&&d[t]||null,event_id:e.id,context:e.campaign}),Object(r.c)({target:"notification_bell_cta",page_name:t&&d[t],event_id:e.id,context:e.campaign})},this.componentWillUnmount=()=>{this.props.notificationsMarkedRead(this.props.notifications.map((({id:e})=>e)))},this.getImageType=({img:e,campaign_name:t})=>{if("achievement"===t)return{icon:"trophy",url:void 0};if("streaks"===t)return{icon:void 0,url:u.a};const n=null==e?void 0:e.type,a=null==e?void 0:e.slug;return{icon:"icon"===n?a:void 0,url:"url"===n?a:void 0}}}render(){const e=this.props.notifications.sort(byDate).map((e=>{const t=this.getImageType(e),n=t.icon,a=t.url;return{date:Object(o.a)(new Date(e.time)),id:e.id,iconSettings:{color:i.d["blue-900"]},iconSlug:n,imageUrl:a,link:e.href,text:e.description,unread:1===e.status,campaign:e.campaign_name}}));return s.a.createElement(a.a,{className:this.props.className,notifications:e,onNotificationClick:this.trackNotificationClick})}}t.a=NotificationsList},"P9M/":function(e,t,n){"use strict";var a=n("ODXe"),i=n("/VKx"),o=n("7Wyp"),c=n("G9Ht"),s=n.n(c),r=n("q1tI"),l=n.n(r),u=n("eikI"),d=n("MAbI"),m="toggle__3szlvGns4ctzptRSxBW7sy",f="menu__1AfYFtFYdqxwHtktzinK",p="menuItem__28u20ypRAyAvlHBP5pXU5s",_="separatorBottom__stMBw7lQlcd5SFdGddDbg",g="separatorTop__2VEbmByYvOdmtayFGvjpae",b="topDropdown__1GixDLKn_VzbgBE21Ko03H";const ClickTarget=({profileImage:e,onClick:t,targetRef:n})=>l.a.createElement("div",{ref:n},l.a.createElement("button",{"aria-label":"my account dropdown toggle",className:m,id:"dropdown-toggle",onClick:t,type:"button"},l.a.createElement(d.a,{small:!0,imageUrl:e})));var h=n("npf3"),E=n("TSYQ"),O=n.n(E),v=n("b0K7"),A=n("RsCp");class MenuItems_MenuItems extends l.a.Component{constructor(...e){super(...e),this.generateMenuItems=()=>{const e=this.props,t=e.showNavItems,n=e.isMobile,a=e.showProAds,i=e.isAdmin,o=e.isCustomerService,c=e.isPro,s=e.hasStudentScholarship,r=e.isAccountManager,l={href:v.Gb,children:"Upgrade to Pro",visible:n||t};return[a&&l,...Object(A.i)({isAdmin:i,isCustomerService:o,isPro:c,hasStudentScholarship:s,isAccountManager:r})].filter((e=>!!e))},this.getSeparator=e=>"help-link"===e?_:"sign-out-link"===e?g:null}render(){const e=this.generateMenuItems();return l.a.createElement("div",null,e.filter((e=>e.visible)).map((e=>{const t=e.icon;return l.a.createElement("a",{onClick:e.onClick,href:e.href,target:"help-link"===e.id?"_blank":"_self","data-testid":e.id,key:"link-to-".concat(e.id),className:O()(p,"no-underline",e.id&&[this.getSeparator(e.id)])},t&&l.a.createElement(t,{size:24,"aria-hidden":!0}),e.children,e.badge?l.a.createElement(h.a,null,e.badge):null)})))}}t.a=({profileImage:e,showNavItems:t=!1,showProAds:n,inTrialPlanInTrialPeriod:c,onClick:d})=>{const m=Object(r.useRef)(null),p=Object(r.useState)(!1),_=Object(a.a)(p,2),g=_[0],h=_[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement(ClickTarget,{profileImage:e,targetRef:m,onClick:()=>{h(!g),!g&&(null==d||d())}}),l.a.createElement(o.a,{className:b,align:"right",offset:1,outline:!0,isOpen:g,onRequestClose:()=>{h(!1)},targetRef:m},l.a.createElement(i.a,{column:!0,className:f},l.a.createElement("nav",null,l.a.createElement(MenuItems_MenuItems,{showNavItems:t,showProAds:n,isMobile:s.a.any,isAdmin:u.a.isAdmin(),isCustomerService:u.a.isCustomerService(),isPro:u.a.isPro()&&!c,hasStudentScholarship:u.a.hasStudentScholarship(),isAccountManager:u.a.isAccountManager()})))))}},QJz3:function(e,t,n){"use strict";n.d(t,"b",(function(){return useNotificationArea})),n.d(t,"c",(function(){return useNotificationInteractions})),n.d(t,"a",(function(){return useNotifications}));var a=n("q1tI"),i=n("/MKj"),o=n("G4qV"),c=n("GsXu"),s=n("tQXl");function useNotificationArea(e){const t=e.id,n=Object(a.useMemo)((()=>{const e=Object(s.a)(t),n=Object(s.b)(e);return Object(o.b)({notifications:e,unreadCount:n})}),[t]);return Object(i.useSelector)(n)}function useNotificationInteractions(){const e=Object(i.useDispatch)();return Object(a.useMemo)((()=>({notificationsMarkedRead:t=>e(Object(c.d)(t))})),[e])}function useNotifications(e){!function useNotificationSubscribe(e){const t=Object(i.useDispatch)();return Object(a.useEffect)((()=>(t(Object(c.c)(e)),()=>{t(Object(c.b)(e.id))})),[t,e])}(e);return{data:useNotificationArea(e),actions:useNotificationInteractions()}}},g3jP:function(e,t,n){e.exports=n.p+"2e7770af3a38c3442e7802f2f6a91a6f.svg"},gnd6:function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationsDropdown}));var a=n("ODXe"),i=n("/VKx"),o=n("7Wyp"),c=n("q1tI"),s=n.n(c),r=n("tFdb"),l=n("96qd"),u=n("Xxlx"),d=n("QJz3"),m=n("ixXQ"),f="dropdown__1F_fcRWv-pe25RtHTZdeFh",p="notifications__dQ5YhPElQyuN4YvV60puJ",_="menuBell__3g4iBnjXjfVM0Q6IKDdIdT",g="topDropdown__1HUStgseh56noHmJ3KzVoN";const NotificationsDropdown=e=>{const t=Object(d.a)(m.a.HEADER_AREA),n=t.data,b=t.actions,h=n.notifications,E=n.unreadCount,O=b.notificationsMarkedRead,v=e.locationType,A=Object(c.useRef)(null),N=Object(c.useState)(!1),j=Object(a.a)(N,2),k=j[0],C=j[1],S=s.a.createElement("div",{ref:A},s.a.createElement(i.a,{center:!0,className:_},s.a.createElement(u.a,{data:{context:"global_nav",target:"notification_bell"},disableTracking:!!k,"aria-label":"notifications","data-testid":"notification_bell"},s.a.createElement(r.a,{theme:e.theme,key:"notification-bell",unreadCount:E,onClick:()=>{C(!k)}}))));return s.a.createElement(s.a.Fragment,null,S,s.a.createElement(o.a,{className:g,align:"right",offset:1,outline:!0,isOpen:k,onRequestClose:()=>{C(!1)},targetRef:A},s.a.createElement(i.a,{column:!0,className:f},s.a.createElement(l.a,{className:p,notifications:h,notificationsMarkedRead:O,locationType:v}))))}},ixXQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));const a={HEADER_AREA:{id:"bell",types:[],showRead:!0,limit:5},TOAST_AREA:{id:"toast",types:["achievement","target_not_met","target_met","target_exceeded","streak_extended","streak_started"],showRead:!1,limit:5}}},tFdb:function(e,t,n){"use strict";n.d(t,"a",(function(){return NotificationBell}));var a=n("ODXe"),i=n("FZcb"),o=n("iicK"),c=n("TSYQ"),s=n.n(c),r=n("q1tI"),l=n.n(r),u={bell:"bell__AzBwO6vfXd1vBBNs_toEi",light:"light__2QkOxErjEG_gJjXx-P0vkr",unreadWrapper:"unreadWrapper__vRj5dfRgbpv3O9pAY9p9w",unread:"unread__CEzUq-gsL9aPdjh-k_4RR",ring:"ring__C8pkxyECPU6OcGZUFeBT4"};const NotificationBell=({as:e="button",className:t,theme:n="dark",unreadCount:c,onClick:d})=>{const m=Object(r.useState)(),f=Object(a.a)(m,2),p=f[0],_=f[1],g=Object(r.useState)(0),b=Object(a.a)(g,2),h=b[0],E=b[1];Object(r.useEffect)((()=>{_(window.document.querySelector('link[rel="shortcut icon"]'))}),[]),Object(r.useEffect)((()=>{p&&(p.href="/favicon".concat(c?"-unread":"",".ico"))}),[c,p]);const onMouseOut=()=>{E(h+1)};Object(r.useEffect)((()=>{const e=setTimeout((()=>{h>0&&E(h-1)}),2e3);return()=>clearTimeout(e)}),[h]);const O=s()(t,u.bell,u["".concat(n)],{[u.ring]:h>10});return l.a.createElement(i.a,{as:e,className:O,flat:!0,onBlur:onMouseOut,onMouseOut:onMouseOut,onClick:d,theme:"brand-dark-blue",type:"button","aria-label":"Toggle Notification Menu"},l.a.createElement(o.a,{size:20}),0!==c&&l.a.createElement("div",{id:"notification-count",className:u.unreadWrapper},l.a.createElement("p",{className:u.unread},c>99?99:c)))}}}]);
//# sourceMappingURL=59.81a740720092d06e88ff.chunk.js.map